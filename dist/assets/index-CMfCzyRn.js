(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Gp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Um={exports:{}},Wl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function hC(){if(p_)return Wl;p_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:l}}return Wl.Fragment=e,Wl.jsx=t,Wl.jsxs=t,Wl}var g_;function mC(){return g_||(g_=1,Um.exports=hC()),Um.exports}var g=mC(),Om={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_;function pC(){if(y_)return Ne;y_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),b=Symbol.iterator;function w(B){return B===null||typeof B!="object"?null:(B=b&&B[b]||B["@@iterator"],typeof B=="function"?B:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,O={};function z(B,se,he){this.props=B,this.context=se,this.refs=O,this.updater=he||D}z.prototype.isReactComponent={},z.prototype.setState=function(B,se){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,se,"setState")},z.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function G(){}G.prototype=z.prototype;function j(B,se,he){this.props=B,this.context=se,this.refs=O,this.updater=he||D}var ee=j.prototype=new G;ee.constructor=j,L(ee,z.prototype),ee.isPureReactComponent=!0;var le=Array.isArray;function ie(){}var N={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function k(B,se,he){var pe=he.ref;return{$$typeof:n,type:B,key:se,ref:pe!==void 0?pe:null,props:he}}function P(B,se){return k(B.type,se,B.props)}function V(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function U(B){var se={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(he){return se[he]})}var M=/\/+/g;function ce(B,se){return typeof B=="object"&&B!==null&&B.key!=null?U(""+B.key):se.toString(36)}function Ve(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(ie,ie):(B.status="pending",B.then(function(se){B.status==="pending"&&(B.status="fulfilled",B.value=se)},function(se){B.status==="pending"&&(B.status="rejected",B.reason=se)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function Q(B,se,he,pe,Ce){var ke=typeof B;(ke==="undefined"||ke==="boolean")&&(B=null);var Ue=!1;if(B===null)Ue=!0;else switch(ke){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(B.$$typeof){case n:case e:Ue=!0;break;case T:return Ue=B._init,Q(Ue(B._payload),se,he,pe,Ce)}}if(Ue)return Ce=Ce(B),Ue=pe===""?"."+ce(B,0):pe,le(Ce)?(he="",Ue!=null&&(he=Ue.replace(M,"$&/")+"/"),Q(Ce,se,he,"",function(Ze){return Ze})):Ce!=null&&(V(Ce)&&(Ce=P(Ce,he+(Ce.key==null||B&&B.key===Ce.key?"":(""+Ce.key).replace(M,"$&/")+"/")+Ue)),se.push(Ce)),1;Ue=0;var Tt=pe===""?".":pe+":";if(le(B))for(var Ee=0;Ee<B.length;Ee++)pe=B[Ee],ke=Tt+ce(pe,Ee),Ue+=Q(pe,se,he,ke,Ce);else if(Ee=w(B),typeof Ee=="function")for(B=Ee.call(B),Ee=0;!(pe=B.next()).done;)pe=pe.value,ke=Tt+ce(pe,Ee++),Ue+=Q(pe,se,he,ke,Ce);else if(ke==="object"){if(typeof B.then=="function")return Q(Ve(B),se,he,pe,Ce);throw se=String(B),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function ue(B,se,he){if(B==null)return B;var pe=[],Ce=0;return Q(B,pe,"","",function(ke){return se.call(he,ke,Ce++)}),pe}function de(B){if(B._status===-1){var se=B._result;se=se(),se.then(function(he){(B._status===0||B._status===-1)&&(B._status=1,B._result=he)},function(he){(B._status===0||B._status===-1)&&(B._status=2,B._result=he)}),B._status===-1&&(B._status=0,B._result=se)}if(B._status===1)return B._result.default;throw B._result}var Se=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},Le={map:ue,forEach:function(B,se,he){ue(B,function(){se.apply(this,arguments)},he)},count:function(B){var se=0;return ue(B,function(){se++}),se},toArray:function(B){return ue(B,function(se){return se})||[]},only:function(B){if(!V(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Ne.Activity=x,Ne.Children=Le,Ne.Component=z,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=j,Ne.StrictMode=i,Ne.Suspense=m,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(B){return N.H.useMemoCache(B)}},Ne.cache=function(B){return function(){return B.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(B,se,he){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var pe=L({},B.props),Ce=B.key;if(se!=null)for(ke in se.key!==void 0&&(Ce=""+se.key),se)!R.call(se,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&se.ref===void 0||(pe[ke]=se[ke]);var ke=arguments.length-2;if(ke===1)pe.children=he;else if(1<ke){for(var Ue=Array(ke),Tt=0;Tt<ke;Tt++)Ue[Tt]=arguments[Tt+2];pe.children=Ue}return k(B.type,Ce,pe)},Ne.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:l,_context:B},B},Ne.createElement=function(B,se,he){var pe,Ce={},ke=null;if(se!=null)for(pe in se.key!==void 0&&(ke=""+se.key),se)R.call(se,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Ce[pe]=se[pe]);var Ue=arguments.length-2;if(Ue===1)Ce.children=he;else if(1<Ue){for(var Tt=Array(Ue),Ee=0;Ee<Ue;Ee++)Tt[Ee]=arguments[Ee+2];Ce.children=Tt}if(B&&B.defaultProps)for(pe in Ue=B.defaultProps,Ue)Ce[pe]===void 0&&(Ce[pe]=Ue[pe]);return k(B,ke,Ce)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(B){return{$$typeof:d,render:B}},Ne.isValidElement=V,Ne.lazy=function(B){return{$$typeof:T,_payload:{_status:-1,_result:B},_init:de}},Ne.memo=function(B,se){return{$$typeof:f,type:B,compare:se===void 0?null:se}},Ne.startTransition=function(B){var se=N.T,he={};N.T=he;try{var pe=B(),Ce=N.S;Ce!==null&&Ce(he,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(ie,Se)}catch(ke){Se(ke)}finally{se!==null&&he.types!==null&&(se.types=he.types),N.T=se}},Ne.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ne.use=function(B){return N.H.use(B)},Ne.useActionState=function(B,se,he){return N.H.useActionState(B,se,he)},Ne.useCallback=function(B,se){return N.H.useCallback(B,se)},Ne.useContext=function(B){return N.H.useContext(B)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(B,se){return N.H.useDeferredValue(B,se)},Ne.useEffect=function(B,se){return N.H.useEffect(B,se)},Ne.useEffectEvent=function(B){return N.H.useEffectEvent(B)},Ne.useId=function(){return N.H.useId()},Ne.useImperativeHandle=function(B,se,he){return N.H.useImperativeHandle(B,se,he)},Ne.useInsertionEffect=function(B,se){return N.H.useInsertionEffect(B,se)},Ne.useLayoutEffect=function(B,se){return N.H.useLayoutEffect(B,se)},Ne.useMemo=function(B,se){return N.H.useMemo(B,se)},Ne.useOptimistic=function(B,se){return N.H.useOptimistic(B,se)},Ne.useReducer=function(B,se,he){return N.H.useReducer(B,se,he)},Ne.useRef=function(B){return N.H.useRef(B)},Ne.useState=function(B){return N.H.useState(B)},Ne.useSyncExternalStore=function(B,se,he){return N.H.useSyncExternalStore(B,se,he)},Ne.useTransition=function(){return N.H.useTransition()},Ne.version="19.2.0",Ne}var v_;function Hp(){return v_||(v_=1,Om.exports=pC()),Om.exports}var te=Hp();const jp=Gp(te);var qm={exports:{}},Xl={},Bm={exports:{}},Fm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function gC(){return __||(__=1,(function(n){function e(Q,ue){var de=Q.length;Q.push(ue);e:for(;0<de;){var Se=de-1>>>1,Le=Q[Se];if(0<o(Le,ue))Q[Se]=ue,Q[de]=Le,de=Se;else break e}}function t(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var ue=Q[0],de=Q.pop();if(de!==ue){Q[0]=de;e:for(var Se=0,Le=Q.length,B=Le>>>1;Se<B;){var se=2*(Se+1)-1,he=Q[se],pe=se+1,Ce=Q[pe];if(0>o(he,de))pe<Le&&0>o(Ce,he)?(Q[Se]=Ce,Q[pe]=de,Se=pe):(Q[Se]=he,Q[se]=de,Se=se);else if(pe<Le&&0>o(Ce,de))Q[Se]=Ce,Q[pe]=de,Se=pe;else break e}}return ue}function o(Q,ue){var de=Q.sortIndex-ue.sortIndex;return de!==0?de:Q.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var m=[],f=[],T=1,x=null,b=3,w=!1,D=!1,L=!1,O=!1,z=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function ee(Q){for(var ue=t(f);ue!==null;){if(ue.callback===null)i(f);else if(ue.startTime<=Q)i(f),ue.sortIndex=ue.expirationTime,e(m,ue);else break;ue=t(f)}}function le(Q){if(L=!1,ee(Q),!D)if(t(m)!==null)D=!0,ie||(ie=!0,U());else{var ue=t(f);ue!==null&&Ve(le,ue.startTime-Q)}}var ie=!1,N=-1,R=5,k=-1;function P(){return O?!0:!(n.unstable_now()-k<R)}function V(){if(O=!1,ie){var Q=n.unstable_now();k=Q;var ue=!0;try{e:{D=!1,L&&(L=!1,G(N),N=-1),w=!0;var de=b;try{t:{for(ee(Q),x=t(m);x!==null&&!(x.expirationTime>Q&&P());){var Se=x.callback;if(typeof Se=="function"){x.callback=null,b=x.priorityLevel;var Le=Se(x.expirationTime<=Q);if(Q=n.unstable_now(),typeof Le=="function"){x.callback=Le,ee(Q),ue=!0;break t}x===t(m)&&i(m),ee(Q)}else i(m);x=t(m)}if(x!==null)ue=!0;else{var B=t(f);B!==null&&Ve(le,B.startTime-Q),ue=!1}}break e}finally{x=null,b=de,w=!1}ue=void 0}}finally{ue?U():ie=!1}}}var U;if(typeof j=="function")U=function(){j(V)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,ce=M.port2;M.port1.onmessage=V,U=function(){ce.postMessage(null)}}else U=function(){z(V,0)};function Ve(Q,ue){N=z(function(){Q(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(Q){switch(b){case 1:case 2:case 3:var ue=3;break;default:ue=b}var de=b;b=ue;try{return Q()}finally{b=de}},n.unstable_requestPaint=function(){O=!0},n.unstable_runWithPriority=function(Q,ue){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var de=b;b=Q;try{return ue()}finally{b=de}},n.unstable_scheduleCallback=function(Q,ue,de){var Se=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Se+de:Se):de=Se,Q){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=de+Le,Q={id:T++,callback:ue,priorityLevel:Q,startTime:de,expirationTime:Le,sortIndex:-1},de>Se?(Q.sortIndex=de,e(f,Q),t(m)===null&&Q===t(f)&&(L?(G(N),N=-1):L=!0,Ve(le,de-Se))):(Q.sortIndex=Le,e(m,Q),D||w||(D=!0,ie||(ie=!0,U()))),Q},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(Q){var ue=b;return function(){var de=b;b=ue;try{return Q.apply(this,arguments)}finally{b=de}}}})(Fm)),Fm}var T_;function yC(){return T_||(T_=1,Bm.exports=gC()),Bm.exports}var zm={exports:{}},nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_;function vC(){if(x_)return nn;x_=1;var n=Hp();function e(m){var f="https://react.dev/errors/"+m;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)f+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+m+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(m,f,T){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:m,containerInfo:f,implementation:T}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,f){if(m==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,nn.createPortal=function(m,f){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return l(m,f,null,T)},nn.flushSync=function(m){var f=u.T,T=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=f,i.p=T,i.d.f()}},nn.preconnect=function(m,f){typeof m=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(m,f))},nn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},nn.preinit=function(m,f){if(typeof m=="string"&&f&&typeof f.as=="string"){var T=f.as,x=d(T,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;T==="style"?i.d.S(m,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:x,integrity:b,fetchPriority:w}):T==="script"&&i.d.X(m,{crossOrigin:x,integrity:b,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},nn.preinitModule=function(m,f){if(typeof m=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var T=d(f.as,f.crossOrigin);i.d.M(m,{crossOrigin:T,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(m)},nn.preload=function(m,f){if(typeof m=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var T=f.as,x=d(T,f.crossOrigin);i.d.L(m,T,{crossOrigin:x,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},nn.preloadModule=function(m,f){if(typeof m=="string")if(f){var T=d(f.as,f.crossOrigin);i.d.m(m,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:T,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(m)},nn.requestFormReset=function(m){i.d.r(m)},nn.unstable_batchedUpdates=function(m,f){return m(f)},nn.useFormState=function(m,f,T){return u.H.useFormState(m,f,T)},nn.useFormStatus=function(){return u.H.useHostTransitionStatus()},nn.version="19.2.0",nn}var E_;function SE(){if(E_)return zm.exports;E_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),zm.exports=vC(),zm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_;function _C(){if(b_)return Xl;b_=1;var n=yC(),e=Hp(),t=SE();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function u(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(i(188))}function f(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var a=r,c=s;;){var v=a.return;if(v===null)break;var _=v.alternate;if(_===null){if(c=v.return,c!==null){a=c;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===a)return m(v),r;if(_===c)return m(v),s;_=_.sibling}throw Error(i(188))}if(a.return!==c.return)a=v,c=_;else{for(var S=!1,C=v.child;C;){if(C===a){S=!0,a=v,c=_;break}if(C===c){S=!0,c=v,a=_;break}C=C.sibling}if(!S){for(C=_.child;C;){if(C===a){S=!0,a=_,c=v;break}if(C===c){S=!0,c=_,a=v;break}C=C.sibling}if(!S)throw Error(i(189))}}if(a.alternate!==c)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?r:s}function T(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=T(r),s!==null)return s;r=r.sibling}return null}var x=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),j=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function U(r){return r===null||typeof r!="object"?null:(r=V&&r[V]||r["@@iterator"],typeof r=="function"?r:null)}var M=Symbol.for("react.client.reference");function ce(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===M?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case L:return"Fragment";case z:return"Profiler";case O:return"StrictMode";case le:return"Suspense";case ie:return"SuspenseList";case k:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case D:return"Portal";case j:return r.displayName||"Context";case G:return(r._context.displayName||"Context")+".Consumer";case ee:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case N:return s=r.displayName||null,s!==null?s:ce(r.type)||"Memo";case R:s=r._payload,r=r._init;try{return ce(r(s))}catch{}}return null}var Ve=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Se=[],Le=-1;function B(r){return{current:r}}function se(r){0>Le||(r.current=Se[Le],Se[Le]=null,Le--)}function he(r,s){Le++,Se[Le]=r.current,r.current=s}var pe=B(null),Ce=B(null),ke=B(null),Ue=B(null);function Tt(r,s){switch(he(ke,s),he(Ce,r),he(pe,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?Ov(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=Ov(s),r=qv(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}se(pe),he(pe,r)}function Ee(){se(pe),se(Ce),se(ke)}function Ze(r){r.memoizedState!==null&&he(Ue,r);var s=pe.current,a=qv(s,r.type);s!==a&&(he(Ce,r),he(pe,a))}function ct(r){Ce.current===r&&(se(pe),se(Ce)),Ue.current===r&&(se(Ue),Jl._currentValue=de)}var Mn,Dn;function mi(r){if(Mn===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Mn=s&&s[1]||"",Dn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mn+r+Dn}var Ja=!1;function Cs(r,s){if(!r||Ja)return"";Ja=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(X){var $=X}Reflect.construct(r,[],oe)}else{try{oe.call()}catch(X){$=X}r.call(oe.prototype)}}else{try{throw Error()}catch(X){$=X}(oe=r())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(X){if(X&&$&&typeof X.stack=="string")return[X.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),S=_[0],C=_[1];if(S&&C){var q=S.split(`
`),K=C.split(`
`);for(v=c=0;c<q.length&&!q[c].includes("DetermineComponentFrameRoot");)c++;for(;v<K.length&&!K[v].includes("DetermineComponentFrameRoot");)v++;if(c===q.length||v===K.length)for(c=q.length-1,v=K.length-1;1<=c&&0<=v&&q[c]!==K[v];)v--;for(;1<=c&&0<=v;c--,v--)if(q[c]!==K[v]){if(c!==1||v!==1)do if(c--,v--,0>v||q[c]!==K[v]){var Z=`
`+q[c].replace(" at new "," at ");return r.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",r.displayName)),Z}while(1<=c&&0<=v);break}}}finally{Ja=!1,Error.prepareStackTrace=a}return(a=r?r.displayName||r.name:"")?mi(a):""}function Ka(r,s){switch(r.tag){case 26:case 27:case 5:return mi(r.type);case 16:return mi("Lazy");case 13:return r.child!==s&&s!==null?mi("Suspense Fallback"):mi("Suspense");case 19:return mi("SuspenseList");case 0:case 15:return Cs(r.type,!1);case 11:return Cs(r.type.render,!1);case 1:return Cs(r.type,!0);case 31:return mi("Activity");default:return""}}function $a(r){try{var s="",a=null;do s+=Ka(r,a),a=r,r=r.return;while(r);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var wt=Object.prototype.hasOwnProperty,qt=n.unstable_scheduleCallback,Er=n.unstable_cancelCallback,qf=n.unstable_shouldYield,Ou=n.unstable_requestPaint,un=n.unstable_now,Is=n.unstable_getCurrentPriorityLevel,Qa=n.unstable_ImmediatePriority,Wa=n.unstable_UserBlockingPriority,br=n.unstable_NormalPriority,Bf=n.unstable_LowPriority,qu=n.unstable_IdlePriority,Bu=n.log,Fu=n.unstable_setDisableYieldValue,Qn=null,Jt=null;function Pn(r){if(typeof Bu=="function"&&Fu(r),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(Qn,r)}catch{}}var xt=Math.clz32?Math.clz32:Gu,zu=Math.log,Eo=Math.LN2;function Gu(r){return r>>>=0,r===0?32:31-(zu(r)/Eo|0)|0}var pi=256,Ns=262144,Ct=4194304;function gi(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function yi(r,s,a){var c=r.pendingLanes;if(c===0)return 0;var v=0,_=r.suspendedLanes,S=r.pingedLanes;r=r.warmLanes;var C=c&134217727;return C!==0?(c=C&~_,c!==0?v=gi(c):(S&=C,S!==0?v=gi(S):a||(a=C&~r,a!==0&&(v=gi(a))))):(C=c&~_,C!==0?v=gi(C):S!==0?v=gi(S):a||(a=c&~r,a!==0&&(v=gi(a)))),v===0?0:s!==0&&s!==v&&(s&_)===0&&(_=v&-v,a=s&-s,_>=a||_===32&&(a&4194048)!==0)?s:v}function Wn(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Ff(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hu(){var r=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),r}function vi(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function Rs(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function zf(r,s,a,c,v,_){var S=r.pendingLanes;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=a,r.entangledLanes&=a,r.errorRecoveryDisabledLanes&=a,r.shellSuspendCounter=0;var C=r.entanglements,q=r.expirationTimes,K=r.hiddenUpdates;for(a=S&~a;0<a;){var Z=31-xt(a),oe=1<<Z;C[Z]=0,q[Z]=-1;var $=K[Z];if($!==null)for(K[Z]=null,Z=0;Z<$.length;Z++){var X=$[Z];X!==null&&(X.lane&=-536870913)}a&=~oe}c!==0&&ks(r,c,0),_!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=_&~(S&~s))}function ks(r,s,a){r.pendingLanes|=s,r.suspendedLanes&=~s;var c=31-xt(s);r.entangledLanes|=s,r.entanglements[c]=r.entanglements[c]|1073741824|a&261930}function Xa(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var c=31-xt(a),v=1<<c;v&s|r[c]&s&&(r[c]|=s),a&=~v}}function Za(r,s){var a=s&-s;return a=(a&42)!==0?1:Ms(a),(a&(r.suspendedLanes|s))!==0?0:a}function Ms(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ji(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ju(){var r=ue.p;return r!==0?r:(r=window.event,r===void 0?32:l_(r.type))}function Xn(r,s){var a=ue.p;try{return ue.p=r,s()}finally{ue.p=a}}var Zn=Math.random().toString(36).slice(2),It="__reactFiber$"+Zn,Gt="__reactProps$"+Zn,_i="__reactContainer$"+Zn,bo="__reactEvents$"+Zn,Gf="__reactListeners$"+Zn,Yu="__reactHandles$"+Zn,Ju="__reactResources$"+Zn,Ti="__reactMarker$"+Zn;function So(r){delete r[It],delete r[Gt],delete r[bo],delete r[Gf],delete r[Yu]}function xi(r){var s=r[It];if(s)return s;for(var a=r.parentNode;a;){if(s=a[_i]||a[It]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=Yv(r);r!==null;){if(a=r[It])return a;r=Yv(r)}return s}r=a,a=r.parentNode}return null}function Vn(r){if(r=r[It]||r[_i]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function xn(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Ei(r){var s=r[Ju];return s||(s=r[Ju]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Nt(r){r[Ti]=!0}var el=new Set,tl={};function bi(r,s){Si(r,s),Si(r+"Capture",s)}function Si(r,s){for(tl[r]=s,r=0;r<s.length;r++)el.add(s[r])}var nl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),il={},rl={};function Ku(r){return wt.call(rl,r)?!0:wt.call(il,r)?!1:nl.test(r)?rl[r]=!0:(il[r]=!0,!1)}function Ao(r,s,a){if(Ku(s))if(a===null)r.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+a)}}function En(r,s,a){if(a===null)r.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+a)}}function Rt(r,s,a,c){if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttributeNS(s,a,""+c)}}function Ht(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Sr(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function sl(r,s,a){var c=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,_=c.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return v.call(this)},set:function(S){a=""+S,_.call(this,S)}}),Object.defineProperty(r,s,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function et(r){if(!r._valueTracker){var s=Sr(r)?"checked":"value";r._valueTracker=sl(r,s,""+r[s])}}function Ds(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return r&&(c=Sr(r)?r.checked?"true":"false":r.value),r=c,r!==a?(s.setValue(r),!0):!1}function Ai(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ps=/[\n"\\]/g;function fn(r){return r.replace(Ps,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function wo(r,s,a,c,v,_,S,C){r.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.type=S:r.removeAttribute("type"),s!=null?S==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Ht(s)):r.value!==""+Ht(s)&&(r.value=""+Ht(s)):S!=="submit"&&S!=="reset"||r.removeAttribute("value"),s!=null?ol(r,S,Ht(s)):a!=null?ol(r,S,Ht(a)):c!=null&&r.removeAttribute("value"),v==null&&_!=null&&(r.defaultChecked=!!_),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+Ht(C):r.removeAttribute("name")}function $u(r,s,a,c,v,_,S,C){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),s!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||s!=null)){et(r);return}a=a!=null?""+Ht(a):"",s=s!=null?""+Ht(s):a,C||s===r.value||(r.value=s),r.defaultValue=s}c=c??v,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=C?r.checked:!!c,r.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.name=S),et(r)}function ol(r,s,a){s==="number"&&Ai(r.ownerDocument)===r||r.defaultValue===""+a||(r.defaultValue=""+a)}function Ar(r,s,a,c){if(r=r.options,s){s={};for(var v=0;v<a.length;v++)s["$"+a[v]]=!0;for(a=0;a<r.length;a++)v=s.hasOwnProperty("$"+r[a].value),r[a].selected!==v&&(r[a].selected=v),v&&c&&(r[a].defaultSelected=!0)}else{for(a=""+Ht(a),s=null,v=0;v<r.length;v++){if(r[v].value===a){r[v].selected=!0,c&&(r[v].defaultSelected=!0);return}s!==null||r[v].disabled||(s=r[v])}s!==null&&(s.selected=!0)}}function Qu(r,s,a){if(s!=null&&(s=""+Ht(s),s!==r.value&&(r.value=s),a==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=a!=null?""+Ht(a):""}function wr(r,s,a,c){if(s==null){if(c!=null){if(a!=null)throw Error(i(92));if(Ve(c)){if(1<c.length)throw Error(i(93));c=c[0]}a=c}a==null&&(a=""),s=a}a=Ht(s),r.defaultValue=a,c=r.textContent,c===a&&c!==""&&c!==null&&(r.value=c),et(r)}function hn(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Wu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function al(r,s,a){var c=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":c?r.setProperty(s,a):typeof a!="number"||a===0||Wu.has(s)?s==="float"?r.cssFloat=a:r[s]=(""+a).trim():r[s]=a+"px"}function ll(r,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var v in s)c=s[v],s.hasOwnProperty(v)&&a[v]!==c&&al(r,v,c)}else for(var _ in s)s.hasOwnProperty(_)&&al(r,_,s[_])}function Co(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Io(r){return Cr.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function ei(){}var ul=null;function Ln(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ir=null,wi=null;function Vs(r){var s=Vn(r);if(s&&(r=s.stateNode)){var a=r[Gt]||null;e:switch(r=s.stateNode,s.type){case"input":if(wo(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==r&&c.form===r.form){var v=c[Gt]||null;if(!v)throw Error(i(90));wo(c,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(s=0;s<a.length;s++)c=a[s],c.form===r.form&&Ds(c)}break e;case"textarea":Qu(r,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Ar(r,!!a.multiple,s,!1)}}}var No=!1;function Nr(r,s,a){if(No)return r(s,a);No=!0;try{var c=r(s);return c}finally{if(No=!1,(Ir!==null||wi!==null)&&(jc(),Ir&&(s=Ir,r=wi,wi=Ir=null,Vs(s),r)))for(s=0;s<r.length;s++)Vs(r[s])}}function ti(r,s){var a=r.stateNode;if(a===null)return null;var c=a[Gt]||null;if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ls=!1;if(Un)try{var it={};Object.defineProperty(it,"passive",{get:function(){Ls=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{Ls=!1}var Ci=null,cl=null,Us=null;function dl(){if(Us)return Us;var r,s=cl,a=s.length,c,v="value"in Ci?Ci.value:Ci.textContent,_=v.length;for(r=0;r<a&&s[r]===v[r];r++);var S=a-r;for(c=1;c<=S&&s[a-c]===v[_-c];c++);return Us=v.slice(r,1<c?1-c:void 0)}function Os(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Yi(){return!0}function ni(){return!1}function Kt(r){function s(a,c,v,_,S){this._reactName=a,this._targetInst=v,this.type=c,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(a=r[C],this[C]=a?a(_):_[C]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Yi:ni,this.isPropagationStopped=ni,this}return x(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Yi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Yi)},persist:function(){},isPersistent:Yi}),s}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ii=Kt(Ji),Rr=x({},Ji,{view:0,detail:0}),fl=Kt(Rr),kr,Ro,Ni,ko=x({},Rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ni&&(Ni&&r.type==="mousemove"?(kr=r.screenX-Ni.screenX,Ro=r.screenY-Ni.screenY):Ro=kr=0,Ni=r),kr)},movementY:function(r){return"movementY"in r?r.movementY:Ro}}),hl=Kt(ko),qs=x({},ko,{dataTransfer:0}),Zu=Kt(qs),ec=x({},Rr,{relatedTarget:0}),Bs=Kt(ec),ml=x({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),tc=Kt(ml),Mo=x({},Ji,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),nc=Kt(Mo),ic=x({},Ji,{data:0}),Ri=Kt(ic),rc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ac(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=oc[r])?!!s[r]:!1}function Mr(){return ac}var cn=x({},Rr,{key:function(r){if(r.key){var s=rc[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Os(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?sc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mr,charCode:function(r){return r.type==="keypress"?Os(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Os(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),lc=Kt(cn),uc=x({},ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ki=Kt(uc),p=x({},Rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mr}),E=Kt(p),A=x({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=Kt(A),Y=x({},ko,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),W=Kt(Y),fe=x({},Ji,{newState:0,oldState:0}),Me=Kt(fe),Et=[9,13,27,32],Qe=Un&&"CompositionEvent"in window,mt=null;Un&&"documentMode"in document&&(mt=document.documentMode);var On=Un&&"TextEvent"in window&&!mt,ki=Un&&(!Qe||mt&&8<mt&&11>=mt),ii=" ",ri=!1;function Fs(r,s){switch(r){case"keyup":return Et.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Do(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Po=!1;function UA(r,s){switch(r){case"compositionend":return Do(s);case"keypress":return s.which!==32?null:(ri=!0,ii);case"textInput":return r=s.data,r===ii&&ri?null:r;default:return null}}function OA(r,s){if(Po)return r==="compositionend"||!Qe&&Fs(r,s)?(r=dl(),Us=cl=Ci=null,Po=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ki&&s.locale!=="ko"?null:s.data;default:return null}}var qA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $g(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!qA[r.type]:s==="textarea"}function Qg(r,s,a,c){Ir?wi?wi.push(c):wi=[c]:Ir=c,s=Xc(s,"onChange"),0<s.length&&(a=new Ii("onChange","change",null,a,c),r.push({event:a,listeners:s}))}var pl=null,gl=null;function BA(r){Mv(r,0)}function cc(r){var s=xn(r);if(Ds(s))return r}function Wg(r,s){if(r==="change")return s}var Xg=!1;if(Un){var Hf;if(Un){var jf="oninput"in document;if(!jf){var Zg=document.createElement("div");Zg.setAttribute("oninput","return;"),jf=typeof Zg.oninput=="function"}Hf=jf}else Hf=!1;Xg=Hf&&(!document.documentMode||9<document.documentMode)}function ey(){pl&&(pl.detachEvent("onpropertychange",ty),gl=pl=null)}function ty(r){if(r.propertyName==="value"&&cc(gl)){var s=[];Qg(s,gl,r,Ln(r)),Nr(BA,s)}}function FA(r,s,a){r==="focusin"?(ey(),pl=s,gl=a,pl.attachEvent("onpropertychange",ty)):r==="focusout"&&ey()}function zA(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return cc(gl)}function GA(r,s){if(r==="click")return cc(s)}function HA(r,s){if(r==="input"||r==="change")return cc(s)}function jA(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var bn=typeof Object.is=="function"?Object.is:jA;function yl(r,s){if(bn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var v=a[c];if(!wt.call(s,v)||!bn(r[v],s[v]))return!1}return!0}function ny(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function iy(r,s){var a=ny(r);r=0;for(var c;a;){if(a.nodeType===3){if(c=r+a.textContent.length,r<=s&&c>=s)return{node:a,offset:s-r};r=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ny(a)}}function ry(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?ry(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function sy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Ai(r.document);s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=Ai(r.document)}return s}function Yf(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var YA=Un&&"documentMode"in document&&11>=document.documentMode,Vo=null,Jf=null,vl=null,Kf=!1;function oy(r,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Kf||Vo==null||Vo!==Ai(c)||(c=Vo,"selectionStart"in c&&Yf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),vl&&yl(vl,c)||(vl=c,c=Xc(Jf,"onSelect"),0<c.length&&(s=new Ii("onSelect","select",null,s,a),r.push({event:s,listeners:c}),s.target=Vo)))}function zs(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var Lo={animationend:zs("Animation","AnimationEnd"),animationiteration:zs("Animation","AnimationIteration"),animationstart:zs("Animation","AnimationStart"),transitionrun:zs("Transition","TransitionRun"),transitionstart:zs("Transition","TransitionStart"),transitioncancel:zs("Transition","TransitionCancel"),transitionend:zs("Transition","TransitionEnd")},$f={},ay={};Un&&(ay=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function Gs(r){if($f[r])return $f[r];if(!Lo[r])return r;var s=Lo[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in ay)return $f[r]=s[a];return r}var ly=Gs("animationend"),uy=Gs("animationiteration"),cy=Gs("animationstart"),JA=Gs("transitionrun"),KA=Gs("transitionstart"),$A=Gs("transitioncancel"),dy=Gs("transitionend"),fy=new Map,Qf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qf.push("scrollEnd");function si(r,s){fy.set(r,s),bi(s,[r])}var dc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},qn=[],Uo=0,Wf=0;function fc(){for(var r=Uo,s=Wf=Uo=0;s<r;){var a=qn[s];qn[s++]=null;var c=qn[s];qn[s++]=null;var v=qn[s];qn[s++]=null;var _=qn[s];if(qn[s++]=null,c!==null&&v!==null){var S=c.pending;S===null?v.next=v:(v.next=S.next,S.next=v),c.pending=v}_!==0&&hy(a,v,_)}}function hc(r,s,a,c){qn[Uo++]=r,qn[Uo++]=s,qn[Uo++]=a,qn[Uo++]=c,Wf|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function Xf(r,s,a,c){return hc(r,s,a,c),mc(r)}function Hs(r,s){return hc(r,null,null,s),mc(r)}function hy(r,s,a){r.lanes|=a;var c=r.alternate;c!==null&&(c.lanes|=a);for(var v=!1,_=r.return;_!==null;)_.childLanes|=a,c=_.alternate,c!==null&&(c.childLanes|=a),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(v=!0)),r=_,_=_.return;return r.tag===3?(_=r.stateNode,v&&s!==null&&(v=31-xt(a),r=_.hiddenUpdates,c=r[v],c===null?r[v]=[s]:c.push(s),s.lane=a|536870912),_):null}function mc(r){if(50<Bl)throw Bl=0,am=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Oo={};function QA(r,s,a,c){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(r,s,a,c){return new QA(r,s,a,c)}function Zf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function $i(r,s){var a=r.alternate;return a===null?(a=Sn(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&65011712,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a.refCleanup=r.refCleanup,a}function my(r,s){r.flags&=65011714;var a=r.alternate;return a===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,s=a.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function pc(r,s,a,c,v,_){var S=0;if(c=r,typeof r=="function")Zf(r)&&(S=1);else if(typeof r=="string")S=tC(r,a,pe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case k:return r=Sn(31,a,s,v),r.elementType=k,r.lanes=_,r;case L:return js(a.children,v,_,s);case O:S=8,v|=24;break;case z:return r=Sn(12,a,s,v|2),r.elementType=z,r.lanes=_,r;case le:return r=Sn(13,a,s,v),r.elementType=le,r.lanes=_,r;case ie:return r=Sn(19,a,s,v),r.elementType=ie,r.lanes=_,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case j:S=10;break e;case G:S=9;break e;case ee:S=11;break e;case N:S=14;break e;case R:S=16,c=null;break e}S=29,a=Error(i(130,r===null?"null":typeof r,"")),c=null}return s=Sn(S,a,s,v),s.elementType=r,s.type=c,s.lanes=_,s}function js(r,s,a,c){return r=Sn(7,r,c,s),r.lanes=a,r}function eh(r,s,a){return r=Sn(6,r,null,s),r.lanes=a,r}function py(r){var s=Sn(18,null,null,0);return s.stateNode=r,s}function th(r,s,a){return s=Sn(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var gy=new WeakMap;function Bn(r,s){if(typeof r=="object"&&r!==null){var a=gy.get(r);return a!==void 0?a:(s={value:r,source:s,stack:$a(s)},gy.set(r,s),s)}return{value:r,source:s,stack:$a(s)}}var qo=[],Bo=0,gc=null,_l=0,Fn=[],zn=0,Dr=null,Mi=1,Di="";function Qi(r,s){qo[Bo++]=_l,qo[Bo++]=gc,gc=r,_l=s}function yy(r,s,a){Fn[zn++]=Mi,Fn[zn++]=Di,Fn[zn++]=Dr,Dr=r;var c=Mi;r=Di;var v=32-xt(c)-1;c&=~(1<<v),a+=1;var _=32-xt(s)+v;if(30<_){var S=v-v%5;_=(c&(1<<S)-1).toString(32),c>>=S,v-=S,Mi=1<<32-xt(s)+v|a<<v|c,Di=_+r}else Mi=1<<_|a<<v|c,Di=r}function nh(r){r.return!==null&&(Qi(r,1),yy(r,1,0))}function ih(r){for(;r===gc;)gc=qo[--Bo],qo[Bo]=null,_l=qo[--Bo],qo[Bo]=null;for(;r===Dr;)Dr=Fn[--zn],Fn[zn]=null,Di=Fn[--zn],Fn[zn]=null,Mi=Fn[--zn],Fn[zn]=null}function vy(r,s){Fn[zn++]=Mi,Fn[zn++]=Di,Fn[zn++]=Dr,Mi=s.id,Di=s.overflow,Dr=r}var $t=null,dt=null,je=!1,Pr=null,Gn=!1,rh=Error(i(519));function Vr(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tl(Bn(s,r)),rh}function _y(r){var s=r.stateNode,a=r.type,c=r.memoizedProps;switch(s[It]=r,s[Gt]=c,a){case"dialog":qe("cancel",s),qe("close",s);break;case"iframe":case"object":case"embed":qe("load",s);break;case"video":case"audio":for(a=0;a<zl.length;a++)qe(zl[a],s);break;case"source":qe("error",s);break;case"img":case"image":case"link":qe("error",s),qe("load",s);break;case"details":qe("toggle",s);break;case"input":qe("invalid",s),$u(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":qe("invalid",s);break;case"textarea":qe("invalid",s),wr(s,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||c.suppressHydrationWarning===!0||Lv(s.textContent,a)?(c.popover!=null&&(qe("beforetoggle",s),qe("toggle",s)),c.onScroll!=null&&qe("scroll",s),c.onScrollEnd!=null&&qe("scrollend",s),c.onClick!=null&&(s.onclick=ei),s=!0):s=!1,s||Vr(r,!0)}function Ty(r){for($t=r.return;$t;)switch($t.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:$t=$t.return}}function Fo(r){if(r!==$t)return!1;if(!je)return Ty(r),je=!0,!1;var s=r.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=r.type,a=!(a!=="form"&&a!=="button")||Em(r.type,r.memoizedProps)),a=!a),a&&dt&&Vr(r),Ty(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));dt=jv(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));dt=jv(r)}else s===27?(s=dt,$r(r.type)?(r=Cm,Cm=null,dt=r):dt=s):dt=$t?jn(r.stateNode.nextSibling):null;return!0}function Ys(){dt=$t=null,je=!1}function sh(){var r=Pr;return r!==null&&(yn===null?yn=r:yn.push.apply(yn,r),Pr=null),r}function Tl(r){Pr===null?Pr=[r]:Pr.push(r)}var oh=B(null),Js=null,Wi=null;function Lr(r,s,a){he(oh,s._currentValue),s._currentValue=a}function Xi(r){r._currentValue=oh.current,se(oh)}function ah(r,s,a){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===a)break;r=r.return}}function lh(r,s,a,c){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var _=v.dependencies;if(_!==null){var S=v.child;_=_.firstContext;e:for(;_!==null;){var C=_;_=v;for(var q=0;q<s.length;q++)if(C.context===s[q]){_.lanes|=a,C=_.alternate,C!==null&&(C.lanes|=a),ah(_.return,a,r),c||(S=null);break e}_=C.next}}else if(v.tag===18){if(S=v.return,S===null)throw Error(i(341));S.lanes|=a,_=S.alternate,_!==null&&(_.lanes|=a),ah(S,a,r),S=null}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===r){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}}function zo(r,s,a,c){r=null;for(var v=s,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var S=v.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var C=v.type;bn(v.pendingProps.value,S.value)||(r!==null?r.push(C):r=[C])}}else if(v===Ue.current){if(S=v.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(Jl):r=[Jl])}v=v.return}r!==null&&lh(s,r,a,c),s.flags|=262144}function yc(r){for(r=r.firstContext;r!==null;){if(!bn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ks(r){Js=r,Wi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Qt(r){return xy(Js,r)}function vc(r,s){return Js===null&&Ks(r),xy(r,s)}function xy(r,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Wi===null){if(r===null)throw Error(i(308));Wi=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Wi=Wi.next=s;return a}var WA=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(a,c){r.push(c)}};this.abort=function(){s.aborted=!0,r.forEach(function(a){return a()})}},XA=n.unstable_scheduleCallback,ZA=n.unstable_NormalPriority,kt={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uh(){return{controller:new WA,data:new Map,refCount:0}}function xl(r){r.refCount--,r.refCount===0&&XA(ZA,function(){r.controller.abort()})}var El=null,ch=0,Go=0,Ho=null;function ew(r,s){if(El===null){var a=El=[];ch=0,Go=hm(),Ho={status:"pending",value:void 0,then:function(c){a.push(c)}}}return ch++,s.then(Ey,Ey),s}function Ey(){if(--ch===0&&El!==null){Ho!==null&&(Ho.status="fulfilled");var r=El;El=null,Go=0,Ho=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function tw(r,s){var a=[],c={status:"pending",value:null,reason:null,then:function(v){a.push(v)}};return r.then(function(){c.status="fulfilled",c.value=s;for(var v=0;v<a.length;v++)(0,a[v])(s)},function(v){for(c.status="rejected",c.reason=v,v=0;v<a.length;v++)(0,a[v])(void 0)}),c}var by=Q.S;Q.S=function(r,s){ov=un(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&ew(r,s),by!==null&&by(r,s)};var $s=B(null);function dh(){var r=$s.current;return r!==null?r:at.pooledCache}function _c(r,s){s===null?he($s,$s.current):he($s,s.pool)}function Sy(){var r=dh();return r===null?null:{parent:kt._currentValue,pool:r}}var jo=Error(i(460)),fh=Error(i(474)),Tc=Error(i(542)),xc={then:function(){}};function Ay(r){return r=r.status,r==="fulfilled"||r==="rejected"}function wy(r,s,a){switch(a=r[a],a===void 0?r.push(s):a!==s&&(s.then(ei,ei),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Iy(r),r;default:if(typeof s.status=="string")s.then(ei,ei);else{if(r=at,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(c){if(s.status==="pending"){var v=s;v.status="fulfilled",v.value=c}},function(c){if(s.status==="pending"){var v=s;v.status="rejected",v.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Iy(r),r}throw Ws=s,jo}}function Qs(r){try{var s=r._init;return s(r._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ws=a,jo):a}}var Ws=null;function Cy(){if(Ws===null)throw Error(i(459));var r=Ws;return Ws=null,r}function Iy(r){if(r===jo||r===Tc)throw Error(i(483))}var Yo=null,bl=0;function Ec(r){var s=bl;return bl+=1,Yo===null&&(Yo=[]),wy(Yo,r,s)}function Sl(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function bc(r,s){throw s.$$typeof===b?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Ny(r){function s(H,F){if(r){var J=H.deletions;J===null?(H.deletions=[F],H.flags|=16):J.push(F)}}function a(H,F){if(!r)return null;for(;F!==null;)s(H,F),F=F.sibling;return null}function c(H){for(var F=new Map;H!==null;)H.key!==null?F.set(H.key,H):F.set(H.index,H),H=H.sibling;return F}function v(H,F){return H=$i(H,F),H.index=0,H.sibling=null,H}function _(H,F,J){return H.index=J,r?(J=H.alternate,J!==null?(J=J.index,J<F?(H.flags|=67108866,F):J):(H.flags|=67108866,F)):(H.flags|=1048576,F)}function S(H){return r&&H.alternate===null&&(H.flags|=67108866),H}function C(H,F,J,re){return F===null||F.tag!==6?(F=eh(J,H.mode,re),F.return=H,F):(F=v(F,J),F.return=H,F)}function q(H,F,J,re){var Te=J.type;return Te===L?Z(H,F,J.props.children,re,J.key):F!==null&&(F.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===R&&Qs(Te)===F.type)?(F=v(F,J.props),Sl(F,J),F.return=H,F):(F=pc(J.type,J.key,J.props,null,H.mode,re),Sl(F,J),F.return=H,F)}function K(H,F,J,re){return F===null||F.tag!==4||F.stateNode.containerInfo!==J.containerInfo||F.stateNode.implementation!==J.implementation?(F=th(J,H.mode,re),F.return=H,F):(F=v(F,J.children||[]),F.return=H,F)}function Z(H,F,J,re,Te){return F===null||F.tag!==7?(F=js(J,H.mode,re,Te),F.return=H,F):(F=v(F,J),F.return=H,F)}function oe(H,F,J){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=eh(""+F,H.mode,J),F.return=H,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return J=pc(F.type,F.key,F.props,null,H.mode,J),Sl(J,F),J.return=H,J;case D:return F=th(F,H.mode,J),F.return=H,F;case R:return F=Qs(F),oe(H,F,J)}if(Ve(F)||U(F))return F=js(F,H.mode,J,null),F.return=H,F;if(typeof F.then=="function")return oe(H,Ec(F),J);if(F.$$typeof===j)return oe(H,vc(H,F),J);bc(H,F)}return null}function $(H,F,J,re){var Te=F!==null?F.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Te!==null?null:C(H,F,""+J,re);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case w:return J.key===Te?q(H,F,J,re):null;case D:return J.key===Te?K(H,F,J,re):null;case R:return J=Qs(J),$(H,F,J,re)}if(Ve(J)||U(J))return Te!==null?null:Z(H,F,J,re,null);if(typeof J.then=="function")return $(H,F,Ec(J),re);if(J.$$typeof===j)return $(H,F,vc(H,J),re);bc(H,J)}return null}function X(H,F,J,re,Te){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return H=H.get(J)||null,C(F,H,""+re,Te);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case w:return H=H.get(re.key===null?J:re.key)||null,q(F,H,re,Te);case D:return H=H.get(re.key===null?J:re.key)||null,K(F,H,re,Te);case R:return re=Qs(re),X(H,F,J,re,Te)}if(Ve(re)||U(re))return H=H.get(J)||null,Z(F,H,re,Te,null);if(typeof re.then=="function")return X(H,F,J,Ec(re),Te);if(re.$$typeof===j)return X(H,F,J,vc(F,re),Te);bc(F,re)}return null}function ye(H,F,J,re){for(var Te=null,Je=null,_e=F,Pe=F=0,Fe=null;_e!==null&&Pe<J.length;Pe++){_e.index>Pe?(Fe=_e,_e=null):Fe=_e.sibling;var Ke=$(H,_e,J[Pe],re);if(Ke===null){_e===null&&(_e=Fe);break}r&&_e&&Ke.alternate===null&&s(H,_e),F=_(Ke,F,Pe),Je===null?Te=Ke:Je.sibling=Ke,Je=Ke,_e=Fe}if(Pe===J.length)return a(H,_e),je&&Qi(H,Pe),Te;if(_e===null){for(;Pe<J.length;Pe++)_e=oe(H,J[Pe],re),_e!==null&&(F=_(_e,F,Pe),Je===null?Te=_e:Je.sibling=_e,Je=_e);return je&&Qi(H,Pe),Te}for(_e=c(_e);Pe<J.length;Pe++)Fe=X(_e,H,Pe,J[Pe],re),Fe!==null&&(r&&Fe.alternate!==null&&_e.delete(Fe.key===null?Pe:Fe.key),F=_(Fe,F,Pe),Je===null?Te=Fe:Je.sibling=Fe,Je=Fe);return r&&_e.forEach(function(es){return s(H,es)}),je&&Qi(H,Pe),Te}function be(H,F,J,re){if(J==null)throw Error(i(151));for(var Te=null,Je=null,_e=F,Pe=F=0,Fe=null,Ke=J.next();_e!==null&&!Ke.done;Pe++,Ke=J.next()){_e.index>Pe?(Fe=_e,_e=null):Fe=_e.sibling;var es=$(H,_e,Ke.value,re);if(es===null){_e===null&&(_e=Fe);break}r&&_e&&es.alternate===null&&s(H,_e),F=_(es,F,Pe),Je===null?Te=es:Je.sibling=es,Je=es,_e=Fe}if(Ke.done)return a(H,_e),je&&Qi(H,Pe),Te;if(_e===null){for(;!Ke.done;Pe++,Ke=J.next())Ke=oe(H,Ke.value,re),Ke!==null&&(F=_(Ke,F,Pe),Je===null?Te=Ke:Je.sibling=Ke,Je=Ke);return je&&Qi(H,Pe),Te}for(_e=c(_e);!Ke.done;Pe++,Ke=J.next())Ke=X(_e,H,Pe,Ke.value,re),Ke!==null&&(r&&Ke.alternate!==null&&_e.delete(Ke.key===null?Pe:Ke.key),F=_(Ke,F,Pe),Je===null?Te=Ke:Je.sibling=Ke,Je=Ke);return r&&_e.forEach(function(fC){return s(H,fC)}),je&&Qi(H,Pe),Te}function ot(H,F,J,re){if(typeof J=="object"&&J!==null&&J.type===L&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case w:e:{for(var Te=J.key;F!==null;){if(F.key===Te){if(Te=J.type,Te===L){if(F.tag===7){a(H,F.sibling),re=v(F,J.props.children),re.return=H,H=re;break e}}else if(F.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===R&&Qs(Te)===F.type){a(H,F.sibling),re=v(F,J.props),Sl(re,J),re.return=H,H=re;break e}a(H,F);break}else s(H,F);F=F.sibling}J.type===L?(re=js(J.props.children,H.mode,re,J.key),re.return=H,H=re):(re=pc(J.type,J.key,J.props,null,H.mode,re),Sl(re,J),re.return=H,H=re)}return S(H);case D:e:{for(Te=J.key;F!==null;){if(F.key===Te)if(F.tag===4&&F.stateNode.containerInfo===J.containerInfo&&F.stateNode.implementation===J.implementation){a(H,F.sibling),re=v(F,J.children||[]),re.return=H,H=re;break e}else{a(H,F);break}else s(H,F);F=F.sibling}re=th(J,H.mode,re),re.return=H,H=re}return S(H);case R:return J=Qs(J),ot(H,F,J,re)}if(Ve(J))return ye(H,F,J,re);if(U(J)){if(Te=U(J),typeof Te!="function")throw Error(i(150));return J=Te.call(J),be(H,F,J,re)}if(typeof J.then=="function")return ot(H,F,Ec(J),re);if(J.$$typeof===j)return ot(H,F,vc(H,J),re);bc(H,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,F!==null&&F.tag===6?(a(H,F.sibling),re=v(F,J),re.return=H,H=re):(a(H,F),re=eh(J,H.mode,re),re.return=H,H=re),S(H)):a(H,F)}return function(H,F,J,re){try{bl=0;var Te=ot(H,F,J,re);return Yo=null,Te}catch(_e){if(_e===jo||_e===Tc)throw _e;var Je=Sn(29,_e,null,H.mode);return Je.lanes=re,Je.return=H,Je}finally{}}}var Xs=Ny(!0),Ry=Ny(!1),Ur=!1;function hh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mh(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Or(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function qr(r,s,a){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(We&2)!==0){var v=c.pending;return v===null?s.next=s:(s.next=v.next,v.next=s),c.pending=s,s=mc(r),hy(r,null,a),s}return hc(r,c,s,a),mc(r)}function Al(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,Xa(r,a)}}function ph(r,s){var a=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var v=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?v=_=S:_=_.next=S,a=a.next}while(a!==null);_===null?v=_=s:_=_.next=s}else v=_=s;a={baseState:c.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}var gh=!1;function wl(){if(gh){var r=Ho;if(r!==null)throw r}}function Cl(r,s,a,c){gh=!1;var v=r.updateQueue;Ur=!1;var _=v.firstBaseUpdate,S=v.lastBaseUpdate,C=v.shared.pending;if(C!==null){v.shared.pending=null;var q=C,K=q.next;q.next=null,S===null?_=K:S.next=K,S=q;var Z=r.alternate;Z!==null&&(Z=Z.updateQueue,C=Z.lastBaseUpdate,C!==S&&(C===null?Z.firstBaseUpdate=K:C.next=K,Z.lastBaseUpdate=q))}if(_!==null){var oe=v.baseState;S=0,Z=K=q=null,C=_;do{var $=C.lane&-536870913,X=$!==C.lane;if(X?(Be&$)===$:(c&$)===$){$!==0&&$===Go&&(gh=!0),Z!==null&&(Z=Z.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var ye=r,be=C;$=s;var ot=a;switch(be.tag){case 1:if(ye=be.payload,typeof ye=="function"){oe=ye.call(ot,oe,$);break e}oe=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=be.payload,$=typeof ye=="function"?ye.call(ot,oe,$):ye,$==null)break e;oe=x({},oe,$);break e;case 2:Ur=!0}}$=C.callback,$!==null&&(r.flags|=64,X&&(r.flags|=8192),X=v.callbacks,X===null?v.callbacks=[$]:X.push($))}else X={lane:$,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Z===null?(K=Z=X,q=oe):Z=Z.next=X,S|=$;if(C=C.next,C===null){if(C=v.shared.pending,C===null)break;X=C,C=X.next,X.next=null,v.lastBaseUpdate=X,v.shared.pending=null}}while(!0);Z===null&&(q=oe),v.baseState=q,v.firstBaseUpdate=K,v.lastBaseUpdate=Z,_===null&&(v.shared.lanes=0),Hr|=S,r.lanes=S,r.memoizedState=oe}}function ky(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function My(r,s){var a=r.callbacks;if(a!==null)for(r.callbacks=null,r=0;r<a.length;r++)ky(a[r],s)}var Jo=B(null),Sc=B(0);function Dy(r,s){r=ar,he(Sc,r),he(Jo,s),ar=r|s.baseLanes}function yh(){he(Sc,ar),he(Jo,Jo.current)}function vh(){ar=Sc.current,se(Jo),se(Sc)}var An=B(null),Hn=null;function Br(r){var s=r.alternate;he(bt,bt.current&1),he(An,r),Hn===null&&(s===null||Jo.current!==null||s.memoizedState!==null)&&(Hn=r)}function _h(r){he(bt,bt.current),he(An,r),Hn===null&&(Hn=r)}function Py(r){r.tag===22?(he(bt,bt.current),he(An,r),Hn===null&&(Hn=r)):Fr()}function Fr(){he(bt,bt.current),he(An,An.current)}function wn(r){se(An),Hn===r&&(Hn=null),se(bt)}var bt=B(0);function Ac(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Am(a)||wm(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Zi=0,De=null,rt=null,Mt=null,wc=!1,Ko=!1,Zs=!1,Cc=0,Il=0,$o=null,nw=0;function yt(){throw Error(i(321))}function Th(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!bn(r[a],s[a]))return!1;return!0}function xh(r,s,a,c,v,_){return Zi=_,De=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Q.H=r===null||r.memoizedState===null?y0:Lh,Zs=!1,_=a(c,v),Zs=!1,Ko&&(_=Ly(s,a,c,v)),Vy(r),_}function Vy(r){Q.H=kl;var s=rt!==null&&rt.next!==null;if(Zi=0,Mt=rt=De=null,wc=!1,Il=0,$o=null,s)throw Error(i(300));r===null||Dt||(r=r.dependencies,r!==null&&yc(r)&&(Dt=!0))}function Ly(r,s,a,c){De=r;var v=0;do{if(Ko&&($o=null),Il=0,Ko=!1,25<=v)throw Error(i(301));if(v+=1,Mt=rt=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}Q.H=v0,_=s(a,c)}while(Ko);return _}function iw(){var r=Q.H,s=r.useState()[0];return s=typeof s.then=="function"?Nl(s):s,r=r.useState()[0],(rt!==null?rt.memoizedState:null)!==r&&(De.flags|=1024),s}function Eh(){var r=Cc!==0;return Cc=0,r}function bh(r,s,a){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~a}function Sh(r){if(wc){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}wc=!1}Zi=0,Mt=rt=De=null,Ko=!1,Il=Cc=0,$o=null}function dn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?De.memoizedState=Mt=r:Mt=Mt.next=r,Mt}function St(){if(rt===null){var r=De.alternate;r=r!==null?r.memoizedState:null}else r=rt.next;var s=Mt===null?De.memoizedState:Mt.next;if(s!==null)Mt=s,rt=r;else{if(r===null)throw De.alternate===null?Error(i(467)):Error(i(310));rt=r,r={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},Mt===null?De.memoizedState=Mt=r:Mt=Mt.next=r}return Mt}function Ic(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nl(r){var s=Il;return Il+=1,$o===null&&($o=[]),r=wy($o,r,s),s=De,(Mt===null?s.memoizedState:Mt.next)===null&&(s=s.alternate,Q.H=s===null||s.memoizedState===null?y0:Lh),r}function Nc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Nl(r);if(r.$$typeof===j)return Qt(r)}throw Error(i(438,String(r)))}function Ah(r){var s=null,a=De.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var c=De.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(v){return v.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Ic(),De.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(r),c=0;c<r;c++)a[c]=P;return s.index++,a}function er(r,s){return typeof s=="function"?s(r):s}function Rc(r){var s=St();return wh(s,rt,r)}function wh(r,s,a){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=a;var v=r.baseQueue,_=c.pending;if(_!==null){if(v!==null){var S=v.next;v.next=_.next,_.next=S}s.baseQueue=v=_,c.pending=null}if(_=r.baseState,v===null)r.memoizedState=_;else{s=v.next;var C=S=null,q=null,K=s,Z=!1;do{var oe=K.lane&-536870913;if(oe!==K.lane?(Be&oe)===oe:(Zi&oe)===oe){var $=K.revertLane;if($===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),oe===Go&&(Z=!0);else if((Zi&$)===$){K=K.next,$===Go&&(Z=!0);continue}else oe={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},q===null?(C=q=oe,S=_):q=q.next=oe,De.lanes|=$,Hr|=$;oe=K.action,Zs&&a(_,oe),_=K.hasEagerState?K.eagerState:a(_,oe)}else $={lane:oe,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},q===null?(C=q=$,S=_):q=q.next=$,De.lanes|=oe,Hr|=oe;K=K.next}while(K!==null&&K!==s);if(q===null?S=_:q.next=C,!bn(_,r.memoizedState)&&(Dt=!0,Z&&(a=Ho,a!==null)))throw a;r.memoizedState=_,r.baseState=S,r.baseQueue=q,c.lastRenderedState=_}return v===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function Ch(r){var s=St(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=r;var c=a.dispatch,v=a.pending,_=s.memoizedState;if(v!==null){a.pending=null;var S=v=v.next;do _=r(_,S.action),S=S.next;while(S!==v);bn(_,s.memoizedState)||(Dt=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),a.lastRenderedState=_}return[_,c]}function Uy(r,s,a){var c=De,v=St(),_=je;if(_){if(a===void 0)throw Error(i(407));a=a()}else a=s();var S=!bn((rt||v).memoizedState,a);if(S&&(v.memoizedState=a,Dt=!0),v=v.queue,Rh(By.bind(null,c,v,r),[r]),v.getSnapshot!==s||S||Mt!==null&&Mt.memoizedState.tag&1){if(c.flags|=2048,Qo(9,{destroy:void 0},qy.bind(null,c,v,a,s),null),at===null)throw Error(i(349));_||(Zi&127)!==0||Oy(c,s,a)}return a}function Oy(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=De.updateQueue,s===null?(s=Ic(),De.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function qy(r,s,a,c){s.value=a,s.getSnapshot=c,Fy(s)&&zy(r)}function By(r,s,a){return a(function(){Fy(s)&&zy(r)})}function Fy(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!bn(r,a)}catch{return!0}}function zy(r){var s=Hs(r,2);s!==null&&vn(s,r,2)}function Ih(r){var s=dn();if(typeof r=="function"){var a=r;if(r=a(),Zs){Pn(!0);try{a()}finally{Pn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:r},s}function Gy(r,s,a,c){return r.baseState=a,wh(r,rt,typeof c=="function"?c:er)}function rw(r,s,a,c,v){if(Dc(r))throw Error(i(485));if(r=s.action,r!==null){var _={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){_.listeners.push(S)}};Q.T!==null?a(!0):_.isTransition=!1,c(_),a=s.pending,a===null?(_.next=s.pending=_,Hy(s,_)):(_.next=a.next,s.pending=a.next=_)}}function Hy(r,s){var a=s.action,c=s.payload,v=r.state;if(s.isTransition){var _=Q.T,S={};Q.T=S;try{var C=a(v,c),q=Q.S;q!==null&&q(S,C),jy(r,s,C)}catch(K){Nh(r,s,K)}finally{_!==null&&S.types!==null&&(_.types=S.types),Q.T=_}}else try{_=a(v,c),jy(r,s,_)}catch(K){Nh(r,s,K)}}function jy(r,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Yy(r,s,c)},function(c){return Nh(r,s,c)}):Yy(r,s,a)}function Yy(r,s,a){s.status="fulfilled",s.value=a,Jy(s),r.state=a,s=r.pending,s!==null&&(a=s.next,a===s?r.pending=null:(a=a.next,s.next=a,Hy(r,a)))}function Nh(r,s,a){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=a,Jy(s),s=s.next;while(s!==c)}r.action=null}function Jy(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Ky(r,s){return s}function $y(r,s){if(je){var a=at.formState;if(a!==null){e:{var c=De;if(je){if(dt){t:{for(var v=dt,_=Gn;v.nodeType!==8;){if(!_){v=null;break t}if(v=jn(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){dt=jn(v.nextSibling),c=v.data==="F!";break e}}Vr(c)}c=!1}c&&(s=a[0])}}return a=dn(),a.memoizedState=a.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ky,lastRenderedState:s},a.queue=c,a=m0.bind(null,De,c),c.dispatch=a,c=Ih(!1),_=Vh.bind(null,De,!1,c.queue),c=dn(),v={state:s,dispatch:null,action:r,pending:null},c.queue=v,a=rw.bind(null,De,v,_,a),v.dispatch=a,c.memoizedState=r,[s,a,!1]}function Qy(r){var s=St();return Wy(s,rt,r)}function Wy(r,s,a){if(s=wh(r,s,Ky)[0],r=Rc(er)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Nl(s)}catch(S){throw S===jo?Tc:S}else c=s;s=St();var v=s.queue,_=v.dispatch;return a!==s.memoizedState&&(De.flags|=2048,Qo(9,{destroy:void 0},sw.bind(null,v,a),null)),[c,_,r]}function sw(r,s){r.action=s}function Xy(r){var s=St(),a=rt;if(a!==null)return Wy(s,a,r);St(),s=s.memoizedState,a=St();var c=a.queue.dispatch;return a.memoizedState=r,[s,c,!1]}function Qo(r,s,a,c){return r={tag:r,create:a,deps:c,inst:s,next:null},s=De.updateQueue,s===null&&(s=Ic(),De.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=r.next=r:(c=a.next,a.next=r,r.next=c,s.lastEffect=r),r}function Zy(){return St().memoizedState}function kc(r,s,a,c){var v=dn();De.flags|=r,v.memoizedState=Qo(1|s,{destroy:void 0},a,c===void 0?null:c)}function Mc(r,s,a,c){var v=St();c=c===void 0?null:c;var _=v.memoizedState.inst;rt!==null&&c!==null&&Th(c,rt.memoizedState.deps)?v.memoizedState=Qo(s,_,a,c):(De.flags|=r,v.memoizedState=Qo(1|s,_,a,c))}function e0(r,s){kc(8390656,8,r,s)}function Rh(r,s){Mc(2048,8,r,s)}function ow(r){De.flags|=4;var s=De.updateQueue;if(s===null)s=Ic(),De.updateQueue=s,s.events=[r];else{var a=s.events;a===null?s.events=[r]:a.push(r)}}function t0(r){var s=St().memoizedState;return ow({ref:s,nextImpl:r}),function(){if((We&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function n0(r,s){return Mc(4,2,r,s)}function i0(r,s){return Mc(4,4,r,s)}function r0(r,s){if(typeof s=="function"){r=r();var a=s(r);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function s0(r,s,a){a=a!=null?a.concat([r]):null,Mc(4,4,r0.bind(null,s,r),a)}function kh(){}function o0(r,s){var a=St();s=s===void 0?null:s;var c=a.memoizedState;return s!==null&&Th(s,c[1])?c[0]:(a.memoizedState=[r,s],r)}function a0(r,s){var a=St();s=s===void 0?null:s;var c=a.memoizedState;if(s!==null&&Th(s,c[1]))return c[0];if(c=r(),Zs){Pn(!0);try{r()}finally{Pn(!1)}}return a.memoizedState=[c,s],c}function Mh(r,s,a){return a===void 0||(Zi&1073741824)!==0&&(Be&261930)===0?r.memoizedState=s:(r.memoizedState=a,r=lv(),De.lanes|=r,Hr|=r,a)}function l0(r,s,a,c){return bn(a,s)?a:Jo.current!==null?(r=Mh(r,a,c),bn(r,s)||(Dt=!0),r):(Zi&42)===0||(Zi&1073741824)!==0&&(Be&261930)===0?(Dt=!0,r.memoizedState=a):(r=lv(),De.lanes|=r,Hr|=r,s)}function u0(r,s,a,c,v){var _=ue.p;ue.p=_!==0&&8>_?_:8;var S=Q.T,C={};Q.T=C,Vh(r,!1,s,a);try{var q=v(),K=Q.S;if(K!==null&&K(C,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var Z=tw(q,c);Rl(r,s,Z,Nn(r))}else Rl(r,s,c,Nn(r))}catch(oe){Rl(r,s,{then:function(){},status:"rejected",reason:oe},Nn())}finally{ue.p=_,S!==null&&C.types!==null&&(S.types=C.types),Q.T=S}}function aw(){}function Dh(r,s,a,c){if(r.tag!==5)throw Error(i(476));var v=c0(r).queue;u0(r,v,s,de,a===null?aw:function(){return d0(r),a(c)})}function c0(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:de},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:a},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function d0(r){var s=c0(r);s.next===null&&(s=r.alternate.memoizedState),Rl(r,s.next.queue,{},Nn())}function Ph(){return Qt(Jl)}function f0(){return St().memoizedState}function h0(){return St().memoizedState}function lw(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var a=Nn();r=Or(a);var c=qr(s,r,a);c!==null&&(vn(c,s,a),Al(c,s,a)),s={cache:uh()},r.payload=s;return}s=s.return}}function uw(r,s,a){var c=Nn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Dc(r)?p0(s,a):(a=Xf(r,s,a,c),a!==null&&(vn(a,r,c),g0(a,s,c)))}function m0(r,s,a){var c=Nn();Rl(r,s,a,c)}function Rl(r,s,a,c){var v={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Dc(r))p0(s,v);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var S=s.lastRenderedState,C=_(S,a);if(v.hasEagerState=!0,v.eagerState=C,bn(C,S))return hc(r,s,v,0),at===null&&fc(),!1}catch{}finally{}if(a=Xf(r,s,v,c),a!==null)return vn(a,r,c),g0(a,s,c),!0}return!1}function Vh(r,s,a,c){if(c={lane:2,revertLane:hm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Dc(r)){if(s)throw Error(i(479))}else s=Xf(r,a,c,2),s!==null&&vn(s,r,2)}function Dc(r){var s=r.alternate;return r===De||s!==null&&s===De}function p0(r,s){Ko=wc=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function g0(r,s,a){if((a&4194048)!==0){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,Xa(r,a)}}var kl={readContext:Qt,use:Nc,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};kl.useEffectEvent=yt;var y0={readContext:Qt,use:Nc,useCallback:function(r,s){return dn().memoizedState=[r,s===void 0?null:s],r},useContext:Qt,useEffect:e0,useImperativeHandle:function(r,s,a){a=a!=null?a.concat([r]):null,kc(4194308,4,r0.bind(null,s,r),a)},useLayoutEffect:function(r,s){return kc(4194308,4,r,s)},useInsertionEffect:function(r,s){kc(4,2,r,s)},useMemo:function(r,s){var a=dn();s=s===void 0?null:s;var c=r();if(Zs){Pn(!0);try{r()}finally{Pn(!1)}}return a.memoizedState=[c,s],c},useReducer:function(r,s,a){var c=dn();if(a!==void 0){var v=a(s);if(Zs){Pn(!0);try{a(s)}finally{Pn(!1)}}}else v=s;return c.memoizedState=c.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},c.queue=r,r=r.dispatch=uw.bind(null,De,r),[c.memoizedState,r]},useRef:function(r){var s=dn();return r={current:r},s.memoizedState=r},useState:function(r){r=Ih(r);var s=r.queue,a=m0.bind(null,De,s);return s.dispatch=a,[r.memoizedState,a]},useDebugValue:kh,useDeferredValue:function(r,s){var a=dn();return Mh(a,r,s)},useTransition:function(){var r=Ih(!1);return r=u0.bind(null,De,r.queue,!0,!1),dn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,a){var c=De,v=dn();if(je){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),at===null)throw Error(i(349));(Be&127)!==0||Oy(c,s,a)}v.memoizedState=a;var _={value:a,getSnapshot:s};return v.queue=_,e0(By.bind(null,c,_,r),[r]),c.flags|=2048,Qo(9,{destroy:void 0},qy.bind(null,c,_,a,s),null),a},useId:function(){var r=dn(),s=at.identifierPrefix;if(je){var a=Di,c=Mi;a=(c&~(1<<32-xt(c)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Cc++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=nw++,s="_"+s+"r_"+a.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:Ph,useFormState:$y,useActionState:$y,useOptimistic:function(r){var s=dn();s.memoizedState=s.baseState=r;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Vh.bind(null,De,!0,a),a.dispatch=s,[r,s]},useMemoCache:Ah,useCacheRefresh:function(){return dn().memoizedState=lw.bind(null,De)},useEffectEvent:function(r){var s=dn(),a={impl:r};return s.memoizedState=a,function(){if((We&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Lh={readContext:Qt,use:Nc,useCallback:o0,useContext:Qt,useEffect:Rh,useImperativeHandle:s0,useInsertionEffect:n0,useLayoutEffect:i0,useMemo:a0,useReducer:Rc,useRef:Zy,useState:function(){return Rc(er)},useDebugValue:kh,useDeferredValue:function(r,s){var a=St();return l0(a,rt.memoizedState,r,s)},useTransition:function(){var r=Rc(er)[0],s=St().memoizedState;return[typeof r=="boolean"?r:Nl(r),s]},useSyncExternalStore:Uy,useId:f0,useHostTransitionStatus:Ph,useFormState:Qy,useActionState:Qy,useOptimistic:function(r,s){var a=St();return Gy(a,rt,r,s)},useMemoCache:Ah,useCacheRefresh:h0};Lh.useEffectEvent=t0;var v0={readContext:Qt,use:Nc,useCallback:o0,useContext:Qt,useEffect:Rh,useImperativeHandle:s0,useInsertionEffect:n0,useLayoutEffect:i0,useMemo:a0,useReducer:Ch,useRef:Zy,useState:function(){return Ch(er)},useDebugValue:kh,useDeferredValue:function(r,s){var a=St();return rt===null?Mh(a,r,s):l0(a,rt.memoizedState,r,s)},useTransition:function(){var r=Ch(er)[0],s=St().memoizedState;return[typeof r=="boolean"?r:Nl(r),s]},useSyncExternalStore:Uy,useId:f0,useHostTransitionStatus:Ph,useFormState:Xy,useActionState:Xy,useOptimistic:function(r,s){var a=St();return rt!==null?Gy(a,rt,r,s):(a.baseState=r,[r,a.queue.dispatch])},useMemoCache:Ah,useCacheRefresh:h0};v0.useEffectEvent=t0;function Uh(r,s,a,c){s=r.memoizedState,a=a(c,s),a=a==null?s:x({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Oh={enqueueSetState:function(r,s,a){r=r._reactInternals;var c=Nn(),v=Or(c);v.payload=s,a!=null&&(v.callback=a),s=qr(r,v,c),s!==null&&(vn(s,r,c),Al(s,r,c))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var c=Nn(),v=Or(c);v.tag=1,v.payload=s,a!=null&&(v.callback=a),s=qr(r,v,c),s!==null&&(vn(s,r,c),Al(s,r,c))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=Nn(),c=Or(a);c.tag=2,s!=null&&(c.callback=s),s=qr(r,c,a),s!==null&&(vn(s,r,a),Al(s,r,a))}};function _0(r,s,a,c,v,_,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,_,S):s.prototype&&s.prototype.isPureReactComponent?!yl(a,c)||!yl(v,_):!0}function T0(r,s,a,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==r&&Oh.enqueueReplaceState(s,s.state,null)}function eo(r,s){var a=s;if("ref"in s){a={};for(var c in s)c!=="ref"&&(a[c]=s[c])}if(r=r.defaultProps){a===s&&(a=x({},a));for(var v in r)a[v]===void 0&&(a[v]=r[v])}return a}function x0(r){dc(r)}function E0(r){console.error(r)}function b0(r){dc(r)}function Pc(r,s){try{var a=r.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function S0(r,s,a){try{var c=r.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function qh(r,s,a){return a=Or(a),a.tag=3,a.payload={element:null},a.callback=function(){Pc(r,s)},a}function A0(r){return r=Or(r),r.tag=3,r}function w0(r,s,a,c){var v=a.type.getDerivedStateFromError;if(typeof v=="function"){var _=c.value;r.payload=function(){return v(_)},r.callback=function(){S0(s,a,c)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(r.callback=function(){S0(s,a,c),typeof v!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})})}function cw(r,s,a,c,v){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=a.alternate,s!==null&&zo(s,a,v,!0),a=An.current,a!==null){switch(a.tag){case 31:case 13:return Hn===null?Yc():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=v,c===xc?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([c]):s.add(c),cm(r,c,v)),!1;case 22:return a.flags|=65536,c===xc?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([c]):a.add(c)),cm(r,c,v)),!1}throw Error(i(435,a.tag))}return cm(r,c,v),Yc(),!1}if(je)return s=An.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=v,c!==rh&&(r=Error(i(422),{cause:c}),Tl(Bn(r,a)))):(c!==rh&&(s=Error(i(423),{cause:c}),Tl(Bn(s,a))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,c=Bn(c,a),v=qh(r.stateNode,c,v),ph(r,v),vt!==4&&(vt=2)),!1;var _=Error(i(520),{cause:c});if(_=Bn(_,a),ql===null?ql=[_]:ql.push(_),vt!==4&&(vt=2),s===null)return!0;c=Bn(c,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,r=v&-v,a.lanes|=r,r=qh(a.stateNode,c,r),ph(a,r),!1;case 1:if(s=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(jr===null||!jr.has(_))))return a.flags|=65536,v&=-v,a.lanes|=v,v=A0(v),w0(v,r,a,c),ph(a,v),!1}a=a.return}while(a!==null);return!1}var Bh=Error(i(461)),Dt=!1;function Wt(r,s,a,c){s.child=r===null?Ry(s,null,a,c):Xs(s,r.child,a,c)}function C0(r,s,a,c,v){a=a.render;var _=s.ref;if("ref"in c){var S={};for(var C in c)C!=="ref"&&(S[C]=c[C])}else S=c;return Ks(s),c=xh(r,s,a,S,_,v),C=Eh(),r!==null&&!Dt?(bh(r,s,v),tr(r,s,v)):(je&&C&&nh(s),s.flags|=1,Wt(r,s,c,v),s.child)}function I0(r,s,a,c,v){if(r===null){var _=a.type;return typeof _=="function"&&!Zf(_)&&_.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=_,N0(r,s,_,c,v)):(r=pc(a.type,null,c,s,s.mode,v),r.ref=s.ref,r.return=s,s.child=r)}if(_=r.child,!Kh(r,v)){var S=_.memoizedProps;if(a=a.compare,a=a!==null?a:yl,a(S,c)&&r.ref===s.ref)return tr(r,s,v)}return s.flags|=1,r=$i(_,c),r.ref=s.ref,r.return=s,s.child=r}function N0(r,s,a,c,v){if(r!==null){var _=r.memoizedProps;if(yl(_,c)&&r.ref===s.ref)if(Dt=!1,s.pendingProps=c=_,Kh(r,v))(r.flags&131072)!==0&&(Dt=!0);else return s.lanes=r.lanes,tr(r,s,v)}return Fh(r,s,a,c,v)}function R0(r,s,a,c){var v=c.children,_=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,r!==null){for(c=s.child=r.child,v=0;c!==null;)v=v|c.lanes|c.childLanes,c=c.sibling;c=v&~_}else c=0,s.child=null;return k0(r,s,_,a,c)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&_c(s,_!==null?_.cachePool:null),_!==null?Dy(s,_):yh(),Py(s);else return c=s.lanes=536870912,k0(r,s,_!==null?_.baseLanes|a:a,a,c)}else _!==null?(_c(s,_.cachePool),Dy(s,_),Fr(),s.memoizedState=null):(r!==null&&_c(s,null),yh(),Fr());return Wt(r,s,v,a),s.child}function Ml(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function k0(r,s,a,c,v){var _=dh();return _=_===null?null:{parent:kt._currentValue,pool:_},s.memoizedState={baseLanes:a,cachePool:_},r!==null&&_c(s,null),yh(),Py(s),r!==null&&zo(r,s,c,!0),s.childLanes=v,null}function Vc(r,s){return s=Uc({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function M0(r,s,a){return Xs(s,r.child,null,a),r=Vc(s,s.pendingProps),r.flags|=2,wn(s),s.memoizedState=null,r}function dw(r,s,a){var c=s.pendingProps,v=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(je){if(c.mode==="hidden")return r=Vc(s,c),s.lanes=536870912,Ml(null,r);if(_h(s),(r=dt)?(r=Hv(r,Gn),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Dr!==null?{id:Mi,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},a=py(r),a.return=s,s.child=a,$t=s,dt=null)):r=null,r===null)throw Vr(s);return s.lanes=536870912,null}return Vc(s,c)}var _=r.memoizedState;if(_!==null){var S=_.dehydrated;if(_h(s),v)if(s.flags&256)s.flags&=-257,s=M0(r,s,a);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(Dt||zo(r,s,a,!1),v=(a&r.childLanes)!==0,Dt||v){if(c=at,c!==null&&(S=Za(c,a),S!==0&&S!==_.retryLane))throw _.retryLane=S,Hs(r,S),vn(c,r,S),Bh;Yc(),s=M0(r,s,a)}else r=_.treeContext,dt=jn(S.nextSibling),$t=s,je=!0,Pr=null,Gn=!1,r!==null&&vy(s,r),s=Vc(s,c),s.flags|=4096;return s}return r=$i(r.child,{mode:c.mode,children:c.children}),r.ref=s.ref,s.child=r,r.return=s,r}function Lc(r,s){var a=s.ref;if(a===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(r===null||r.ref!==a)&&(s.flags|=4194816)}}function Fh(r,s,a,c,v){return Ks(s),a=xh(r,s,a,c,void 0,v),c=Eh(),r!==null&&!Dt?(bh(r,s,v),tr(r,s,v)):(je&&c&&nh(s),s.flags|=1,Wt(r,s,a,v),s.child)}function D0(r,s,a,c,v,_){return Ks(s),s.updateQueue=null,a=Ly(s,c,a,v),Vy(r),c=Eh(),r!==null&&!Dt?(bh(r,s,_),tr(r,s,_)):(je&&c&&nh(s),s.flags|=1,Wt(r,s,a,_),s.child)}function P0(r,s,a,c,v){if(Ks(s),s.stateNode===null){var _=Oo,S=a.contextType;typeof S=="object"&&S!==null&&(_=Qt(S)),_=new a(c,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Oh,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=c,_.state=s.memoizedState,_.refs={},hh(s),S=a.contextType,_.context=typeof S=="object"&&S!==null?Qt(S):Oo,_.state=s.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(Uh(s,a,S,c),_.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(S=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),S!==_.state&&Oh.enqueueReplaceState(_,_.state,null),Cl(s,c,_,v),wl(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(r===null){_=s.stateNode;var C=s.memoizedProps,q=eo(a,C);_.props=q;var K=_.context,Z=a.contextType;S=Oo,typeof Z=="object"&&Z!==null&&(S=Qt(Z));var oe=a.getDerivedStateFromProps;Z=typeof oe=="function"||typeof _.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,Z||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C||K!==S)&&T0(s,_,c,S),Ur=!1;var $=s.memoizedState;_.state=$,Cl(s,c,_,v),wl(),K=s.memoizedState,C||$!==K||Ur?(typeof oe=="function"&&(Uh(s,a,oe,c),K=s.memoizedState),(q=Ur||_0(s,a,q,c,$,K,S))?(Z||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=K),_.props=c,_.state=K,_.context=S,c=q):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{_=s.stateNode,mh(r,s),S=s.memoizedProps,Z=eo(a,S),_.props=Z,oe=s.pendingProps,$=_.context,K=a.contextType,q=Oo,typeof K=="object"&&K!==null&&(q=Qt(K)),C=a.getDerivedStateFromProps,(K=typeof C=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==oe||$!==q)&&T0(s,_,c,q),Ur=!1,$=s.memoizedState,_.state=$,Cl(s,c,_,v),wl();var X=s.memoizedState;S!==oe||$!==X||Ur||r!==null&&r.dependencies!==null&&yc(r.dependencies)?(typeof C=="function"&&(Uh(s,a,C,c),X=s.memoizedState),(Z=Ur||_0(s,a,Z,c,$,X,q)||r!==null&&r.dependencies!==null&&yc(r.dependencies))?(K||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,X,q),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,X,q)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===r.memoizedProps&&$===r.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&$===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=X),_.props=c,_.state=X,_.context=q,c=Z):(typeof _.componentDidUpdate!="function"||S===r.memoizedProps&&$===r.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&$===r.memoizedState||(s.flags|=1024),c=!1)}return _=c,Lc(r,s),c=(s.flags&128)!==0,_||c?(_=s.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,r!==null&&c?(s.child=Xs(s,r.child,null,v),s.child=Xs(s,null,a,v)):Wt(r,s,a,v),s.memoizedState=_.state,r=s.child):r=tr(r,s,v),r}function V0(r,s,a,c){return Ys(),s.flags|=256,Wt(r,s,a,c),s.child}var zh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gh(r){return{baseLanes:r,cachePool:Sy()}}function Hh(r,s,a){return r=r!==null?r.childLanes&~a:0,s&&(r|=In),r}function L0(r,s,a){var c=s.pendingProps,v=!1,_=(s.flags&128)!==0,S;if((S=_)||(S=r!==null&&r.memoizedState===null?!1:(bt.current&2)!==0),S&&(v=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,r===null){if(je){if(v?Br(s):Fr(),(r=dt)?(r=Hv(r,Gn),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Dr!==null?{id:Mi,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},a=py(r),a.return=s,s.child=a,$t=s,dt=null)):r=null,r===null)throw Vr(s);return wm(r)?s.lanes=32:s.lanes=536870912,null}var C=c.children;return c=c.fallback,v?(Fr(),v=s.mode,C=Uc({mode:"hidden",children:C},v),c=js(c,v,a,null),C.return=s,c.return=s,C.sibling=c,s.child=C,c=s.child,c.memoizedState=Gh(a),c.childLanes=Hh(r,S,a),s.memoizedState=zh,Ml(null,c)):(Br(s),jh(s,C))}var q=r.memoizedState;if(q!==null&&(C=q.dehydrated,C!==null)){if(_)s.flags&256?(Br(s),s.flags&=-257,s=Yh(r,s,a)):s.memoizedState!==null?(Fr(),s.child=r.child,s.flags|=128,s=null):(Fr(),C=c.fallback,v=s.mode,c=Uc({mode:"visible",children:c.children},v),C=js(C,v,a,null),C.flags|=2,c.return=s,C.return=s,c.sibling=C,s.child=c,Xs(s,r.child,null,a),c=s.child,c.memoizedState=Gh(a),c.childLanes=Hh(r,S,a),s.memoizedState=zh,s=Ml(null,c));else if(Br(s),wm(C)){if(S=C.nextSibling&&C.nextSibling.dataset,S)var K=S.dgst;S=K,c=Error(i(419)),c.stack="",c.digest=S,Tl({value:c,source:null,stack:null}),s=Yh(r,s,a)}else if(Dt||zo(r,s,a,!1),S=(a&r.childLanes)!==0,Dt||S){if(S=at,S!==null&&(c=Za(S,a),c!==0&&c!==q.retryLane))throw q.retryLane=c,Hs(r,c),vn(S,r,c),Bh;Am(C)||Yc(),s=Yh(r,s,a)}else Am(C)?(s.flags|=192,s.child=r.child,s=null):(r=q.treeContext,dt=jn(C.nextSibling),$t=s,je=!0,Pr=null,Gn=!1,r!==null&&vy(s,r),s=jh(s,c.children),s.flags|=4096);return s}return v?(Fr(),C=c.fallback,v=s.mode,q=r.child,K=q.sibling,c=$i(q,{mode:"hidden",children:c.children}),c.subtreeFlags=q.subtreeFlags&65011712,K!==null?C=$i(K,C):(C=js(C,v,a,null),C.flags|=2),C.return=s,c.return=s,c.sibling=C,s.child=c,Ml(null,c),c=s.child,C=r.child.memoizedState,C===null?C=Gh(a):(v=C.cachePool,v!==null?(q=kt._currentValue,v=v.parent!==q?{parent:q,pool:q}:v):v=Sy(),C={baseLanes:C.baseLanes|a,cachePool:v}),c.memoizedState=C,c.childLanes=Hh(r,S,a),s.memoizedState=zh,Ml(r.child,c)):(Br(s),a=r.child,r=a.sibling,a=$i(a,{mode:"visible",children:c.children}),a.return=s,a.sibling=null,r!==null&&(S=s.deletions,S===null?(s.deletions=[r],s.flags|=16):S.push(r)),s.child=a,s.memoizedState=null,a)}function jh(r,s){return s=Uc({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Uc(r,s){return r=Sn(22,r,null,s),r.lanes=0,r}function Yh(r,s,a){return Xs(s,r.child,null,a),r=jh(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function U0(r,s,a){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),ah(r.return,s,a)}function Jh(r,s,a,c,v,_){var S=r.memoizedState;S===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:v,treeForkCount:_}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=c,S.tail=a,S.tailMode=v,S.treeForkCount=_)}function O0(r,s,a){var c=s.pendingProps,v=c.revealOrder,_=c.tail;c=c.children;var S=bt.current,C=(S&2)!==0;if(C?(S=S&1|2,s.flags|=128):S&=1,he(bt,S),Wt(r,s,c,a),c=je?_l:0,!C&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&U0(r,a,s);else if(r.tag===19)U0(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(v){case"forwards":for(a=s.child,v=null;a!==null;)r=a.alternate,r!==null&&Ac(r)===null&&(v=a),a=a.sibling;a=v,a===null?(v=s.child,s.child=null):(v=a.sibling,a.sibling=null),Jh(s,!1,v,a,_,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,v=s.child,s.child=null;v!==null;){if(r=v.alternate,r!==null&&Ac(r)===null){s.child=v;break}r=v.sibling,v.sibling=a,a=v,v=r}Jh(s,!0,a,null,_,c);break;case"together":Jh(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function tr(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),Hr|=s.lanes,(a&s.childLanes)===0)if(r!==null){if(zo(r,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,a=$i(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=$i(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function Kh(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&yc(r)))}function fw(r,s,a){switch(s.tag){case 3:Tt(s,s.stateNode.containerInfo),Lr(s,kt,r.memoizedState.cache),Ys();break;case 27:case 5:Ze(s);break;case 4:Tt(s,s.stateNode.containerInfo);break;case 10:Lr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,_h(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Br(s),s.flags|=128,null):(a&s.child.childLanes)!==0?L0(r,s,a):(Br(s),r=tr(r,s,a),r!==null?r.sibling:null);Br(s);break;case 19:var v=(r.flags&128)!==0;if(c=(a&s.childLanes)!==0,c||(zo(r,s,a,!1),c=(a&s.childLanes)!==0),v){if(c)return O0(r,s,a);s.flags|=128}if(v=s.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),he(bt,bt.current),c)break;return null;case 22:return s.lanes=0,R0(r,s,a,s.pendingProps);case 24:Lr(s,kt,r.memoizedState.cache)}return tr(r,s,a)}function q0(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps)Dt=!0;else{if(!Kh(r,a)&&(s.flags&128)===0)return Dt=!1,fw(r,s,a);Dt=(r.flags&131072)!==0}else Dt=!1,je&&(s.flags&1048576)!==0&&yy(s,_l,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(r=Qs(s.elementType),s.type=r,typeof r=="function")Zf(r)?(c=eo(r,c),s.tag=1,s=P0(null,s,r,c,a)):(s.tag=0,s=Fh(null,s,r,c,a));else{if(r!=null){var v=r.$$typeof;if(v===ee){s.tag=11,s=C0(null,s,r,c,a);break e}else if(v===N){s.tag=14,s=I0(null,s,r,c,a);break e}}throw s=ce(r)||r,Error(i(306,s,""))}}return s;case 0:return Fh(r,s,s.type,s.pendingProps,a);case 1:return c=s.type,v=eo(c,s.pendingProps),P0(r,s,c,v,a);case 3:e:{if(Tt(s,s.stateNode.containerInfo),r===null)throw Error(i(387));c=s.pendingProps;var _=s.memoizedState;v=_.element,mh(r,s),Cl(s,c,null,a);var S=s.memoizedState;if(c=S.cache,Lr(s,kt,c),c!==_.cache&&lh(s,[kt],a,!0),wl(),c=S.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=V0(r,s,c,a);break e}else if(c!==v){v=Bn(Error(i(424)),s),Tl(v),s=V0(r,s,c,a);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(dt=jn(r.firstChild),$t=s,je=!0,Pr=null,Gn=!0,a=Ry(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ys(),c===v){s=tr(r,s,a);break e}Wt(r,s,c,a)}s=s.child}return s;case 26:return Lc(r,s),r===null?(a=Qv(s.type,null,s.pendingProps,null))?s.memoizedState=a:je||(a=s.type,r=s.pendingProps,c=Zc(ke.current).createElement(a),c[It]=s,c[Gt]=r,Xt(c,a,r),Nt(c),s.stateNode=c):s.memoizedState=Qv(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Ze(s),r===null&&je&&(c=s.stateNode=Jv(s.type,s.pendingProps,ke.current),$t=s,Gn=!0,v=dt,$r(s.type)?(Cm=v,dt=jn(c.firstChild)):dt=v),Wt(r,s,s.pendingProps.children,a),Lc(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&je&&((v=c=dt)&&(c=zw(c,s.type,s.pendingProps,Gn),c!==null?(s.stateNode=c,$t=s,dt=jn(c.firstChild),Gn=!1,v=!0):v=!1),v||Vr(s)),Ze(s),v=s.type,_=s.pendingProps,S=r!==null?r.memoizedProps:null,c=_.children,Em(v,_)?c=null:S!==null&&Em(v,S)&&(s.flags|=32),s.memoizedState!==null&&(v=xh(r,s,iw,null,null,a),Jl._currentValue=v),Lc(r,s),Wt(r,s,c,a),s.child;case 6:return r===null&&je&&((r=a=dt)&&(a=Gw(a,s.pendingProps,Gn),a!==null?(s.stateNode=a,$t=s,dt=null,r=!0):r=!1),r||Vr(s)),null;case 13:return L0(r,s,a);case 4:return Tt(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=Xs(s,null,c,a):Wt(r,s,c,a),s.child;case 11:return C0(r,s,s.type,s.pendingProps,a);case 7:return Wt(r,s,s.pendingProps,a),s.child;case 8:return Wt(r,s,s.pendingProps.children,a),s.child;case 12:return Wt(r,s,s.pendingProps.children,a),s.child;case 10:return c=s.pendingProps,Lr(s,s.type,c.value),Wt(r,s,c.children,a),s.child;case 9:return v=s.type._context,c=s.pendingProps.children,Ks(s),v=Qt(v),c=c(v),s.flags|=1,Wt(r,s,c,a),s.child;case 14:return I0(r,s,s.type,s.pendingProps,a);case 15:return N0(r,s,s.type,s.pendingProps,a);case 19:return O0(r,s,a);case 31:return dw(r,s,a);case 22:return R0(r,s,a,s.pendingProps);case 24:return Ks(s),c=Qt(kt),r===null?(v=dh(),v===null&&(v=at,_=uh(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=a),v=_),s.memoizedState={parent:c,cache:v},hh(s),Lr(s,kt,v)):((r.lanes&a)!==0&&(mh(r,s),Cl(s,null,null,a),wl()),v=r.memoizedState,_=s.memoizedState,v.parent!==c?(v={parent:c,cache:c},s.memoizedState=v,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=v),Lr(s,kt,c)):(c=_.cache,Lr(s,kt,c),c!==v.cache&&lh(s,[kt],a,!0))),Wt(r,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function nr(r){r.flags|=4}function $h(r,s,a,c,v){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(v&335544128)===v)if(r.stateNode.complete)r.flags|=8192;else if(fv())r.flags|=8192;else throw Ws=xc,fh}else r.flags&=-16777217}function B0(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!t_(s))if(fv())r.flags|=8192;else throw Ws=xc,fh}function Oc(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Hu():536870912,r.lanes|=s,ea|=s)}function Dl(r,s){if(!je)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function ft(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,c=0;if(s)for(var v=r.child;v!==null;)a|=v.lanes|v.childLanes,c|=v.subtreeFlags&65011712,c|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)a|=v.lanes|v.childLanes,c|=v.subtreeFlags,c|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=c,r.childLanes=a,s}function hw(r,s,a){var c=s.pendingProps;switch(ih(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(s),null;case 1:return ft(s),null;case 3:return a=s.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Xi(kt),Ee(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(r===null||r.child===null)&&(Fo(s)?nr(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,sh())),ft(s),null;case 26:var v=s.type,_=s.memoizedState;return r===null?(nr(s),_!==null?(ft(s),B0(s,_)):(ft(s),$h(s,v,null,c,a))):_?_!==r.memoizedState?(nr(s),ft(s),B0(s,_)):(ft(s),s.flags&=-16777217):(r=r.memoizedProps,r!==c&&nr(s),ft(s),$h(s,v,r,c,a)),null;case 27:if(ct(s),a=ke.current,v=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&nr(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return ft(s),null}r=pe.current,Fo(s)?_y(s):(r=Jv(v,c,a),s.stateNode=r,nr(s))}return ft(s),null;case 5:if(ct(s),v=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&nr(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return ft(s),null}if(_=pe.current,Fo(s))_y(s);else{var S=Zc(ke.current);switch(_){case 1:_=S.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:_=S.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":_=S.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":_=S.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":_=S.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?S.createElement("select",{is:c.is}):S.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?S.createElement(v,{is:c.is}):S.createElement(v)}}_[It]=s,_[Gt]=c;e:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)_.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break e;for(;S.sibling===null;){if(S.return===null||S.return===s)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=_;e:switch(Xt(_,v,c),v){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&nr(s)}}return ft(s),$h(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,a),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==c&&nr(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(r=ke.current,Fo(s)){if(r=s.stateNode,a=s.memoizedProps,c=null,v=$t,v!==null)switch(v.tag){case 27:case 5:c=v.memoizedProps}r[It]=s,r=!!(r.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||Lv(r.nodeValue,a)),r||Vr(s,!0)}else r=Zc(r).createTextNode(c),r[It]=s,s.stateNode=r}return ft(s),null;case 31:if(a=s.memoizedState,r===null||r.memoizedState!==null){if(c=Fo(s),a!==null){if(r===null){if(!c)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[It]=s}else Ys(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ft(s),r=!1}else a=sh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=a),r=!0;if(!r)return s.flags&256?(wn(s),s):(wn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return ft(s),null;case 13:if(c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=Fo(s),c!==null&&c.dehydrated!==null){if(r===null){if(!v)throw Error(i(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[It]=s}else Ys(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ft(s),v=!1}else v=sh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return s.flags&256?(wn(s),s):(wn(s),null)}return wn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=c!==null,r=r!==null&&r.memoizedState!==null,a&&(c=s.child,v=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(v=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==v&&(c.flags|=2048)),a!==r&&a&&(s.child.flags|=8192),Oc(s,s.updateQueue),ft(s),null);case 4:return Ee(),r===null&&ym(s.stateNode.containerInfo),ft(s),null;case 10:return Xi(s.type),ft(s),null;case 19:if(se(bt),c=s.memoizedState,c===null)return ft(s),null;if(v=(s.flags&128)!==0,_=c.rendering,_===null)if(v)Dl(c,!1);else{if(vt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(_=Ac(r),_!==null){for(s.flags|=128,Dl(c,!1),r=_.updateQueue,s.updateQueue=r,Oc(s,r),s.subtreeFlags=0,r=a,a=s.child;a!==null;)my(a,r),a=a.sibling;return he(bt,bt.current&1|2),je&&Qi(s,c.treeForkCount),s.child}r=r.sibling}c.tail!==null&&un()>Gc&&(s.flags|=128,v=!0,Dl(c,!1),s.lanes=4194304)}else{if(!v)if(r=Ac(_),r!==null){if(s.flags|=128,v=!0,r=r.updateQueue,s.updateQueue=r,Oc(s,r),Dl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!je)return ft(s),null}else 2*un()-c.renderingStartTime>Gc&&a!==536870912&&(s.flags|=128,v=!0,Dl(c,!1),s.lanes=4194304);c.isBackwards?(_.sibling=s.child,s.child=_):(r=c.last,r!==null?r.sibling=_:s.child=_,c.last=_)}return c.tail!==null?(r=c.tail,c.rendering=r,c.tail=r.sibling,c.renderingStartTime=un(),r.sibling=null,a=bt.current,he(bt,v?a&1|2:a&1),je&&Qi(s,c.treeForkCount),r):(ft(s),null);case 22:case 23:return wn(s),vh(),c=s.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(a&536870912)!==0&&(s.flags&128)===0&&(ft(s),s.subtreeFlags&6&&(s.flags|=8192)):ft(s),a=s.updateQueue,a!==null&&Oc(s,a.retryQueue),a=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==a&&(s.flags|=2048),r!==null&&se($s),null;case 24:return a=null,r!==null&&(a=r.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Xi(kt),ft(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function mw(r,s){switch(ih(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Xi(kt),Ee(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return ct(s),null;case 31:if(s.memoizedState!==null){if(wn(s),s.alternate===null)throw Error(i(340));Ys()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(wn(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Ys()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return se(bt),null;case 4:return Ee(),null;case 10:return Xi(s.type),null;case 22:case 23:return wn(s),vh(),r!==null&&se($s),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Xi(kt),null;case 25:return null;default:return null}}function F0(r,s){switch(ih(s),s.tag){case 3:Xi(kt),Ee();break;case 26:case 27:case 5:ct(s);break;case 4:Ee();break;case 31:s.memoizedState!==null&&wn(s);break;case 13:wn(s);break;case 19:se(bt);break;case 10:Xi(s.type);break;case 22:case 23:wn(s),vh(),r!==null&&se($s);break;case 24:Xi(kt)}}function Pl(r,s){try{var a=s.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var v=c.next;a=v;do{if((a.tag&r)===r){c=void 0;var _=a.create,S=a.inst;c=_(),S.destroy=c}a=a.next}while(a!==v)}}catch(C){nt(s,s.return,C)}}function zr(r,s,a){try{var c=s.updateQueue,v=c!==null?c.lastEffect:null;if(v!==null){var _=v.next;c=_;do{if((c.tag&r)===r){var S=c.inst,C=S.destroy;if(C!==void 0){S.destroy=void 0,v=s;var q=a,K=C;try{K()}catch(Z){nt(v,q,Z)}}}c=c.next}while(c!==_)}}catch(Z){nt(s,s.return,Z)}}function z0(r){var s=r.updateQueue;if(s!==null){var a=r.stateNode;try{My(s,a)}catch(c){nt(r,r.return,c)}}}function G0(r,s,a){a.props=eo(r.type,r.memoizedProps),a.state=r.memoizedState;try{a.componentWillUnmount()}catch(c){nt(r,s,c)}}function Vl(r,s){try{var a=r.ref;if(a!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof a=="function"?r.refCleanup=a(c):a.current=c}}catch(v){nt(r,s,v)}}function Pi(r,s){var a=r.ref,c=r.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(v){nt(r,s,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(v){nt(r,s,v)}else a.current=null}function H0(r){var s=r.type,a=r.memoizedProps,c=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(v){nt(r,r.return,v)}}function Qh(r,s,a){try{var c=r.stateNode;Lw(c,r.type,a,s),c[Gt]=s}catch(v){nt(r,r.return,v)}}function j0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&$r(r.type)||r.tag===4}function Wh(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||j0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&$r(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Xh(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(r,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(r),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ei));else if(c!==4&&(c===27&&$r(r.type)&&(a=r.stateNode,s=null),r=r.child,r!==null))for(Xh(r,s,a),r=r.sibling;r!==null;)Xh(r,s,a),r=r.sibling}function qc(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(c!==4&&(c===27&&$r(r.type)&&(a=r.stateNode),r=r.child,r!==null))for(qc(r,s,a),r=r.sibling;r!==null;)qc(r,s,a),r=r.sibling}function Y0(r){var s=r.stateNode,a=r.memoizedProps;try{for(var c=r.type,v=s.attributes;v.length;)s.removeAttributeNode(v[0]);Xt(s,c,a),s[It]=r,s[Gt]=a}catch(_){nt(r,r.return,_)}}var ir=!1,Pt=!1,Zh=!1,J0=typeof WeakSet=="function"?WeakSet:Set,jt=null;function pw(r,s){if(r=r.containerInfo,Tm=od,r=sy(r),Yf(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var v=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var S=0,C=-1,q=-1,K=0,Z=0,oe=r,$=null;t:for(;;){for(var X;oe!==a||v!==0&&oe.nodeType!==3||(C=S+v),oe!==_||c!==0&&oe.nodeType!==3||(q=S+c),oe.nodeType===3&&(S+=oe.nodeValue.length),(X=oe.firstChild)!==null;)$=oe,oe=X;for(;;){if(oe===r)break t;if($===a&&++K===v&&(C=S),$===_&&++Z===c&&(q=S),(X=oe.nextSibling)!==null)break;oe=$,$=oe.parentNode}oe=X}a=C===-1||q===-1?null:{start:C,end:q}}else a=null}a=a||{start:0,end:0}}else a=null;for(xm={focusedElem:r,selectionRange:a},od=!1,jt=s;jt!==null;)if(s=jt,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,jt=r;else for(;jt!==null;){switch(s=jt,_=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(a=0;a<r.length;a++)v=r[a],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,a=s,v=_.memoizedProps,_=_.memoizedState,c=a.stateNode;try{var ye=eo(a.type,v);r=c.getSnapshotBeforeUpdate(ye,_),c.__reactInternalSnapshotBeforeUpdate=r}catch(be){nt(a,a.return,be)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,a=r.nodeType,a===9)Sm(r);else if(a===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Sm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,jt=r;break}jt=s.return}}function K0(r,s,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:sr(r,a),c&4&&Pl(5,a);break;case 1:if(sr(r,a),c&4)if(r=a.stateNode,s===null)try{r.componentDidMount()}catch(S){nt(a,a.return,S)}else{var v=eo(a.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(v,s,r.__reactInternalSnapshotBeforeUpdate)}catch(S){nt(a,a.return,S)}}c&64&&z0(a),c&512&&Vl(a,a.return);break;case 3:if(sr(r,a),c&64&&(r=a.updateQueue,r!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{My(r,s)}catch(S){nt(a,a.return,S)}}break;case 27:s===null&&c&4&&Y0(a);case 26:case 5:sr(r,a),s===null&&c&4&&H0(a),c&512&&Vl(a,a.return);break;case 12:sr(r,a);break;case 31:sr(r,a),c&4&&W0(r,a);break;case 13:sr(r,a),c&4&&X0(r,a),c&64&&(r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(a=Sw.bind(null,a),Hw(r,a))));break;case 22:if(c=a.memoizedState!==null||ir,!c){s=s!==null&&s.memoizedState!==null||Pt,v=ir;var _=Pt;ir=c,(Pt=s)&&!_?or(r,a,(a.subtreeFlags&8772)!==0):sr(r,a),ir=v,Pt=_}break;case 30:break;default:sr(r,a)}}function $0(r){var s=r.alternate;s!==null&&(r.alternate=null,$0(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&So(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var pt=null,mn=!1;function rr(r,s,a){for(a=a.child;a!==null;)Q0(r,s,a),a=a.sibling}function Q0(r,s,a){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Qn,a)}catch{}switch(a.tag){case 26:Pt||Pi(a,s),rr(r,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Pt||Pi(a,s);var c=pt,v=mn;$r(a.type)&&(pt=a.stateNode,mn=!1),rr(r,s,a),Hl(a.stateNode),pt=c,mn=v;break;case 5:Pt||Pi(a,s);case 6:if(c=pt,v=mn,pt=null,rr(r,s,a),pt=c,mn=v,pt!==null)if(mn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(_){nt(a,s,_)}else try{pt.removeChild(a.stateNode)}catch(_){nt(a,s,_)}break;case 18:pt!==null&&(mn?(r=pt,zv(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.stateNode),la(r)):zv(pt,a.stateNode));break;case 4:c=pt,v=mn,pt=a.stateNode.containerInfo,mn=!0,rr(r,s,a),pt=c,mn=v;break;case 0:case 11:case 14:case 15:zr(2,a,s),Pt||zr(4,a,s),rr(r,s,a);break;case 1:Pt||(Pi(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"&&G0(a,s,c)),rr(r,s,a);break;case 21:rr(r,s,a);break;case 22:Pt=(c=Pt)||a.memoizedState!==null,rr(r,s,a),Pt=c;break;default:rr(r,s,a)}}function W0(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{la(r)}catch(a){nt(s,s.return,a)}}}function X0(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{la(r)}catch(a){nt(s,s.return,a)}}function gw(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new J0),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new J0),s;default:throw Error(i(435,r.tag))}}function Bc(r,s){var a=gw(r);s.forEach(function(c){if(!a.has(c)){a.add(c);var v=Aw.bind(null,r,c);c.then(v,v)}})}function pn(r,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var v=a[c],_=r,S=s,C=S;e:for(;C!==null;){switch(C.tag){case 27:if($r(C.type)){pt=C.stateNode,mn=!1;break e}break;case 5:pt=C.stateNode,mn=!1;break e;case 3:case 4:pt=C.stateNode.containerInfo,mn=!0;break e}C=C.return}if(pt===null)throw Error(i(160));Q0(_,S,v),pt=null,mn=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Z0(s,r),s=s.sibling}var oi=null;function Z0(r,s){var a=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:pn(s,r),gn(r),c&4&&(zr(3,r,r.return),Pl(3,r),zr(5,r,r.return));break;case 1:pn(s,r),gn(r),c&512&&(Pt||a===null||Pi(a,a.return)),c&64&&ir&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(a=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var v=oi;if(pn(s,r),gn(r),c&512&&(Pt||a===null||Pi(a,a.return)),c&4){var _=a!==null?a.memoizedState:null;if(c=r.memoizedState,a===null)if(c===null)if(r.stateNode===null){e:{c=r.type,a=r.memoizedProps,v=v.ownerDocument||v;t:switch(c){case"title":_=v.getElementsByTagName("title")[0],(!_||_[Ti]||_[It]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(c),v.head.insertBefore(_,v.querySelector("head > title"))),Xt(_,c,a),_[It]=r,Nt(_),c=_;break e;case"link":var S=Zv("link","href",v).get(c+(a.href||""));if(S){for(var C=0;C<S.length;C++)if(_=S[C],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(C,1);break t}}_=v.createElement(c),Xt(_,c,a),v.head.appendChild(_);break;case"meta":if(S=Zv("meta","content",v).get(c+(a.content||""))){for(C=0;C<S.length;C++)if(_=S[C],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(C,1);break t}}_=v.createElement(c),Xt(_,c,a),v.head.appendChild(_);break;default:throw Error(i(468,c))}_[It]=r,Nt(_),c=_}r.stateNode=c}else e_(v,r.type,r.stateNode);else r.stateNode=Xv(v,c,r.memoizedProps);else _!==c?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,c===null?e_(v,r.type,r.stateNode):Xv(v,c,r.memoizedProps)):c===null&&r.stateNode!==null&&Qh(r,r.memoizedProps,a.memoizedProps)}break;case 27:pn(s,r),gn(r),c&512&&(Pt||a===null||Pi(a,a.return)),a!==null&&c&4&&Qh(r,r.memoizedProps,a.memoizedProps);break;case 5:if(pn(s,r),gn(r),c&512&&(Pt||a===null||Pi(a,a.return)),r.flags&32){v=r.stateNode;try{hn(v,"")}catch(ye){nt(r,r.return,ye)}}c&4&&r.stateNode!=null&&(v=r.memoizedProps,Qh(r,v,a!==null?a.memoizedProps:v)),c&1024&&(Zh=!0);break;case 6:if(pn(s,r),gn(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,a=r.stateNode;try{a.nodeValue=c}catch(ye){nt(r,r.return,ye)}}break;case 3:if(nd=null,v=oi,oi=ed(s.containerInfo),pn(s,r),oi=v,gn(r),c&4&&a!==null&&a.memoizedState.isDehydrated)try{la(s.containerInfo)}catch(ye){nt(r,r.return,ye)}Zh&&(Zh=!1,ev(r));break;case 4:c=oi,oi=ed(r.stateNode.containerInfo),pn(s,r),gn(r),oi=c;break;case 12:pn(s,r),gn(r);break;case 31:pn(s,r),gn(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Bc(r,c)));break;case 13:pn(s,r),gn(r),r.child.flags&8192&&r.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(zc=un()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Bc(r,c)));break;case 22:v=r.memoizedState!==null;var q=a!==null&&a.memoizedState!==null,K=ir,Z=Pt;if(ir=K||v,Pt=Z||q,pn(s,r),Pt=Z,ir=K,gn(r),c&8192)e:for(s=r.stateNode,s._visibility=v?s._visibility&-2:s._visibility|1,v&&(a===null||q||ir||Pt||to(r)),a=null,s=r;;){if(s.tag===5||s.tag===26){if(a===null){q=a=s;try{if(_=q.stateNode,v)S=_.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{C=q.stateNode;var oe=q.memoizedProps.style,$=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;C.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(ye){nt(q,q.return,ye)}}}else if(s.tag===6){if(a===null){q=s;try{q.stateNode.nodeValue=v?"":q.memoizedProps}catch(ye){nt(q,q.return,ye)}}}else if(s.tag===18){if(a===null){q=s;try{var X=q.stateNode;v?Gv(X,!0):Gv(q.stateNode,!1)}catch(ye){nt(q,q.return,ye)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=r.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Bc(r,a))));break;case 19:pn(s,r),gn(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Bc(r,c)));break;case 30:break;case 21:break;default:pn(s,r),gn(r)}}function gn(r){var s=r.flags;if(s&2){try{for(var a,c=r.return;c!==null;){if(j0(c)){a=c;break}c=c.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var v=a.stateNode,_=Wh(r);qc(r,_,v);break;case 5:var S=a.stateNode;a.flags&32&&(hn(S,""),a.flags&=-33);var C=Wh(r);qc(r,C,S);break;case 3:case 4:var q=a.stateNode.containerInfo,K=Wh(r);Xh(r,K,q);break;default:throw Error(i(161))}}catch(Z){nt(r,r.return,Z)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function ev(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;ev(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function sr(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)K0(r,s.alternate,s),s=s.sibling}function to(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:zr(4,s,s.return),to(s);break;case 1:Pi(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&G0(s,s.return,a),to(s);break;case 27:Hl(s.stateNode);case 26:case 5:Pi(s,s.return),to(s);break;case 22:s.memoizedState===null&&to(s);break;case 30:to(s);break;default:to(s)}r=r.sibling}}function or(r,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,v=r,_=s,S=_.flags;switch(_.tag){case 0:case 11:case 15:or(v,_,a),Pl(4,_);break;case 1:if(or(v,_,a),c=_,v=c.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(K){nt(c,c.return,K)}if(c=_,v=c.updateQueue,v!==null){var C=c.stateNode;try{var q=v.shared.hiddenCallbacks;if(q!==null)for(v.shared.hiddenCallbacks=null,v=0;v<q.length;v++)ky(q[v],C)}catch(K){nt(c,c.return,K)}}a&&S&64&&z0(_),Vl(_,_.return);break;case 27:Y0(_);case 26:case 5:or(v,_,a),a&&c===null&&S&4&&H0(_),Vl(_,_.return);break;case 12:or(v,_,a);break;case 31:or(v,_,a),a&&S&4&&W0(v,_);break;case 13:or(v,_,a),a&&S&4&&X0(v,_);break;case 22:_.memoizedState===null&&or(v,_,a),Vl(_,_.return);break;case 30:break;default:or(v,_,a)}s=s.sibling}}function em(r,s){var a=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==a&&(r!=null&&r.refCount++,a!=null&&xl(a))}function tm(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&xl(r))}function ai(r,s,a,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)tv(r,s,a,c),s=s.sibling}function tv(r,s,a,c){var v=s.flags;switch(s.tag){case 0:case 11:case 15:ai(r,s,a,c),v&2048&&Pl(9,s);break;case 1:ai(r,s,a,c);break;case 3:ai(r,s,a,c),v&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&xl(r)));break;case 12:if(v&2048){ai(r,s,a,c),r=s.stateNode;try{var _=s.memoizedProps,S=_.id,C=_.onPostCommit;typeof C=="function"&&C(S,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(q){nt(s,s.return,q)}}else ai(r,s,a,c);break;case 31:ai(r,s,a,c);break;case 13:ai(r,s,a,c);break;case 23:break;case 22:_=s.stateNode,S=s.alternate,s.memoizedState!==null?_._visibility&2?ai(r,s,a,c):Ll(r,s):_._visibility&2?ai(r,s,a,c):(_._visibility|=2,Wo(r,s,a,c,(s.subtreeFlags&10256)!==0||!1)),v&2048&&em(S,s);break;case 24:ai(r,s,a,c),v&2048&&tm(s.alternate,s);break;default:ai(r,s,a,c)}}function Wo(r,s,a,c,v){for(v=v&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var _=r,S=s,C=a,q=c,K=S.flags;switch(S.tag){case 0:case 11:case 15:Wo(_,S,C,q,v),Pl(8,S);break;case 23:break;case 22:var Z=S.stateNode;S.memoizedState!==null?Z._visibility&2?Wo(_,S,C,q,v):Ll(_,S):(Z._visibility|=2,Wo(_,S,C,q,v)),v&&K&2048&&em(S.alternate,S);break;case 24:Wo(_,S,C,q,v),v&&K&2048&&tm(S.alternate,S);break;default:Wo(_,S,C,q,v)}s=s.sibling}}function Ll(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=r,c=s,v=c.flags;switch(c.tag){case 22:Ll(a,c),v&2048&&em(c.alternate,c);break;case 24:Ll(a,c),v&2048&&tm(c.alternate,c);break;default:Ll(a,c)}s=s.sibling}}var Ul=8192;function Xo(r,s,a){if(r.subtreeFlags&Ul)for(r=r.child;r!==null;)nv(r,s,a),r=r.sibling}function nv(r,s,a){switch(r.tag){case 26:Xo(r,s,a),r.flags&Ul&&r.memoizedState!==null&&nC(a,oi,r.memoizedState,r.memoizedProps);break;case 5:Xo(r,s,a);break;case 3:case 4:var c=oi;oi=ed(r.stateNode.containerInfo),Xo(r,s,a),oi=c;break;case 22:r.memoizedState===null&&(c=r.alternate,c!==null&&c.memoizedState!==null?(c=Ul,Ul=16777216,Xo(r,s,a),Ul=c):Xo(r,s,a));break;default:Xo(r,s,a)}}function iv(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Ol(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];jt=c,sv(c,r)}iv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)rv(r),r=r.sibling}function rv(r){switch(r.tag){case 0:case 11:case 15:Ol(r),r.flags&2048&&zr(9,r,r.return);break;case 3:Ol(r);break;case 12:Ol(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Fc(r)):Ol(r);break;default:Ol(r)}}function Fc(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];jt=c,sv(c,r)}iv(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:zr(8,s,s.return),Fc(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Fc(s));break;default:Fc(s)}r=r.sibling}}function sv(r,s){for(;jt!==null;){var a=jt;switch(a.tag){case 0:case 11:case 15:zr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:xl(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,jt=c;else e:for(a=r;jt!==null;){c=jt;var v=c.sibling,_=c.return;if($0(c),c===a){jt=null;break e}if(v!==null){v.return=_,jt=v;break e}jt=_}}}var yw={getCacheForType:function(r){var s=Qt(kt),a=s.data.get(r);return a===void 0&&(a=r(),s.data.set(r,a)),a},cacheSignal:function(){return Qt(kt).controller.signal}},vw=typeof WeakMap=="function"?WeakMap:Map,We=0,at=null,Oe=null,Be=0,tt=0,Cn=null,Gr=!1,Zo=!1,nm=!1,ar=0,vt=0,Hr=0,no=0,im=0,In=0,ea=0,ql=null,yn=null,rm=!1,zc=0,ov=0,Gc=1/0,Hc=null,jr=null,Bt=0,Yr=null,ta=null,lr=0,sm=0,om=null,av=null,Bl=0,am=null;function Nn(){return(We&2)!==0&&Be!==0?Be&-Be:Q.T!==null?hm():ju()}function lv(){if(In===0)if((Be&536870912)===0||je){var r=Ns;Ns<<=1,(Ns&3932160)===0&&(Ns=262144),In=r}else In=536870912;return r=An.current,r!==null&&(r.flags|=32),In}function vn(r,s,a){(r===at&&(tt===2||tt===9)||r.cancelPendingCommit!==null)&&(na(r,0),Jr(r,Be,In,!1)),Rs(r,a),((We&2)===0||r!==at)&&(r===at&&((We&2)===0&&(no|=a),vt===4&&Jr(r,Be,In,!1)),Vi(r))}function uv(r,s,a){if((We&6)!==0)throw Error(i(327));var c=!a&&(s&127)===0&&(s&r.expiredLanes)===0||Wn(r,s),v=c?xw(r,s):um(r,s,!0),_=c;do{if(v===0){Zo&&!c&&Jr(r,s,0,!1);break}else{if(a=r.current.alternate,_&&!_w(a)){v=um(r,s,!1),_=!1;continue}if(v===2){if(_=s,r.errorRecoveryDisabledLanes&_)var S=0;else S=r.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var C=r;v=ql;var q=C.current.memoizedState.isDehydrated;if(q&&(na(C,S).flags|=256),S=um(C,S,!1),S!==2){if(nm&&!q){C.errorRecoveryDisabledLanes|=_,no|=_,v=4;break e}_=yn,yn=v,_!==null&&(yn===null?yn=_:yn.push.apply(yn,_))}v=S}if(_=!1,v!==2)continue}}if(v===1){na(r,0),Jr(r,s,0,!0);break}e:{switch(c=r,_=v,_){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Jr(c,s,In,!Gr);break e;case 2:yn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(v=zc+300-un(),10<v)){if(Jr(c,s,In,!Gr),yi(c,0,!0)!==0)break e;lr=s,c.timeoutHandle=Bv(cv.bind(null,c,a,yn,Hc,rm,s,In,no,ea,Gr,_,"Throttled",-0,0),v);break e}cv(c,a,yn,Hc,rm,s,In,no,ea,Gr,_,null,-0,0)}}break}while(!0);Vi(r)}function cv(r,s,a,c,v,_,S,C,q,K,Z,oe,$,X){if(r.timeoutHandle=-1,oe=s.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ei},nv(s,_,oe);var ye=(_&62914560)===_?zc-un():(_&4194048)===_?ov-un():0;if(ye=iC(oe,ye),ye!==null){lr=_,r.cancelPendingCommit=ye(vv.bind(null,r,s,_,a,c,v,S,C,q,Z,oe,null,$,X)),Jr(r,_,S,!K);return}}vv(r,s,_,a,c,v,S,C,q)}function _w(r){for(var s=r;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var v=a[c],_=v.getSnapshot;v=v.value;try{if(!bn(_(),v))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Jr(r,s,a,c){s&=~im,s&=~no,r.suspendedLanes|=s,r.pingedLanes&=~s,c&&(r.warmLanes|=s),c=r.expirationTimes;for(var v=s;0<v;){var _=31-xt(v),S=1<<_;c[_]=-1,v&=~S}a!==0&&ks(r,a,s)}function jc(){return(We&6)===0?(Fl(0),!1):!0}function lm(){if(Oe!==null){if(tt===0)var r=Oe.return;else r=Oe,Wi=Js=null,Sh(r),Yo=null,bl=0,r=Oe;for(;r!==null;)F0(r.alternate,r),r=r.return;Oe=null}}function na(r,s){var a=r.timeoutHandle;a!==-1&&(r.timeoutHandle=-1,qw(a)),a=r.cancelPendingCommit,a!==null&&(r.cancelPendingCommit=null,a()),lr=0,lm(),at=r,Oe=a=$i(r.current,null),Be=s,tt=0,Cn=null,Gr=!1,Zo=Wn(r,s),nm=!1,ea=In=im=no=Hr=vt=0,yn=ql=null,rm=!1,(s&8)!==0&&(s|=s&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=s;0<c;){var v=31-xt(c),_=1<<v;s|=r[v],c&=~_}return ar=s,fc(),a}function dv(r,s){De=null,Q.H=kl,s===jo||s===Tc?(s=Cy(),tt=3):s===fh?(s=Cy(),tt=4):tt=s===Bh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Cn=s,Oe===null&&(vt=1,Pc(r,Bn(s,r.current)))}function fv(){var r=An.current;return r===null?!0:(Be&4194048)===Be?Hn===null:(Be&62914560)===Be||(Be&536870912)!==0?r===Hn:!1}function hv(){var r=Q.H;return Q.H=kl,r===null?kl:r}function mv(){var r=Q.A;return Q.A=yw,r}function Yc(){vt=4,Gr||(Be&4194048)!==Be&&An.current!==null||(Zo=!0),(Hr&134217727)===0&&(no&134217727)===0||at===null||Jr(at,Be,In,!1)}function um(r,s,a){var c=We;We|=2;var v=hv(),_=mv();(at!==r||Be!==s)&&(Hc=null,na(r,s)),s=!1;var S=vt;e:do try{if(tt!==0&&Oe!==null){var C=Oe,q=Cn;switch(tt){case 8:lm(),S=6;break e;case 3:case 2:case 9:case 6:An.current===null&&(s=!0);var K=tt;if(tt=0,Cn=null,ia(r,C,q,K),a&&Zo){S=0;break e}break;default:K=tt,tt=0,Cn=null,ia(r,C,q,K)}}Tw(),S=vt;break}catch(Z){dv(r,Z)}while(!0);return s&&r.shellSuspendCounter++,Wi=Js=null,We=c,Q.H=v,Q.A=_,Oe===null&&(at=null,Be=0,fc()),S}function Tw(){for(;Oe!==null;)pv(Oe)}function xw(r,s){var a=We;We|=2;var c=hv(),v=mv();at!==r||Be!==s?(Hc=null,Gc=un()+500,na(r,s)):Zo=Wn(r,s);e:do try{if(tt!==0&&Oe!==null){s=Oe;var _=Cn;t:switch(tt){case 1:tt=0,Cn=null,ia(r,s,_,1);break;case 2:case 9:if(Ay(_)){tt=0,Cn=null,gv(s);break}s=function(){tt!==2&&tt!==9||at!==r||(tt=7),Vi(r)},_.then(s,s);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:Ay(_)?(tt=0,Cn=null,gv(s)):(tt=0,Cn=null,ia(r,s,_,7));break;case 5:var S=null;switch(Oe.tag){case 26:S=Oe.memoizedState;case 5:case 27:var C=Oe;if(S?t_(S):C.stateNode.complete){tt=0,Cn=null;var q=C.sibling;if(q!==null)Oe=q;else{var K=C.return;K!==null?(Oe=K,Jc(K)):Oe=null}break t}}tt=0,Cn=null,ia(r,s,_,5);break;case 6:tt=0,Cn=null,ia(r,s,_,6);break;case 8:lm(),vt=6;break e;default:throw Error(i(462))}}Ew();break}catch(Z){dv(r,Z)}while(!0);return Wi=Js=null,Q.H=c,Q.A=v,We=a,Oe!==null?0:(at=null,Be=0,fc(),vt)}function Ew(){for(;Oe!==null&&!qf();)pv(Oe)}function pv(r){var s=q0(r.alternate,r,ar);r.memoizedProps=r.pendingProps,s===null?Jc(r):Oe=s}function gv(r){var s=r,a=s.alternate;switch(s.tag){case 15:case 0:s=D0(a,s,s.pendingProps,s.type,void 0,Be);break;case 11:s=D0(a,s,s.pendingProps,s.type.render,s.ref,Be);break;case 5:Sh(s);default:F0(a,s),s=Oe=my(s,ar),s=q0(a,s,ar)}r.memoizedProps=r.pendingProps,s===null?Jc(r):Oe=s}function ia(r,s,a,c){Wi=Js=null,Sh(s),Yo=null,bl=0;var v=s.return;try{if(cw(r,v,s,a,Be)){vt=1,Pc(r,Bn(a,r.current)),Oe=null;return}}catch(_){if(v!==null)throw Oe=v,_;vt=1,Pc(r,Bn(a,r.current)),Oe=null;return}s.flags&32768?(je||c===1?r=!0:Zo||(Be&536870912)!==0?r=!1:(Gr=r=!0,(c===2||c===9||c===3||c===6)&&(c=An.current,c!==null&&c.tag===13&&(c.flags|=16384))),yv(s,r)):Jc(s)}function Jc(r){var s=r;do{if((s.flags&32768)!==0){yv(s,Gr);return}r=s.return;var a=hw(s.alternate,s,ar);if(a!==null){Oe=a;return}if(s=s.sibling,s!==null){Oe=s;return}Oe=s=r}while(s!==null);vt===0&&(vt=5)}function yv(r,s){do{var a=mw(r.alternate,r);if(a!==null){a.flags&=32767,Oe=a;return}if(a=r.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(r=r.sibling,r!==null)){Oe=r;return}Oe=r=a}while(r!==null);vt=6,Oe=null}function vv(r,s,a,c,v,_,S,C,q){r.cancelPendingCommit=null;do Kc();while(Bt!==0);if((We&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(_=s.lanes|s.childLanes,_|=Wf,zf(r,a,_,S,C,q),r===at&&(Oe=at=null,Be=0),ta=s,Yr=r,lr=a,sm=_,om=v,av=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,ww(br,function(){return bv(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=Q.T,Q.T=null,v=ue.p,ue.p=2,S=We,We|=4;try{pw(r,s,a)}finally{We=S,ue.p=v,Q.T=c}}Bt=1,_v(),Tv(),xv()}}function _v(){if(Bt===1){Bt=0;var r=Yr,s=ta,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var c=ue.p;ue.p=2;var v=We;We|=4;try{Z0(s,r);var _=xm,S=sy(r.containerInfo),C=_.focusedElem,q=_.selectionRange;if(S!==C&&C&&C.ownerDocument&&ry(C.ownerDocument.documentElement,C)){if(q!==null&&Yf(C)){var K=q.start,Z=q.end;if(Z===void 0&&(Z=K),"selectionStart"in C)C.selectionStart=K,C.selectionEnd=Math.min(Z,C.value.length);else{var oe=C.ownerDocument||document,$=oe&&oe.defaultView||window;if($.getSelection){var X=$.getSelection(),ye=C.textContent.length,be=Math.min(q.start,ye),ot=q.end===void 0?be:Math.min(q.end,ye);!X.extend&&be>ot&&(S=ot,ot=be,be=S);var H=iy(C,be),F=iy(C,ot);if(H&&F&&(X.rangeCount!==1||X.anchorNode!==H.node||X.anchorOffset!==H.offset||X.focusNode!==F.node||X.focusOffset!==F.offset)){var J=oe.createRange();J.setStart(H.node,H.offset),X.removeAllRanges(),be>ot?(X.addRange(J),X.extend(F.node,F.offset)):(J.setEnd(F.node,F.offset),X.addRange(J))}}}}for(oe=[],X=C;X=X.parentNode;)X.nodeType===1&&oe.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<oe.length;C++){var re=oe[C];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}od=!!Tm,xm=Tm=null}finally{We=v,ue.p=c,Q.T=a}}r.current=s,Bt=2}}function Tv(){if(Bt===2){Bt=0;var r=Yr,s=ta,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var c=ue.p;ue.p=2;var v=We;We|=4;try{K0(r,s.alternate,s)}finally{We=v,ue.p=c,Q.T=a}}Bt=3}}function xv(){if(Bt===4||Bt===3){Bt=0,Ou();var r=Yr,s=ta,a=lr,c=av;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Bt=5:(Bt=0,ta=Yr=null,Ev(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(jr=null),ji(a),s=s.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Qn,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=Q.T,v=ue.p,ue.p=2,Q.T=null;try{for(var _=r.onRecoverableError,S=0;S<c.length;S++){var C=c[S];_(C.value,{componentStack:C.stack})}}finally{Q.T=s,ue.p=v}}(lr&3)!==0&&Kc(),Vi(r),v=r.pendingLanes,(a&261930)!==0&&(v&42)!==0?r===am?Bl++:(Bl=0,am=r):Bl=0,Fl(0)}}function Ev(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,xl(s)))}function Kc(){return _v(),Tv(),xv(),bv()}function bv(){if(Bt!==5)return!1;var r=Yr,s=sm;sm=0;var a=ji(lr),c=Q.T,v=ue.p;try{ue.p=32>a?32:a,Q.T=null,a=om,om=null;var _=Yr,S=lr;if(Bt=0,ta=Yr=null,lr=0,(We&6)!==0)throw Error(i(331));var C=We;if(We|=4,rv(_.current),tv(_,_.current,S,a),We=C,Fl(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Qn,_)}catch{}return!0}finally{ue.p=v,Q.T=c,Ev(r,s)}}function Sv(r,s,a){s=Bn(a,s),s=qh(r.stateNode,s,2),r=qr(r,s,2),r!==null&&(Rs(r,2),Vi(r))}function nt(r,s,a){if(r.tag===3)Sv(r,r,a);else for(;s!==null;){if(s.tag===3){Sv(s,r,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(jr===null||!jr.has(c))){r=Bn(a,r),a=A0(2),c=qr(s,a,2),c!==null&&(w0(a,c,s,r),Rs(c,2),Vi(c));break}}s=s.return}}function cm(r,s,a){var c=r.pingCache;if(c===null){c=r.pingCache=new vw;var v=new Set;c.set(s,v)}else v=c.get(s),v===void 0&&(v=new Set,c.set(s,v));v.has(a)||(nm=!0,v.add(a),r=bw.bind(null,r,s,a),s.then(r,r))}function bw(r,s,a){var c=r.pingCache;c!==null&&c.delete(s),r.pingedLanes|=r.suspendedLanes&a,r.warmLanes&=~a,at===r&&(Be&a)===a&&(vt===4||vt===3&&(Be&62914560)===Be&&300>un()-zc?(We&2)===0&&na(r,0):im|=a,ea===Be&&(ea=0)),Vi(r)}function Av(r,s){s===0&&(s=Hu()),r=Hs(r,s),r!==null&&(Rs(r,s),Vi(r))}function Sw(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),Av(r,a)}function Aw(r,s){var a=0;switch(r.tag){case 31:case 13:var c=r.stateNode,v=r.memoizedState;v!==null&&(a=v.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),Av(r,a)}function ww(r,s){return qt(r,s)}var $c=null,ra=null,dm=!1,Qc=!1,fm=!1,Kr=0;function Vi(r){r!==ra&&r.next===null&&(ra===null?$c=ra=r:ra=ra.next=r),Qc=!0,dm||(dm=!0,Iw())}function Fl(r,s){if(!fm&&Qc){fm=!0;do for(var a=!1,c=$c;c!==null;){if(r!==0){var v=c.pendingLanes;if(v===0)var _=0;else{var S=c.suspendedLanes,C=c.pingedLanes;_=(1<<31-xt(42|r)+1)-1,_&=v&~(S&~C),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,Nv(c,_))}else _=Be,_=yi(c,c===at?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||Wn(c,_)||(a=!0,Nv(c,_));c=c.next}while(a);fm=!1}}function Cw(){wv()}function wv(){Qc=dm=!1;var r=0;Kr!==0&&Ow()&&(r=Kr);for(var s=un(),a=null,c=$c;c!==null;){var v=c.next,_=Cv(c,s);_===0?(c.next=null,a===null?$c=v:a.next=v,v===null&&(ra=a)):(a=c,(r!==0||(_&3)!==0)&&(Qc=!0)),c=v}Bt!==0&&Bt!==5||Fl(r),Kr!==0&&(Kr=0)}function Cv(r,s){for(var a=r.suspendedLanes,c=r.pingedLanes,v=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var S=31-xt(_),C=1<<S,q=v[S];q===-1?((C&a)===0||(C&c)!==0)&&(v[S]=Ff(C,s)):q<=s&&(r.expiredLanes|=C),_&=~C}if(s=at,a=Be,a=yi(r,r===s?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,a===0||r===s&&(tt===2||tt===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&Er(c),r.callbackNode=null,r.callbackPriority=0;if((a&3)===0||Wn(r,a)){if(s=a&-a,s===r.callbackPriority)return s;switch(c!==null&&Er(c),ji(a)){case 2:case 8:a=Wa;break;case 32:a=br;break;case 268435456:a=qu;break;default:a=br}return c=Iv.bind(null,r),a=qt(a,c),r.callbackPriority=s,r.callbackNode=a,s}return c!==null&&c!==null&&Er(c),r.callbackPriority=2,r.callbackNode=null,2}function Iv(r,s){if(Bt!==0&&Bt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var a=r.callbackNode;if(Kc()&&r.callbackNode!==a)return null;var c=Be;return c=yi(r,r===at?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(uv(r,c,s),Cv(r,un()),r.callbackNode!=null&&r.callbackNode===a?Iv.bind(null,r):null)}function Nv(r,s){if(Kc())return null;uv(r,s,!0)}function Iw(){Bw(function(){(We&6)!==0?qt(Qa,Cw):wv()})}function hm(){if(Kr===0){var r=Go;r===0&&(r=pi,pi<<=1,(pi&261888)===0&&(pi=256)),Kr=r}return Kr}function Rv(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Io(""+r)}function kv(r,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,r.id&&a.setAttribute("form",r.id),s.parentNode.insertBefore(a,s),r=new FormData(r),a.parentNode.removeChild(a),r}function Nw(r,s,a,c,v){if(s==="submit"&&a&&a.stateNode===v){var _=Rv((v[Gt]||null).action),S=c.submitter;S&&(s=(s=S[Gt]||null)?Rv(s.formAction):S.getAttribute("formAction"),s!==null&&(_=s,S=null));var C=new Ii("action","action",null,c,v);r.push({event:C,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Kr!==0){var q=S?kv(v,S):new FormData(v);Dh(a,{pending:!0,data:q,method:v.method,action:_},null,q)}}else typeof _=="function"&&(C.preventDefault(),q=S?kv(v,S):new FormData(v),Dh(a,{pending:!0,data:q,method:v.method,action:_},_,q))},currentTarget:v}]})}}for(var mm=0;mm<Qf.length;mm++){var pm=Qf[mm],Rw=pm.toLowerCase(),kw=pm[0].toUpperCase()+pm.slice(1);si(Rw,"on"+kw)}si(ly,"onAnimationEnd"),si(uy,"onAnimationIteration"),si(cy,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(JA,"onTransitionRun"),si(KA,"onTransitionStart"),si($A,"onTransitionCancel"),si(dy,"onTransitionEnd"),Si("onMouseEnter",["mouseout","mouseover"]),Si("onMouseLeave",["mouseout","mouseover"]),Si("onPointerEnter",["pointerout","pointerover"]),Si("onPointerLeave",["pointerout","pointerover"]),bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zl));function Mv(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var c=r[a],v=c.event;c=c.listeners;e:{var _=void 0;if(s)for(var S=c.length-1;0<=S;S--){var C=c[S],q=C.instance,K=C.currentTarget;if(C=C.listener,q!==_&&v.isPropagationStopped())break e;_=C,v.currentTarget=K;try{_(v)}catch(Z){dc(Z)}v.currentTarget=null,_=q}else for(S=0;S<c.length;S++){if(C=c[S],q=C.instance,K=C.currentTarget,C=C.listener,q!==_&&v.isPropagationStopped())break e;_=C,v.currentTarget=K;try{_(v)}catch(Z){dc(Z)}v.currentTarget=null,_=q}}}}function qe(r,s){var a=s[bo];a===void 0&&(a=s[bo]=new Set);var c=r+"__bubble";a.has(c)||(Dv(s,r,2,!1),a.add(c))}function gm(r,s,a){var c=0;s&&(c|=4),Dv(a,r,c,s)}var Wc="_reactListening"+Math.random().toString(36).slice(2);function ym(r){if(!r[Wc]){r[Wc]=!0,el.forEach(function(a){a!=="selectionchange"&&(Mw.has(a)||gm(a,!1,r),gm(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Wc]||(s[Wc]=!0,gm("selectionchange",!1,s))}}function Dv(r,s,a,c){switch(l_(s)){case 2:var v=oC;break;case 8:v=aC;break;default:v=Mm}a=v.bind(null,s,a,r),v=void 0,!Ls||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(v=!0),c?v!==void 0?r.addEventListener(s,a,{capture:!0,passive:v}):r.addEventListener(s,a,!0):v!==void 0?r.addEventListener(s,a,{passive:v}):r.addEventListener(s,a,!1)}function vm(r,s,a,c,v){var _=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var C=c.stateNode.containerInfo;if(C===v)break;if(S===4)for(S=c.return;S!==null;){var q=S.tag;if((q===3||q===4)&&S.stateNode.containerInfo===v)return;S=S.return}for(;C!==null;){if(S=xi(C),S===null)return;if(q=S.tag,q===5||q===6||q===26||q===27){c=_=S;continue e}C=C.parentNode}}c=c.return}Nr(function(){var K=_,Z=Ln(a),oe=[];e:{var $=fy.get(r);if($!==void 0){var X=Ii,ye=r;switch(r){case"keypress":if(Os(a)===0)break e;case"keydown":case"keyup":X=lc;break;case"focusin":ye="focus",X=Bs;break;case"focusout":ye="blur",X=Bs;break;case"beforeblur":case"afterblur":X=Bs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=hl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Zu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=E;break;case ly:case uy:case cy:X=tc;break;case dy:X=I;break;case"scroll":case"scrollend":X=fl;break;case"wheel":X=W;break;case"copy":case"cut":case"paste":X=nc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Ki;break;case"toggle":case"beforetoggle":X=Me}var be=(s&4)!==0,ot=!be&&(r==="scroll"||r==="scrollend"),H=be?$!==null?$+"Capture":null:$;be=[];for(var F=K,J;F!==null;){var re=F;if(J=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||J===null||H===null||(re=ti(F,H),re!=null&&be.push(Gl(F,re,J))),ot)break;F=F.return}0<be.length&&($=new X($,ye,null,a,Z),oe.push({event:$,listeners:be}))}}if((s&7)===0){e:{if($=r==="mouseover"||r==="pointerover",X=r==="mouseout"||r==="pointerout",$&&a!==ul&&(ye=a.relatedTarget||a.fromElement)&&(xi(ye)||ye[_i]))break e;if((X||$)&&($=Z.window===Z?Z:($=Z.ownerDocument)?$.defaultView||$.parentWindow:window,X?(ye=a.relatedTarget||a.toElement,X=K,ye=ye?xi(ye):null,ye!==null&&(ot=l(ye),be=ye.tag,ye!==ot||be!==5&&be!==27&&be!==6)&&(ye=null)):(X=null,ye=K),X!==ye)){if(be=hl,re="onMouseLeave",H="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(be=Ki,re="onPointerLeave",H="onPointerEnter",F="pointer"),ot=X==null?$:xn(X),J=ye==null?$:xn(ye),$=new be(re,F+"leave",X,a,Z),$.target=ot,$.relatedTarget=J,re=null,xi(Z)===K&&(be=new be(H,F+"enter",ye,a,Z),be.target=J,be.relatedTarget=ot,re=be),ot=re,X&&ye)t:{for(be=Dw,H=X,F=ye,J=0,re=H;re;re=be(re))J++;re=0;for(var Te=F;Te;Te=be(Te))re++;for(;0<J-re;)H=be(H),J--;for(;0<re-J;)F=be(F),re--;for(;J--;){if(H===F||F!==null&&H===F.alternate){be=H;break t}H=be(H),F=be(F)}be=null}else be=null;X!==null&&Pv(oe,$,X,be,!1),ye!==null&&ot!==null&&Pv(oe,ot,ye,be,!0)}}e:{if($=K?xn(K):window,X=$.nodeName&&$.nodeName.toLowerCase(),X==="select"||X==="input"&&$.type==="file")var Je=Wg;else if($g($))if(Xg)Je=HA;else{Je=zA;var _e=FA}else X=$.nodeName,!X||X.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?K&&Co(K.elementType)&&(Je=Wg):Je=GA;if(Je&&(Je=Je(r,K))){Qg(oe,Je,a,Z);break e}_e&&_e(r,$,K),r==="focusout"&&K&&$.type==="number"&&K.memoizedProps.value!=null&&ol($,"number",$.value)}switch(_e=K?xn(K):window,r){case"focusin":($g(_e)||_e.contentEditable==="true")&&(Vo=_e,Jf=K,vl=null);break;case"focusout":vl=Jf=Vo=null;break;case"mousedown":Kf=!0;break;case"contextmenu":case"mouseup":case"dragend":Kf=!1,oy(oe,a,Z);break;case"selectionchange":if(YA)break;case"keydown":case"keyup":oy(oe,a,Z)}var Pe;if(Qe)e:{switch(r){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Po?Fs(r,a)&&(Fe="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Fe="onCompositionStart");Fe&&(ki&&a.locale!=="ko"&&(Po||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Po&&(Pe=dl()):(Ci=Z,cl="value"in Ci?Ci.value:Ci.textContent,Po=!0)),_e=Xc(K,Fe),0<_e.length&&(Fe=new Ri(Fe,r,null,a,Z),oe.push({event:Fe,listeners:_e}),Pe?Fe.data=Pe:(Pe=Do(a),Pe!==null&&(Fe.data=Pe)))),(Pe=On?UA(r,a):OA(r,a))&&(Fe=Xc(K,"onBeforeInput"),0<Fe.length&&(_e=new Ri("onBeforeInput","beforeinput",null,a,Z),oe.push({event:_e,listeners:Fe}),_e.data=Pe)),Nw(oe,r,K,a,Z)}Mv(oe,s)})}function Gl(r,s,a){return{instance:r,listener:s,currentTarget:a}}function Xc(r,s){for(var a=s+"Capture",c=[];r!==null;){var v=r,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=ti(r,a),v!=null&&c.unshift(Gl(r,v,_)),v=ti(r,s),v!=null&&c.push(Gl(r,v,_))),r.tag===3)return c;r=r.return}return[]}function Dw(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Pv(r,s,a,c,v){for(var _=s._reactName,S=[];a!==null&&a!==c;){var C=a,q=C.alternate,K=C.stateNode;if(C=C.tag,q!==null&&q===c)break;C!==5&&C!==26&&C!==27||K===null||(q=K,v?(K=ti(a,_),K!=null&&S.unshift(Gl(a,K,q))):v||(K=ti(a,_),K!=null&&S.push(Gl(a,K,q)))),a=a.return}S.length!==0&&r.push({event:s,listeners:S})}var Pw=/\r\n?/g,Vw=/\u0000|\uFFFD/g;function Vv(r){return(typeof r=="string"?r:""+r).replace(Pw,`
`).replace(Vw,"")}function Lv(r,s){return s=Vv(s),Vv(r)===s}function st(r,s,a,c,v,_){switch(a){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||hn(r,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&hn(r,""+c);break;case"className":En(r,"class",c);break;case"tabIndex":En(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":En(r,a,c);break;case"style":ll(r,c,_);break;case"data":if(s!=="object"){En(r,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||a!=="href")){r.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(a);break}c=Io(""+c),r.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(s!=="input"&&st(r,s,"name",v.name,v,null),st(r,s,"formEncType",v.formEncType,v,null),st(r,s,"formMethod",v.formMethod,v,null),st(r,s,"formTarget",v.formTarget,v,null)):(st(r,s,"encType",v.encType,v,null),st(r,s,"method",v.method,v,null),st(r,s,"target",v.target,v,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(a);break}c=Io(""+c),r.setAttribute(a,c);break;case"onClick":c!=null&&(r.onclick=ei);break;case"onScroll":c!=null&&qe("scroll",r);break;case"onScrollEnd":c!=null&&qe("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=a}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}a=Io(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(a,""+c):r.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(a,""):r.removeAttribute(a);break;case"capture":case"download":c===!0?r.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(a,c):r.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(a,c):r.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(a):r.setAttribute(a,c);break;case"popover":qe("beforetoggle",r),qe("toggle",r),Ao(r,"popover",c);break;case"xlinkActuate":Rt(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Rt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Rt(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Rt(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Rt(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Rt(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Rt(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Rt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Rt(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ao(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Xu.get(a)||a,Ao(r,a,c))}}function _m(r,s,a,c,v,_){switch(a){case"style":ll(r,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=a}}break;case"children":typeof c=="string"?hn(r,c):(typeof c=="number"||typeof c=="bigint")&&hn(r,""+c);break;case"onScroll":c!=null&&qe("scroll",r);break;case"onScrollEnd":c!=null&&qe("scrollend",r);break;case"onClick":c!=null&&(r.onclick=ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(v=a.endsWith("Capture"),s=a.slice(2,v?a.length-7:void 0),_=r[Gt]||null,_=_!=null?_[a]:null,typeof _=="function"&&r.removeEventListener(s,_,v),typeof c=="function")){typeof _!="function"&&_!==null&&(a in r?r[a]=null:r.hasAttribute(a)&&r.removeAttribute(a)),r.addEventListener(s,c,v);break e}a in r?r[a]=c:c===!0?r.setAttribute(a,""):Ao(r,a,c)}}}function Xt(r,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",r),qe("load",r);var c=!1,v=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var S=a[_];if(S!=null)switch(_){case"src":c=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:st(r,s,_,S,a,null)}}v&&st(r,s,"srcSet",a.srcSet,a,null),c&&st(r,s,"src",a.src,a,null);return;case"input":qe("invalid",r);var C=_=S=v=null,q=null,K=null;for(c in a)if(a.hasOwnProperty(c)){var Z=a[c];if(Z!=null)switch(c){case"name":v=Z;break;case"type":S=Z;break;case"checked":q=Z;break;case"defaultChecked":K=Z;break;case"value":_=Z;break;case"defaultValue":C=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:st(r,s,c,Z,a,null)}}$u(r,_,C,q,K,S,v,!1);return;case"select":qe("invalid",r),c=S=_=null;for(v in a)if(a.hasOwnProperty(v)&&(C=a[v],C!=null))switch(v){case"value":_=C;break;case"defaultValue":S=C;break;case"multiple":c=C;default:st(r,s,v,C,a,null)}s=_,a=S,r.multiple=!!c,s!=null?Ar(r,!!c,s,!1):a!=null&&Ar(r,!!c,a,!0);return;case"textarea":qe("invalid",r),_=v=c=null;for(S in a)if(a.hasOwnProperty(S)&&(C=a[S],C!=null))switch(S){case"value":c=C;break;case"defaultValue":v=C;break;case"children":_=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:st(r,s,S,C,a,null)}wr(r,c,v,_);return;case"option":for(q in a)if(a.hasOwnProperty(q)&&(c=a[q],c!=null))switch(q){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:st(r,s,q,c,a,null)}return;case"dialog":qe("beforetoggle",r),qe("toggle",r),qe("cancel",r),qe("close",r);break;case"iframe":case"object":qe("load",r);break;case"video":case"audio":for(c=0;c<zl.length;c++)qe(zl[c],r);break;case"image":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"embed":case"source":case"link":qe("error",r),qe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(c=a[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:st(r,s,K,c,a,null)}return;default:if(Co(s)){for(Z in a)a.hasOwnProperty(Z)&&(c=a[Z],c!==void 0&&_m(r,s,Z,c,a,void 0));return}}for(C in a)a.hasOwnProperty(C)&&(c=a[C],c!=null&&st(r,s,C,c,a,null))}function Lw(r,s,a,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,S=null,C=null,q=null,K=null,Z=null;for(X in a){var oe=a[X];if(a.hasOwnProperty(X)&&oe!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":q=oe;default:c.hasOwnProperty(X)||st(r,s,X,null,c,oe)}}for(var $ in c){var X=c[$];if(oe=a[$],c.hasOwnProperty($)&&(X!=null||oe!=null))switch($){case"type":_=X;break;case"name":v=X;break;case"checked":K=X;break;case"defaultChecked":Z=X;break;case"value":S=X;break;case"defaultValue":C=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:X!==oe&&st(r,s,$,X,c,oe)}}wo(r,S,C,q,K,Z,_,v);return;case"select":X=S=C=$=null;for(_ in a)if(q=a[_],a.hasOwnProperty(_)&&q!=null)switch(_){case"value":break;case"multiple":X=q;default:c.hasOwnProperty(_)||st(r,s,_,null,c,q)}for(v in c)if(_=c[v],q=a[v],c.hasOwnProperty(v)&&(_!=null||q!=null))switch(v){case"value":$=_;break;case"defaultValue":C=_;break;case"multiple":S=_;default:_!==q&&st(r,s,v,_,c,q)}s=C,a=S,c=X,$!=null?Ar(r,!!a,$,!1):!!c!=!!a&&(s!=null?Ar(r,!!a,s,!0):Ar(r,!!a,a?[]:"",!1));return;case"textarea":X=$=null;for(C in a)if(v=a[C],a.hasOwnProperty(C)&&v!=null&&!c.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:st(r,s,C,null,c,v)}for(S in c)if(v=c[S],_=a[S],c.hasOwnProperty(S)&&(v!=null||_!=null))switch(S){case"value":$=v;break;case"defaultValue":X=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==_&&st(r,s,S,v,c,_)}Qu(r,$,X);return;case"option":for(var ye in a)if($=a[ye],a.hasOwnProperty(ye)&&$!=null&&!c.hasOwnProperty(ye))switch(ye){case"selected":r.selected=!1;break;default:st(r,s,ye,null,c,$)}for(q in c)if($=c[q],X=a[q],c.hasOwnProperty(q)&&$!==X&&($!=null||X!=null))switch(q){case"selected":r.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:st(r,s,q,$,c,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)$=a[be],a.hasOwnProperty(be)&&$!=null&&!c.hasOwnProperty(be)&&st(r,s,be,null,c,$);for(K in c)if($=c[K],X=a[K],c.hasOwnProperty(K)&&$!==X&&($!=null||X!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,s));break;default:st(r,s,K,$,c,X)}return;default:if(Co(s)){for(var ot in a)$=a[ot],a.hasOwnProperty(ot)&&$!==void 0&&!c.hasOwnProperty(ot)&&_m(r,s,ot,void 0,c,$);for(Z in c)$=c[Z],X=a[Z],!c.hasOwnProperty(Z)||$===X||$===void 0&&X===void 0||_m(r,s,Z,$,c,X);return}}for(var H in a)$=a[H],a.hasOwnProperty(H)&&$!=null&&!c.hasOwnProperty(H)&&st(r,s,H,null,c,$);for(oe in c)$=c[oe],X=a[oe],!c.hasOwnProperty(oe)||$===X||$==null&&X==null||st(r,s,oe,$,c,X)}function Uv(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Uw(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var v=a[c],_=v.transferSize,S=v.initiatorType,C=v.duration;if(_&&C&&Uv(S)){for(S=0,C=v.responseEnd,c+=1;c<a.length;c++){var q=a[c],K=q.startTime;if(K>C)break;var Z=q.transferSize,oe=q.initiatorType;Z&&Uv(oe)&&(q=q.responseEnd,S+=Z*(q<C?1:(C-K)/(q-K)))}if(--c,s+=8*(_+S)/(v.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Tm=null,xm=null;function Zc(r){return r.nodeType===9?r:r.ownerDocument}function Ov(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qv(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Em(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var bm=null;function Ow(){var r=window.event;return r&&r.type==="popstate"?r===bm?!1:(bm=r,!0):(bm=null,!1)}var Bv=typeof setTimeout=="function"?setTimeout:void 0,qw=typeof clearTimeout=="function"?clearTimeout:void 0,Fv=typeof Promise=="function"?Promise:void 0,Bw=typeof queueMicrotask=="function"?queueMicrotask:typeof Fv<"u"?function(r){return Fv.resolve(null).then(r).catch(Fw)}:Bv;function Fw(r){setTimeout(function(){throw r})}function $r(r){return r==="head"}function zv(r,s){var a=s,c=0;do{var v=a.nextSibling;if(r.removeChild(a),v&&v.nodeType===8)if(a=v.data,a==="/$"||a==="/&"){if(c===0){r.removeChild(v),la(s);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Hl(r.ownerDocument.documentElement);else if(a==="head"){a=r.ownerDocument.head,Hl(a);for(var _=a.firstChild;_;){var S=_.nextSibling,C=_.nodeName;_[Ti]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=S}}else a==="body"&&Hl(r.ownerDocument.body);a=v}while(a);la(s)}function Gv(r,s){var a=r;r=0;do{var c=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(r===0)break;r--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||r++;a=c}while(a)}function Sm(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Sm(a),So(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}r.removeChild(a)}}function zw(r,s,a,c){for(;r.nodeType===1;){var v=a;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[Ti])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=jn(r.nextSibling),r===null)break}return null}function Gw(r,s,a){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=jn(r.nextSibling),r===null))return null;return r}function Hv(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=jn(r.nextSibling),r===null))return null;return r}function Am(r){return r.data==="$?"||r.data==="$~"}function wm(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function Hw(r,s){var a=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||a.readyState!=="loading")s();else{var c=function(){s(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function jn(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var Cm=null;function jv(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"||a==="/&"){if(s===0)return jn(r.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}r=r.nextSibling}return null}function Yv(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return r;s--}else a!=="/$"&&a!=="/&"||s++}r=r.previousSibling}return null}function Jv(r,s,a){switch(s=Zc(a),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Hl(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);So(r)}var Yn=new Map,Kv=new Set;function ed(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ur=ue.d;ue.d={f:jw,r:Yw,D:Jw,C:Kw,L:$w,m:Qw,X:Xw,S:Ww,M:Zw};function jw(){var r=ur.f(),s=jc();return r||s}function Yw(r){var s=Vn(r);s!==null&&s.tag===5&&s.type==="form"?d0(s):ur.r(r)}var sa=typeof document>"u"?null:document;function $v(r,s,a){var c=sa;if(c&&typeof s=="string"&&s){var v=fn(s);v='link[rel="'+r+'"][href="'+v+'"]',typeof a=="string"&&(v+='[crossorigin="'+a+'"]'),Kv.has(v)||(Kv.add(v),r={rel:r,crossOrigin:a,href:s},c.querySelector(v)===null&&(s=c.createElement("link"),Xt(s,"link",r),Nt(s),c.head.appendChild(s)))}}function Jw(r){ur.D(r),$v("dns-prefetch",r,null)}function Kw(r,s){ur.C(r,s),$v("preconnect",r,s)}function $w(r,s,a){ur.L(r,s,a);var c=sa;if(c&&r&&s){var v='link[rel="preload"][as="'+fn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(v+='[imagesrcset="'+fn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(v+='[imagesizes="'+fn(a.imageSizes)+'"]')):v+='[href="'+fn(r)+'"]';var _=v;switch(s){case"style":_=oa(r);break;case"script":_=aa(r)}Yn.has(_)||(r=x({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:r,as:s},a),Yn.set(_,r),c.querySelector(v)!==null||s==="style"&&c.querySelector(jl(_))||s==="script"&&c.querySelector(Yl(_))||(s=c.createElement("link"),Xt(s,"link",r),Nt(s),c.head.appendChild(s)))}}function Qw(r,s){ur.m(r,s);var a=sa;if(a&&r){var c=s&&typeof s.as=="string"?s.as:"script",v='link[rel="modulepreload"][as="'+fn(c)+'"][href="'+fn(r)+'"]',_=v;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=aa(r)}if(!Yn.has(_)&&(r=x({rel:"modulepreload",href:r},s),Yn.set(_,r),a.querySelector(v)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Yl(_)))return}c=a.createElement("link"),Xt(c,"link",r),Nt(c),a.head.appendChild(c)}}}function Ww(r,s,a){ur.S(r,s,a);var c=sa;if(c&&r){var v=Ei(c).hoistableStyles,_=oa(r);s=s||"default";var S=v.get(_);if(!S){var C={loading:0,preload:null};if(S=c.querySelector(jl(_)))C.loading=5;else{r=x({rel:"stylesheet",href:r,"data-precedence":s},a),(a=Yn.get(_))&&Im(r,a);var q=S=c.createElement("link");Nt(q),Xt(q,"link",r),q._p=new Promise(function(K,Z){q.onload=K,q.onerror=Z}),q.addEventListener("load",function(){C.loading|=1}),q.addEventListener("error",function(){C.loading|=2}),C.loading|=4,td(S,s,c)}S={type:"stylesheet",instance:S,count:1,state:C},v.set(_,S)}}}function Xw(r,s){ur.X(r,s);var a=sa;if(a&&r){var c=Ei(a).hoistableScripts,v=aa(r),_=c.get(v);_||(_=a.querySelector(Yl(v)),_||(r=x({src:r,async:!0},s),(s=Yn.get(v))&&Nm(r,s),_=a.createElement("script"),Nt(_),Xt(_,"link",r),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(v,_))}}function Zw(r,s){ur.M(r,s);var a=sa;if(a&&r){var c=Ei(a).hoistableScripts,v=aa(r),_=c.get(v);_||(_=a.querySelector(Yl(v)),_||(r=x({src:r,async:!0,type:"module"},s),(s=Yn.get(v))&&Nm(r,s),_=a.createElement("script"),Nt(_),Xt(_,"link",r),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(v,_))}}function Qv(r,s,a,c){var v=(v=ke.current)?ed(v):null;if(!v)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=oa(a.href),a=Ei(v).hoistableStyles,c=a.get(s),c||(c={type:"style",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){r=oa(a.href);var _=Ei(v).hoistableStyles,S=_.get(r);if(S||(v=v.ownerDocument||v,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,S),(_=v.querySelector(jl(r)))&&!_._p&&(S.instance=_,S.state.loading=5),Yn.has(r)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Yn.set(r,a),_||eC(v,r,a,S.state))),s&&c===null)throw Error(i(528,""));return S}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=aa(a),a=Ei(v).hoistableScripts,c=a.get(s),c||(c={type:"script",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function oa(r){return'href="'+fn(r)+'"'}function jl(r){return'link[rel="stylesheet"]['+r+"]"}function Wv(r){return x({},r,{"data-precedence":r.precedence,precedence:null})}function eC(r,s,a,c){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=r.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Xt(s,"link",a),Nt(s),r.head.appendChild(s))}function aa(r){return'[src="'+fn(r)+'"]'}function Yl(r){return"script[async]"+r}function Xv(r,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var c=r.querySelector('style[data-href~="'+fn(a.href)+'"]');if(c)return s.instance=c,Nt(c),c;var v=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),Nt(c),Xt(c,"style",v),td(c,a.precedence,r),s.instance=c;case"stylesheet":v=oa(a.href);var _=r.querySelector(jl(v));if(_)return s.state.loading|=4,s.instance=_,Nt(_),_;c=Wv(a),(v=Yn.get(v))&&Im(c,v),_=(r.ownerDocument||r).createElement("link"),Nt(_);var S=_;return S._p=new Promise(function(C,q){S.onload=C,S.onerror=q}),Xt(_,"link",c),s.state.loading|=4,td(_,a.precedence,r),s.instance=_;case"script":return _=aa(a.src),(v=r.querySelector(Yl(_)))?(s.instance=v,Nt(v),v):(c=a,(v=Yn.get(_))&&(c=x({},a),Nm(c,v)),r=r.ownerDocument||r,v=r.createElement("script"),Nt(v),Xt(v,"link",c),r.head.appendChild(v),s.instance=v);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,td(c,a.precedence,r));return s.instance}function td(r,s,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=c.length?c[c.length-1]:null,_=v,S=0;S<c.length;S++){var C=c[S];if(C.dataset.precedence===s)_=C;else if(_!==v)break}_?_.parentNode.insertBefore(r,_.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(r,s.firstChild))}function Im(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Nm(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var nd=null;function Zv(r,s,a){if(nd===null){var c=new Map,v=nd=new Map;v.set(a,c)}else v=nd,c=v.get(a),c||(c=new Map,v.set(a,c));if(c.has(r))return c;for(c.set(r,null),a=a.getElementsByTagName(r),v=0;v<a.length;v++){var _=a[v];if(!(_[Ti]||_[It]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var S=_.getAttribute(s)||"";S=r+S;var C=c.get(S);C?C.push(_):c.set(S,[_])}}return c}function e_(r,s,a){r=r.ownerDocument||r,r.head.insertBefore(a,s==="title"?r.querySelector("head > title"):null)}function tC(r,s,a){if(a===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function t_(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function nC(r,s,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var v=oa(c.href),_=s.querySelector(jl(v));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=id.bind(r),s.then(r,r)),a.state.loading|=4,a.instance=_,Nt(_);return}_=s.ownerDocument||s,c=Wv(c),(v=Yn.get(v))&&Im(c,v),_=_.createElement("link"),Nt(_);var S=_;S._p=new Promise(function(C,q){S.onload=C,S.onerror=q}),Xt(_,"link",c),a.instance=_}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(r.count++,a=id.bind(r),s.addEventListener("load",a),s.addEventListener("error",a))}}var Rm=0;function iC(r,s){return r.stylesheets&&r.count===0&&sd(r,r.stylesheets),0<r.count||0<r.imgCount?function(a){var c=setTimeout(function(){if(r.stylesheets&&sd(r,r.stylesheets),r.unsuspend){var _=r.unsuspend;r.unsuspend=null,_()}},6e4+s);0<r.imgBytes&&Rm===0&&(Rm=62500*Uw());var v=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&sd(r,r.stylesheets),r.unsuspend)){var _=r.unsuspend;r.unsuspend=null,_()}},(r.imgBytes>Rm?50:800)+s);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(c),clearTimeout(v)}}:null}function id(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sd(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var rd=null;function sd(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,rd=new Map,s.forEach(rC,r),rd=null,id.call(r))}function rC(r,s){if(!(s.state.loading&4)){var a=rd.get(r);if(a)var c=a.get(null);else{a=new Map,rd.set(r,a);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var S=v[_];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),c=S)}c&&a.set(null,c)}v=s.instance,S=v.getAttribute("data-precedence"),_=a.get(S)||c,_===c&&a.set(null,v),a.set(S,v),this.count++,c=id.bind(this),v.addEventListener("load",c),v.addEventListener("error",c),_?_.parentNode.insertBefore(v,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),s.state.loading|=4}}var Jl={$$typeof:j,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function sC(r,s,a,c,v,_,S,C,q){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vi(0),this.hiddenUpdates=vi(null),this.identifierPrefix=c,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function n_(r,s,a,c,v,_,S,C,q,K,Z,oe){return r=new sC(r,s,a,S,q,K,Z,oe,C),s=1,_===!0&&(s|=24),_=Sn(3,null,null,s),r.current=_,_.stateNode=r,s=uh(),s.refCount++,r.pooledCache=s,s.refCount++,_.memoizedState={element:c,isDehydrated:a,cache:s},hh(_),r}function i_(r){return r?(r=Oo,r):Oo}function r_(r,s,a,c,v,_){v=i_(v),c.context===null?c.context=v:c.pendingContext=v,c=Or(s),c.payload={element:a},_=_===void 0?null:_,_!==null&&(c.callback=_),a=qr(r,c,s),a!==null&&(vn(a,r,s),Al(a,r,s))}function s_(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function km(r,s){s_(r,s),(r=r.alternate)&&s_(r,s)}function o_(r){if(r.tag===13||r.tag===31){var s=Hs(r,67108864);s!==null&&vn(s,r,67108864),km(r,67108864)}}function a_(r){if(r.tag===13||r.tag===31){var s=Nn();s=Ms(s);var a=Hs(r,s);a!==null&&vn(a,r,s),km(r,s)}}var od=!0;function oC(r,s,a,c){var v=Q.T;Q.T=null;var _=ue.p;try{ue.p=2,Mm(r,s,a,c)}finally{ue.p=_,Q.T=v}}function aC(r,s,a,c){var v=Q.T;Q.T=null;var _=ue.p;try{ue.p=8,Mm(r,s,a,c)}finally{ue.p=_,Q.T=v}}function Mm(r,s,a,c){if(od){var v=Dm(c);if(v===null)vm(r,s,c,ad,a),u_(r,c);else if(uC(v,r,s,a,c))c.stopPropagation();else if(u_(r,c),s&4&&-1<lC.indexOf(r)){for(;v!==null;){var _=Vn(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var S=gi(_.pendingLanes);if(S!==0){var C=_;for(C.pendingLanes|=2,C.entangledLanes|=2;S;){var q=1<<31-xt(S);C.entanglements[1]|=q,S&=~q}Vi(_),(We&6)===0&&(Gc=un()+500,Fl(0))}}break;case 31:case 13:C=Hs(_,2),C!==null&&vn(C,_,2),jc(),km(_,2)}if(_=Dm(c),_===null&&vm(r,s,c,ad,a),_===v)break;v=_}v!==null&&c.stopPropagation()}else vm(r,s,c,null,a)}}function Dm(r){return r=Ln(r),Pm(r)}var ad=null;function Pm(r){if(ad=null,r=xi(r),r!==null){var s=l(r);if(s===null)r=null;else{var a=s.tag;if(a===13){if(r=u(s),r!==null)return r;r=null}else if(a===31){if(r=d(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return ad=r,null}function l_(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Is()){case Qa:return 2;case Wa:return 8;case br:case Bf:return 32;case qu:return 268435456;default:return 32}default:return 32}}var Vm=!1,Qr=null,Wr=null,Xr=null,Kl=new Map,$l=new Map,Zr=[],lC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function u_(r,s){switch(r){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":Kl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(s.pointerId)}}function Ql(r,s,a,c,v,_){return r===null||r.nativeEvent!==_?(r={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:_,targetContainers:[v]},s!==null&&(s=Vn(s),s!==null&&o_(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,v!==null&&s.indexOf(v)===-1&&s.push(v),r)}function uC(r,s,a,c,v){switch(s){case"focusin":return Qr=Ql(Qr,r,s,a,c,v),!0;case"dragenter":return Wr=Ql(Wr,r,s,a,c,v),!0;case"mouseover":return Xr=Ql(Xr,r,s,a,c,v),!0;case"pointerover":var _=v.pointerId;return Kl.set(_,Ql(Kl.get(_)||null,r,s,a,c,v)),!0;case"gotpointercapture":return _=v.pointerId,$l.set(_,Ql($l.get(_)||null,r,s,a,c,v)),!0}return!1}function c_(r){var s=xi(r.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){r.blockedOn=s,Xn(r.priority,function(){a_(a)});return}}else if(s===31){if(s=d(a),s!==null){r.blockedOn=s,Xn(r.priority,function(){a_(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ld(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=Dm(r.nativeEvent);if(a===null){a=r.nativeEvent;var c=new a.constructor(a.type,a);ul=c,a.target.dispatchEvent(c),ul=null}else return s=Vn(a),s!==null&&o_(s),r.blockedOn=a,!1;s.shift()}return!0}function d_(r,s,a){ld(r)&&a.delete(s)}function cC(){Vm=!1,Qr!==null&&ld(Qr)&&(Qr=null),Wr!==null&&ld(Wr)&&(Wr=null),Xr!==null&&ld(Xr)&&(Xr=null),Kl.forEach(d_),$l.forEach(d_)}function ud(r,s){r.blockedOn===s&&(r.blockedOn=null,Vm||(Vm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,cC)))}var cd=null;function f_(r){cd!==r&&(cd=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){cd===r&&(cd=null);for(var s=0;s<r.length;s+=3){var a=r[s],c=r[s+1],v=r[s+2];if(typeof c!="function"){if(Pm(c||a)===null)continue;break}var _=Vn(a);_!==null&&(r.splice(s,3),s-=3,Dh(_,{pending:!0,data:v,method:a.method,action:c},c,v))}}))}function la(r){function s(q){return ud(q,r)}Qr!==null&&ud(Qr,r),Wr!==null&&ud(Wr,r),Xr!==null&&ud(Xr,r),Kl.forEach(s),$l.forEach(s);for(var a=0;a<Zr.length;a++){var c=Zr[a];c.blockedOn===r&&(c.blockedOn=null)}for(;0<Zr.length&&(a=Zr[0],a.blockedOn===null);)c_(a),a.blockedOn===null&&Zr.shift();if(a=(r.ownerDocument||r).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var v=a[c],_=a[c+1],S=v[Gt]||null;if(typeof _=="function")S||f_(a);else if(S){var C=null;if(_&&_.hasAttribute("formAction")){if(v=_,S=_[Gt]||null)C=S.formAction;else if(Pm(v)!==null)continue}else C=S.action;typeof C=="function"?a[c+1]=C:(a.splice(c,3),c-=3),f_(a)}}}function h_(){function r(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(S){return v=S})},focusReset:"manual",scroll:"manual"})}function s(){v!==null&&(v(),v=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,v=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),v!==null&&(v(),v=null)}}}function Lm(r){this._internalRoot=r}dd.prototype.render=Lm.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,c=Nn();r_(a,c,r,s,null,null)},dd.prototype.unmount=Lm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;r_(r.current,2,null,r,null,null),jc(),s[_i]=null}};function dd(r){this._internalRoot=r}dd.prototype.unstable_scheduleHydration=function(r){if(r){var s=ju();r={blockedOn:null,target:r,priority:s};for(var a=0;a<Zr.length&&s!==0&&s<Zr[a].priority;a++);Zr.splice(a,0,r),a===0&&c_(r)}};var m_=e.version;if(m_!=="19.2.0")throw Error(i(527,m_,"19.2.0"));ue.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(s),r=r!==null?T(r):null,r=r===null?null:r.stateNode,r};var dC={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fd.isDisabled&&fd.supportsFiber)try{Qn=fd.inject(dC),Jt=fd}catch{}}return Xl.createRoot=function(r,s){if(!o(r))throw Error(i(299));var a=!1,c="",v=x0,_=E0,S=b0;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(v=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=n_(r,1,!1,null,null,a,c,null,v,_,S,h_),r[_i]=s.current,ym(r),new Lm(s)},Xl.hydrateRoot=function(r,s,a){if(!o(r))throw Error(i(299));var c=!1,v="",_=x0,S=E0,C=b0,q=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(v=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.formState!==void 0&&(q=a.formState)),s=n_(r,1,!0,s,a??null,c,v,q,_,S,C,h_),s.context=i_(null),a=s.current,c=Nn(),c=Ms(c),v=Or(c),v.callback=null,qr(a,v,c),a=c,s.current.lanes=a,Rs(s,a),Vi(s),r[_i]=s.current,ym(r),new dd(s)},Xl.version="19.2.0",Xl}var S_;function TC(){if(S_)return qm.exports;S_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),qm.exports=_C(),qm.exports}var xC=TC();const EC=Gp(xC),sf=({className:n,logoSrc:e})=>e?g.jsx("img",{src:e,alt:"Logo da Plataforma",className:n}):null,bC=n=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[g.jsx("path",{d:"M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z"}),g.jsx("path",{d:"M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z"})]}),AE=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})}),SC=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}),AC=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),wE=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),wC=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15a4.5 4.5 0 004.5 4.5H18a3.75 3.75 0 001.332-7.257 3 3 0 00-3.758-3.848 5.25 5.25 0 00-10.233 2.33A4.5 4.5 0 002.25 15z"})}),CC=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 100 15h8.25a5.25 5.25 0 000-10.5H12a7.5 7.5 0 00-1.5-6zm-3.375 9.75a.75.75 0 001.5 0v-2.25a.75.75 0 00-1.5 0v2.25zM10.5 18a.75.75 0 001.5 0v-2.25a.75.75 0 00-1.5 0v2.25zM13.875 15.75a.75.75 0 001.5 0v-2.25a.75.75 0 00-1.5 0v2.25z"})}),IC=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636m12.75 6.364a4.5 4.5 0 00-8.232-2.33A5.25 5.25 0 006.75 12H18a3.75 3.75 0 001.332-7.257 3 3 0 00-3.758-3.848z"})}),NC=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})}),RC=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12h12M6 12l3-3m-3 3l3 3m6-1.5a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5zm0 0a2.25 2.25 0 110-4.5 2.25 2.25 0 010 4.5z"})}),ao=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h6M9 11.25h6M9 15.75h6"})}),A_=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75V18.75m0 0a3.375 3.375 0 100-6.75 3.375 3.375 0 000 6.75zM12 6.75a3.375 3.375 0 110-6.75 3.375 3.375 0 010 6.75z"})}),kC=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...n,children:g.jsx("path",{fillRule:"evenodd",d:"M10 17a.75.75 0 01-.75-.75V5.612L6.22 8.646a.75.75 0 11-1.06-1.06l4.25-4.25a.75.75 0 011.06 0l4.25 4.25a.75.75 0 01-1.06 1.06L10.75 5.612V16.25a.75.75 0 01-.75.75z",clipRule:"evenodd"})}),MC=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...n,children:g.jsx("path",{fillRule:"evenodd",d:"M10 3a.75.75 0 01.75.75v10.638l3.03-3.03a.75.75 0 011.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.22 12.47a.75.75 0 011.06-1.06l3.03 3.03V3.75A.75.75 0 0110 3z",clipRule:"evenodd"})}),sp=n=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),of=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),ui=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),ga=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.572L16.5 21.75l-.398-1.178a3.375 3.375 0 00-2.455-2.456L12.75 18l1.178-.398a3.375 3.375 0 002.455-2.456L16.5 14.25l.398 1.178a3.375 3.375 0 002.456 2.456L20.25 18l-1.178.398a3.375 3.375 0 00-2.456 2.456z"})}),op=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.572L16.5 21.75l-.398-1.178a3.375 3.375 0 00-2.455-2.456L12.75 18l1.178-.398a3.375 3.375 0 002.455-2.456L16.5 14.25l.398 1.178a3.375 3.375 0 002.456 2.456L20.25 18l-1.178.398a3.375 3.375 0 00-2.456 2.456z"})}),Yp=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}),Da=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),af=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Pd=n=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.663M5.002 12a2.25 2.25 0 104.5 0 2.25 2.25 0 00-4.5 0z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12a2.25 2.25 0 104.5 0 2.25 2.25 0 00-4.5 0z"})]}),DC=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0h18M-4.5 12h22.5"})}),CE=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),IE=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})}),Pa=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0110.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0l.229 2.523a1.125 1.125 0 01-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0021 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 00-1.913-.247M6.34 18H5.25A2.25 2.25 0 013 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 011.913-.247m10.5 0a48.536 48.536 0 00-10.5 0M3.454 3.226c.523-1.383 1.954-2.31 3.454-2.31h9c1.5 0 2.931.927 3.454 2.31m0 0l-1.848 4.807A2.25 2.25 0 0115.636 10.5H8.364a2.25 2.25 0 01-2.22-2.467L4.302 3.226z"})}),hu=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),Gi=({className:n})=>g.jsxs("svg",{className:`animate-spin ${n}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),PC=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286z"})}),VC=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),NE=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),Jp=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),LC=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),RE=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25A1.125 1.125 0 019.75 19.875V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})}),UC=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),OC=n=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),qC=()=>{};var w_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},BC=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],u=n[t++],d=n[t++],m=((o&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|u&63)}}return e.join("")},ME={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],u=o+1<n.length,d=u?n[o+1]:0,m=o+2<n.length,f=m?n[o+2]:0,T=l>>2,x=(l&3)<<4|d>>4;let b=(d&15)<<2|f>>6,w=f&63;m||(w=64,u||(b=64)),i.push(t[T],t[x],t[b],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(kE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const f=o<n.length?t[n.charAt(o)]:64;++o;const x=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||f==null||x==null)throw new FC;const b=l<<2|d>>4;if(i.push(b),f!==64){const w=d<<4&240|f>>2;if(i.push(w),x!==64){const D=f<<6&192|x;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class FC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zC=function(n){const e=kE(n);return ME.encodeByteArray(e,!0)},Vd=function(n){return zC(n).replace(/\./g,"")},DE=function(n){try{return ME.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=()=>GC().__FIREBASE_DEFAULTS__,jC=()=>{if(typeof process>"u"||typeof w_>"u")return;const n=w_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},YC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&DE(n[1]);return e&&JSON.parse(e)},lf=()=>{try{return qC()||HC()||jC()||YC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},PE=n=>{var e,t;return(t=(e=lf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},JC=n=>{const e=PE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},VE=()=>{var n;return(n=lf())==null?void 0:n.config},LE=n=>{var e;return(e=lf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function UE(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Vd(JSON.stringify(t)),Vd(JSON.stringify(u)),""].join(".")}const ou={};function QC(){const n={prod:[],emulator:[]};for(const e of Object.keys(ou))ou[e]?n.emulator.push(e):n.prod.push(e);return n}function WC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let C_=!1;function OE(n,e){if(typeof window>"u"||typeof document>"u"||!Va(window.location.host)||ou[n]===e||ou[n]||C_)return;ou[n]=e;function t(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=QC().prod.length>0;function u(){const b=document.getElementById(i);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,w){b.setAttribute("width","24"),b.setAttribute("id",w),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function f(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{C_=!0,u()},b}function T(b,w){b.setAttribute("id",w),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function x(){const b=WC(i),w=t("text"),D=document.getElementById(w)||document.createElement("span"),L=t("learnmore"),O=document.getElementById(L)||document.createElement("a"),z=t("preprendIcon"),G=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const j=b.element;d(j),T(O,L);const ee=f();m(G,z),j.append(G,D,O,ee),document.body.appendChild(j)}l?(D.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function ZC(){var e;const n=(e=lf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function nI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iI(){const n=ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function rI(){return!ZC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sI(){try{return typeof indexedDB=="object"}catch{return!1}}function oI(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="FirebaseError";class Tr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=aI,Object.setPrototypeOf(this,Tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Su.prototype.create)}}class Su{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],u=l?lI(l,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Tr(o,d,i)}}function lI(n,e){return n.replace(uI,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const uI=/\{\$([^}]+)}/g;function cI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function lo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],u=e[o];if(I_(l)&&I_(u)){if(!lo(l,u))return!1}else if(l!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function I_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function eu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function tu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function dI(n,e){const t=new fI(n,e);return t.subscribe.bind(t)}class fI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");hI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Gm),o.error===void 0&&(o.error=Gm),o.complete===void 0&&(o.complete=Gm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Gm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(n){return n&&n._delegate?n._delegate:n}class uo{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new KC;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gI(e))try{this.getOrInitializeService({instanceIdentifier:io})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=io){return this.instances.has(e)}getOptions(e=io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:pI(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=io){return this.component?this.component.multipleInstances?e:io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pI(n){return n===io?void 0:n}function gI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new mI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ze||(ze={}));const vI={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},_I=ze.INFO,TI={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},xI=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=TI[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Kp{constructor(e){this.name=e,this._logLevel=_I,this._logHandler=xI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const EI=(n,e)=>e.some(t=>n instanceof t);let N_,R_;function bI(){return N_||(N_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SI(){return R_||(R_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qE=new WeakMap,ap=new WeakMap,BE=new WeakMap,Hm=new WeakMap,$p=new WeakMap;function AI(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(us(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&qE.set(t,n)}).catch(()=>{}),$p.set(e,n),e}function wI(n){if(ap.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});ap.set(n,e)}let lp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ap.get(n);if(e==="objectStoreNames")return n.objectStoreNames||BE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return us(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function CI(n){lp=n(lp)}function II(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(jm(this),e,...t);return BE.set(i,e.sort?e.sort():[e]),us(i)}:SI().includes(n)?function(...e){return n.apply(jm(this),e),us(qE.get(this))}:function(...e){return us(n.apply(jm(this),e))}}function NI(n){return typeof n=="function"?II(n):(n instanceof IDBTransaction&&wI(n),EI(n,bI())?new Proxy(n,lp):n)}function us(n){if(n instanceof IDBRequest)return AI(n);if(Hm.has(n))return Hm.get(n);const e=NI(n);return e!==n&&(Hm.set(n,e),$p.set(e,n)),e}const jm=n=>$p.get(n);function RI(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const u=indexedDB.open(n,e),d=us(u);return i&&u.addEventListener("upgradeneeded",m=>{i(us(u.result),m.oldVersion,m.newVersion,us(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",f=>o(f.oldVersion,f.newVersion,f))}).catch(()=>{}),d}const kI=["get","getKey","getAll","getAllKeys","count"],MI=["put","add","delete","clear"],Ym=new Map;function k_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ym.get(e))return Ym.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=MI.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||kI.includes(t)))return;const l=async function(u,...d){const m=this.transaction(u,o?"readwrite":"readonly");let f=m.store;return i&&(f=f.index(d.shift())),(await Promise.all([f[t](...d),o&&m.done]))[0]};return Ym.set(e,l),l}CI(n=>({...n,get:(e,t,i)=>k_(e,t)||n.get(e,t,i),has:(e,t)=>!!k_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(PI(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function PI(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const up="@firebase/app",M_="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new Kp("@firebase/app"),VI="@firebase/app-compat",LI="@firebase/analytics-compat",UI="@firebase/analytics",OI="@firebase/app-check-compat",qI="@firebase/app-check",BI="@firebase/auth",FI="@firebase/auth-compat",zI="@firebase/database",GI="@firebase/data-connect",HI="@firebase/database-compat",jI="@firebase/functions",YI="@firebase/functions-compat",JI="@firebase/installations",KI="@firebase/installations-compat",$I="@firebase/messaging",QI="@firebase/messaging-compat",WI="@firebase/performance",XI="@firebase/performance-compat",ZI="@firebase/remote-config",e1="@firebase/remote-config-compat",t1="@firebase/storage",n1="@firebase/storage-compat",i1="@firebase/firestore",r1="@firebase/ai",s1="@firebase/firestore-compat",o1="firebase",a1="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="[DEFAULT]",l1={[up]:"fire-core",[VI]:"fire-core-compat",[UI]:"fire-analytics",[LI]:"fire-analytics-compat",[qI]:"fire-app-check",[OI]:"fire-app-check-compat",[BI]:"fire-auth",[FI]:"fire-auth-compat",[zI]:"fire-rtdb",[GI]:"fire-data-connect",[HI]:"fire-rtdb-compat",[jI]:"fire-fn",[YI]:"fire-fn-compat",[JI]:"fire-iid",[KI]:"fire-iid-compat",[$I]:"fire-fcm",[QI]:"fire-fcm-compat",[WI]:"fire-perf",[XI]:"fire-perf-compat",[ZI]:"fire-rc",[e1]:"fire-rc-compat",[t1]:"fire-gcs",[n1]:"fire-gcs-compat",[i1]:"fire-fst",[s1]:"fire-fst-compat",[r1]:"fire-vertex","fire-js":"fire-js",[o1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld=new Map,u1=new Map,dp=new Map;function D_(n,e){try{n.container.addComponent(e)}catch(t){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wa(n){const e=n.name;if(dp.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;dp.set(e,n);for(const t of Ld.values())D_(t,n);for(const t of u1.values())D_(t,n);return!0}function Qp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Jn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cs=new Su("app","Firebase",c1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new uo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La=a1;function FE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:cp,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw cs.create("bad-app-name",{appName:String(o)});if(t||(t=VE()),!t)throw cs.create("no-options");const l=Ld.get(o);if(l){if(lo(t,l.options)&&lo(i,l.config))return l;throw cs.create("duplicate-app",{appName:o})}const u=new yI(o);for(const m of dp.values())u.addComponent(m);const d=new d1(t,i,u);return Ld.set(o,d),d}function zE(n=cp){const e=Ld.get(n);if(!e&&n===cp&&VE())return FE();if(!e)throw cs.create("no-app",{appName:n});return e}function ds(n,e,t){let i=l1[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(u.join(" "));return}wa(new uo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="firebase-heartbeat-database",h1=1,mu="firebase-heartbeat-store";let Jm=null;function GE(){return Jm||(Jm=RI(f1,h1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(mu)}catch(t){console.warn(t)}}}}).catch(n=>{throw cs.create("idb-open",{originalErrorMessage:n.message})})),Jm}async function m1(n){try{const t=(await GE()).transaction(mu),i=await t.objectStore(mu).get(HE(n));return await t.done,i}catch(e){if(e instanceof Tr)pr.warn(e.message);else{const t=cs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pr.warn(t.message)}}}async function P_(n,e){try{const i=(await GE()).transaction(mu,"readwrite");await i.objectStore(mu).put(e,HE(n)),await i.done}catch(t){if(t instanceof Tr)pr.warn(t.message);else{const i=cs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});pr.warn(i.message)}}}function HE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=1024,g1=30;class y1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _1(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=V_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>g1){const u=T1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){pr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=V_(),{heartbeatsToSend:i,unsentEntries:o}=v1(this._heartbeatsCache.heartbeats),l=Vd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return pr.warn(t),""}}}function V_(){return new Date().toISOString().substring(0,10)}function v1(n,e=p1){const t=[];let i=n.slice();for(const o of n){const l=t.find(u=>u.agent===o.agent);if(l){if(l.dates.push(o.date),L_(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),L_(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class _1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sI()?oI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await m1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return P_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return P_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function L_(n){return Vd(JSON.stringify({version:2,heartbeats:n})).length}function T1(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(n){wa(new uo("platform-logger",e=>new DI(e),"PRIVATE")),wa(new uo("heartbeat",e=>new y1(e),"PRIVATE")),ds(up,M_,n),ds(up,M_,"esm2020"),ds("fire-js","")}x1("");function jE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const E1=jE,YE=new Su("auth","Firebase",jE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=new Kp("@firebase/auth");function b1(n,...e){Ud.logLevel<=ze.WARN&&Ud.warn(`Auth (${La}): ${n}`,...e)}function Ed(n,...e){Ud.logLevel<=ze.ERROR&&Ud.error(`Auth (${La}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(n,...e){throw Wp(n,...e)}function Ui(n,...e){return Wp(n,...e)}function JE(n,e,t){const i={...E1(),[e]:t};return new Su("auth","Firebase",i).create(e,{appName:n.name})}function hr(n){return JE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return YE.create(n,...e)}function Ae(n,e,...t){if(!n)throw Wp(e,...t)}function dr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ed(e),new Error(e)}function gr(n,e){n||dr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function S1(){return U_()==="http:"||U_()==="https:"}function U_(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(S1()||tI()||"connection"in navigator)?navigator.onLine:!0}function w1(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,t){this.shortDelay=e,this.longDelay=t,gr(t>e,"Short delay should be less than long delay!"),this.isMobile=XC()||nI()}get(){return A1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(n,e){gr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],N1=new wu(3e4,6e4);function xs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Es(n,e,t,i,o={}){return $E(n,o,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const d=Au({key:n.config.apiKey,...u}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:m,...l};return eI()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Va(n.emulatorConfig.host)&&(f.credentials="include"),KE.fetch()(await QE(n,n.config.apiHost,t,d),f)})}async function $E(n,e,t){n._canInitEmulator=!1;const i={...C1,...e};try{const o=new k1(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw hd(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const d=l.ok?u.errorMessage:u.error.message,[m,f]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw hd(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw hd(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw hd(n,"user-disabled",u);const T=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw JE(n,T,f);ci(n,T)}}catch(o){if(o instanceof Tr)throw o;ci(n,"network-request-failed",{message:String(o)})}}async function Cu(n,e,t,i,o={}){const l=await Es(n,e,t,i,o);return"mfaPendingCredential"in l&&ci(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function QE(n,e,t,i){const o=`${e}${t}?${i}`,l=n,u=l.config.emulator?Xp(n.config,o):`${n.config.apiScheme}://${o}`;return I1.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function R1(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class k1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ui(this.auth,"network-request-failed")),N1.get())})}}function hd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Ui(n,e,i);return o.customData._tokenResponse=t,o}function O_(n){return n!==void 0&&n.enterprise!==void 0}class M1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return R1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function D1(n,e){return Es(n,"GET","/v2/recaptchaConfig",xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P1(n,e){return Es(n,"POST","/v1/accounts:delete",e)}async function Od(n,e){return Es(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function V1(n,e=!1){const t=zt(n),i=await t.getIdToken(e),o=Zp(i);Ae(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:au(Km(o.auth_time)),issuedAtTime:au(Km(o.iat)),expirationTime:au(Km(o.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Km(n){return Number(n)*1e3}function Zp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Ed("JWT malformed, contained fewer than 3 sections"),null;try{const o=DE(t);return o?JSON.parse(o):(Ed("Failed to decode base64 JWT payload"),null)}catch(o){return Ed("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function q_(n){const e=Zp(n);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Tr&&L1(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function L1({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qd(n){var x;const e=n.auth,t=await n.getIdToken(),i=await pu(n,Od(e,{idToken:t}));Ae(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const l=(x=o.providerUserInfo)!=null&&x.length?WE(o.providerUserInfo):[],u=q1(n.providerData,l),d=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),f=d?m:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new hp(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(n,T)}async function O1(n){const e=zt(n);await qd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function q1(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function WE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(n,e){const t=await $E(n,{},async()=>{const i=Au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,u=await QE(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:i};return n.emulatorConfig&&Va(n.emulatorConfig.host)&&(m.credentials="include"),KE.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function F1(n,e){return Es(n,"POST","/v2/accounts:revokeToken",xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):q_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=q_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await B1(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,u=new ya;return i&&(Ae(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ae(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),l&&(Ae(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ya,this.toJSON())}_performRefresh(){return dr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(n,e){Ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class li{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new U1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new hp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await pu(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return V1(this,e)}reload(){return O1(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new li({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await qd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jn(this.auth.app))return Promise.reject(hr(this.auth));const e=await this.getIdToken();return await pu(this,P1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,f=t.createdAt??void 0,T=t.lastLoginAt??void 0,{uid:x,emailVerified:b,isAnonymous:w,providerData:D,stsTokenManager:L}=t;Ae(x&&L,e,"internal-error");const O=ya.fromJSON(this.name,L);Ae(typeof x=="string",e,"internal-error"),ts(i,e.name),ts(o,e.name),Ae(typeof b=="boolean",e,"internal-error"),Ae(typeof w=="boolean",e,"internal-error"),ts(l,e.name),ts(u,e.name),ts(d,e.name),ts(m,e.name),ts(f,e.name),ts(T,e.name);const z=new li({uid:x,auth:e,email:o,emailVerified:b,displayName:i,isAnonymous:w,photoURL:u,phoneNumber:l,tenantId:d,stsTokenManager:O,createdAt:f,lastLoginAt:T});return D&&Array.isArray(D)&&(z.providerData=D.map(G=>({...G}))),m&&(z._redirectEventId=m),z}static async _fromIdTokenResponse(e,t,i=!1){const o=new ya;o.updateFromServerResponse(t);const l=new li({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await qd(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ae(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?WE(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new ya;d.updateFromIdToken(i);const m=new li({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new hp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,f),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_=new Map;function fr(n){gr(n instanceof Function,"Expected a class definition");let e=B_.get(n);return e?(gr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,B_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}XE.type="NONE";const F_=XE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(n,e,t){return`firebase:${n}:${e}:${t}`}class va{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=bd(this.userKey,o.apiKey,l),this.fullPersistenceKey=bd("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Od(this.auth,{idToken:e}).catch(()=>{});return t?li._fromGetAccountInfoResponse(this.auth,t,e):null}return li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new va(fr(F_),e,i);const o=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let l=o[0]||fr(F_);const u=bd(i,e.config.apiKey,e.name);let d=null;for(const f of t)try{const T=await f._get(u);if(T){let x;if(typeof T=="string"){const b=await Od(e,{idToken:T}).catch(()=>{});if(!b)break;x=await li._fromGetAccountInfoResponse(e,b,T)}else x=li._fromJSON(e,T);f!==l&&(d=x),l=f;break}}catch{}const m=o.filter(f=>f._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new va(l,e,i):(l=m[0],d&&await l._set(u,d.toJSON()),await Promise.all(t.map(async f=>{if(f!==l)try{await f._remove(u)}catch{}})),new va(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rb(e))return"Blackberry";if(sb(e))return"Webos";if(eb(e))return"Safari";if((e.includes("chrome/")||tb(e))&&!e.includes("edge/"))return"Chrome";if(ib(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function ZE(n=ln()){return/firefox\//i.test(n)}function eb(n=ln()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tb(n=ln()){return/crios\//i.test(n)}function nb(n=ln()){return/iemobile/i.test(n)}function ib(n=ln()){return/android/i.test(n)}function rb(n=ln()){return/blackberry/i.test(n)}function sb(n=ln()){return/webos/i.test(n)}function eg(n=ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function z1(n=ln()){var e;return eg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function G1(){return iI()&&document.documentMode===10}function ob(n=ln()){return eg(n)||ib(n)||sb(n)||rb(n)||/windows phone/i.test(n)||nb(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(n,e=[]){let t;switch(n){case"Browser":t=z_(ln());break;case"Worker":t=`${z_(ln())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${La}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,d)=>{try{const m=e(l);u(m)}catch(m){d(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j1(n,e={}){return Es(n,"GET","/v2/passwordPolicy",xs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=6;class J1{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Y1,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new G_(this),this.idTokenSubscription=new G_(this),this.beforeStateQueue=new H1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fr(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await va.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Od(this,{idToken:e}),i=await li._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Jn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===d)&&(m!=null&&m.user)&&(i=m.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await qd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=w1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jn(this.app))return Promise.reject(hr(this));const t=e?zt(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jn(this.app)?Promise.reject(hr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jn(this.app)?Promise.reject(hr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await j1(this),t=new J1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Su("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await F1(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fr(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await va.create(this,[fr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(d,this,"internal-error"),d.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ab(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&b1(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function yo(n){return zt(n)}class G_{constructor(e){this.auth=e,this.observer=null,this.addObserver=dI(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $1(n){uf=n}function lb(n){return uf.loadJS(n)}function Q1(){return uf.recaptchaEnterpriseScript}function W1(){return uf.gapiScript}function X1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Z1{constructor(){this.enterprise=new eN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class eN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const tN="recaptcha-enterprise",ub="NO_RECAPTCHA";class nN{constructor(e){this.type=tN,this.auth=yo(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,d)=>{D1(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const f=new M1(m);return l.tenantId==null?l._agentRecaptchaConfig=f:l._tenantRecaptchaConfigs[l.tenantId]=f,u(f.siteKey)}}).catch(m=>{d(m)})})}function o(l,u,d){const m=window.grecaptcha;O_(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(f=>{u(f)}).catch(()=>{u(ub)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Z1().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{i(this.auth).then(d=>{if(!t&&O_(window.grecaptcha))o(d,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=Q1();m.length!==0&&(m+=d),lb(m).then(()=>{o(d,l,u)}).catch(f=>{u(f)})}}).catch(d=>{u(d)})})}}async function H_(n,e,t,i=!1,o=!1){const l=new nN(n);let u;if(o)u=ub;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,f=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function mp(n,e,t,i,o){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await H_(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await H_(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(n,e){const t=Qp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(lo(l,e??{}))return o;ci(o,"already-initialized")}return t.initialize({options:e})}function rN(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(fr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function sN(n,e,t){const i=yo(n);Ae(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=cb(e),{host:u,port:d}=oN(e),m=d===null?"":`:${d}`,f={url:`${l}//${u}${m}/`},T=Object.freeze({host:u,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ae(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ae(lo(f,i.config.emulator)&&lo(T,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=T,i.settings.appVerificationDisabledForTesting=!0,Va(u)?(UE(`${l}//${u}${m}`),OE("Auth",!0)):aN()}function cb(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function oN(n){const e=cb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:j_(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:j_(u)}}}function j_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function aN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return dr("not implemented")}_getIdTokenResponse(e){return dr("not implemented")}_linkToIdToken(e,t){return dr("not implemented")}_getReauthenticationResolver(e){return dr("not implemented")}}async function lN(n,e){return Es(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(n,e){return Cu(n,"POST","/v1/accounts:signInWithPassword",xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(n,e){return Cu(n,"POST","/v1/accounts:signInWithEmailLink",xs(n,e))}async function dN(n,e){return Cu(n,"POST","/v1/accounts:signInWithEmailLink",xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends tg{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new gu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new gu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mp(e,t,"signInWithPassword",uN);case"emailLink":return cN(e,{email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mp(e,i,"signUpPassword",lN);case"emailLink":return dN(e,{idToken:t,email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _a(n,e){return Cu(n,"POST","/v1/accounts:signInWithIdp",xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="http://localhost";class co extends tg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new co(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ci("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const u=new co(i,o);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return _a(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,_a(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_a(e,t)}buildRequest(){const e={requestUri:fN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Au(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mN(n){const e=eu(tu(n)).link,t=e?eu(tu(e)).deep_link_id:null,i=eu(tu(n)).deep_link_id;return(i?eu(tu(i)).link:null)||i||t||e||n}class ng{constructor(e){const t=eu(tu(e)),i=t.apiKey??null,o=t.oobCode??null,l=hN(t.mode??null);Ae(i&&o&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=mN(e);try{return new ng(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.providerId=Ua.PROVIDER_ID}static credential(e,t){return gu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=ng.parseLink(t);return Ae(i,"argument-error"),gu._fromEmailAndCode(e,i.code,i.tenantId)}}Ua.PROVIDER_ID="password";Ua.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ua.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends db{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends Iu{constructor(){super("facebook.com")}static credential(e){return co._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.FACEBOOK_SIGN_IN_METHOD="facebook.com";is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Iu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return co._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return rs.credential(t,i)}catch{return null}}}rs.GOOGLE_SIGN_IN_METHOD="google.com";rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Iu{constructor(){super("github.com")}static credential(e){return co._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.GITHUB_SIGN_IN_METHOD="github.com";ss.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends Iu{constructor(){super("twitter.com")}static credential(e,t){return co._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return os.credential(t,i)}catch{return null}}}os.TWITTER_SIGN_IN_METHOD="twitter.com";os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(n,e){return Cu(n,"POST","/v1/accounts:signUp",xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await li._fromIdTokenResponse(e,i,o),u=Y_(i);return new fo({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Y_(i);return new fo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Y_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd extends Tr{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Bd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Bd(e,t,i,o)}}function fb(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Bd._fromErrorAndOperation(n,l,e,i):l})}async function gN(n,e,t=!1){const i=await pu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return fo._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(n,e,t=!1){const{auth:i}=n;if(Jn(i.app))return Promise.reject(hr(i));const o="reauthenticate";try{const l=await pu(n,fb(i,o,e,n),t);Ae(l.idToken,i,"internal-error");const u=Zp(l.idToken);Ae(u,i,"internal-error");const{sub:d}=u;return Ae(n.uid===d,i,"user-mismatch"),fo._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ci(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hb(n,e,t=!1){if(Jn(n.app))return Promise.reject(hr(n));const i="signIn",o=await fb(n,i,e),l=await fo._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}async function vN(n,e){return hb(yo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mb(n){const e=yo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function pb(n,e,t){if(Jn(n.app))return Promise.reject(hr(n));const i=yo(n),u=await mp(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pN).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&mb(n),m}),d=await fo._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function _N(n,e,t){return Jn(n.app)?Promise.reject(hr(n)):vN(zt(n),Ua.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&mb(n),i})}function TN(n,e,t,i){return zt(n).onIdTokenChanged(e,t,i)}function xN(n,e,t){return zt(n).beforeAuthStateChanged(e,t)}function EN(n,e,t,i){return zt(n).onAuthStateChanged(e,t,i)}function bN(n){return zt(n).signOut()}const Fd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Fd,"1"),this.storage.removeItem(Fd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=1e3,AN=10;class yb extends gb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ob(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,m)=>{this.notifyListeners(u,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);G1()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,AN):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},SN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}yb.type="LOCAL";const wN=yb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb extends gb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vb.type="SESSION";const _b=vb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new cf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async f=>f(t.origin,l)),m=await CN(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,u;return new Promise((d,m)=>{const f=ig("",20);o.port1.start();const T=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(x){const b=x;if(b.data.eventId===f)switch(b.data.status){case"ack":clearTimeout(T),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(T),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return window}function NN(n){Oi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function RN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kN(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function MN(){return Tb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="firebaseLocalStorageDb",DN=1,zd="firebaseLocalStorage",Eb="fbase_key";class Nu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function df(n,e){return n.transaction([zd],e?"readwrite":"readonly").objectStore(zd)}function PN(){const n=indexedDB.deleteDatabase(xb);return new Nu(n).toPromise()}function pp(){const n=indexedDB.open(xb,DN);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(zd,{keyPath:Eb})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(zd)?e(i):(i.close(),await PN(),e(await pp()))})})}async function J_(n,e,t){const i=df(n,!0).put({[Eb]:e,value:t});return new Nu(i).toPromise()}async function VN(n,e){const t=df(n,!1).get(e),i=await new Nu(t).toPromise();return i===void 0?null:i.value}function K_(n,e){const t=df(n,!0).delete(e);return new Nu(t).toPromise()}const LN=800,UN=3;class bb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>UN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Tb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cf._getInstance(MN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await RN(),!this.activeServiceWorker)return;this.sender=new IN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pp();return await J_(e,Fd,"1"),await K_(e,Fd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>J_(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>VN(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>K_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=df(o,!1).getAll();return new Nu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bb.type="LOCAL";const ON=bb;new wu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(n,e){return e?fr(e):(Ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg extends tg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _a(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _a(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _a(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function BN(n){return hb(n.auth,new rg(n),n.bypassAuthState)}function FN(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),yN(t,new rg(n),n.bypassAuthState)}async function zN(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),gN(t,new rg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:u,type:d}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BN;case"linkViaPopup":case"linkViaRedirect":return zN;case"reauthViaPopup":case"reauthViaRedirect":return FN;default:ci(this.auth,"internal-error")}}resolve(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=new wu(2e3,1e4);class ma extends Sb{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,ma.currentPopupAction&&ma.currentPopupAction.cancel(),ma.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){gr(this.filter.length===1,"Popup operations only handle one event");const e=ig();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ui(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ma.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ui(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GN.get())};e()}}ma.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="pendingRedirect",Sd=new Map;class jN extends Sb{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Sd.get(this.auth._key());if(!e){try{const i=await YN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Sd.set(this.auth._key(),e)}return this.bypassAuthState||Sd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YN(n,e){const t=$N(e),i=KN(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function JN(n,e){Sd.set(n._key(),e)}function KN(n){return fr(n._redirectPersistence)}function $N(n){return bd(HN,n.config.apiKey,n.name)}async function QN(n,e,t=!1){if(Jn(n.app))return Promise.reject(hr(n));const i=yo(n),o=qN(i,e),u=await new jN(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=600*1e3;class XN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Ab(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ui(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WN&&this.cachedEventUids.clear(),this.cachedEventUids.has($_(e))}saveEventToCache(e){this.cachedEventUids.add($_(e)),this.lastProcessedEventTime=Date.now()}}function $_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Ab({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ZN(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ab(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(n,e={}){return Es(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nR=/^https?/;async function iR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await eR(n);for(const t of e)try{if(rR(t))return}catch{}ci(n,"unauthorized-domain")}function rR(n){const e=fp(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!nR.test(t))return!1;if(tR.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=new wu(3e4,6e4);function Q_(){const n=Oi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function oR(n){return new Promise((e,t)=>{var o,l,u;function i(){Q_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Q_(),t(Ui(n,"network-request-failed"))},timeout:sR.get()})}if((l=(o=Oi().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=Oi().gapi)!=null&&u.load)i();else{const d=X1("iframefcb");return Oi()[d]=()=>{gapi.load?i():t(Ui(n,"network-request-failed"))},lb(`${W1()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw Ad=null,e})}let Ad=null;function aR(n){return Ad=Ad||oR(n),Ad}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=new wu(5e3,15e3),uR="__/auth/iframe",cR="emulator/auth/iframe",dR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hR(n){const e=n.config;Ae(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Xp(e,cR):`https://${n.config.authDomain}/${uR}`,i={apiKey:e.apiKey,appName:n.name,v:La},o=fR.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Au(i).slice(1)}`}async function mR(n){const e=await aR(n),t=Oi().gapi;return Ae(t,n,"internal-error"),e.open({where:document.body,url:hR(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dR,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const u=Ui(n,"network-request-failed"),d=Oi().setTimeout(()=>{l(u)},lR.get());function m(){Oi().clearTimeout(d),o(i)}i.ping(m).then(m,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gR=500,yR=600,vR="_blank",_R="http://localhost";class W_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TR(n,e,t,i=gR,o=yR){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const m={...pR,width:i.toString(),height:o.toString(),top:l,left:u},f=ln().toLowerCase();t&&(d=tb(f)?vR:t),ZE(f)&&(e=e||_R,m.scrollbars="yes");const T=Object.entries(m).reduce((b,[w,D])=>`${b}${w}=${D},`,"");if(z1(f)&&d!=="_self")return xR(e||"",d),new W_(null);const x=window.open(e||"",d,T);Ae(x,n,"popup-blocked");try{x.focus()}catch{}return new W_(x)}function xR(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER="__/auth/handler",bR="emulator/auth/handler",SR=encodeURIComponent("fac");async function X_(n,e,t,i,o,l){Ae(n.config.authDomain,n,"auth-domain-config-required"),Ae(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:La,eventId:o};if(e instanceof db){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",cI(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,x]of Object.entries({}))u[T]=x}if(e instanceof Iu){const T=e.getScopes().filter(x=>x!=="");T.length>0&&(u.scopes=T.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const T of Object.keys(d))d[T]===void 0&&delete d[T];const m=await n._getAppCheckToken(),f=m?`#${SR}=${encodeURIComponent(m)}`:"";return`${AR(n)}?${Au(d).slice(1)}${f}`}function AR({config:n}){return n.emulator?Xp(n,bR):`https://${n.authDomain}/${ER}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="webStorageSupport";class wR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_b,this._completeRedirectFn=QN,this._overrideRedirectResult=JN}async _openPopup(e,t,i,o){var u;gr((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await X_(e,t,i,fp(),o);return TR(e,l,ig())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await X_(e,t,i,fp(),o);return NN(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(gr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await mR(e),i=new XN(e);return t.register("authEvent",o=>(Ae(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($m,{type:$m},o=>{var u;const l=(u=o==null?void 0:o[0])==null?void 0:u[$m];l!==void 0&&t(!!l),ci(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=iR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ob()||eb()||eg()}}const CR=wR;var Z_="@firebase/auth",eT="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RR(n){wa(new uo("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ae(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ab(n)},f=new K1(i,o,l,m);return rN(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),wa(new uo("auth-internal",e=>{const t=yo(e.getProvider("auth").getImmediate());return(i=>new IR(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ds(Z_,eT,NR(n)),ds(Z_,eT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=300,MR=LE("authIdTokenMaxAge")||kR;let tT=null;const DR=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>MR)return;const o=t==null?void 0:t.token;tT!==o&&(tT=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function PR(n=zE()){const e=Qp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=iN(n,{popupRedirectResolver:CR,persistence:[ON,wN,_b]}),i=LE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=DR(l.toString());xN(t,u,()=>u(t.currentUser)),TN(t,d=>u(d))}}const o=PE("auth");return o&&sN(t,`http://${o}`),t}function VR(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}$1({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=Ui("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",VR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RR("Browser");var nT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fs,wb;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,R){function k(){}k.prototype=R.prototype,N.F=R.prototype,N.prototype=new k,N.prototype.constructor=N,N.D=function(P,V,U){for(var M=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)M[ce-2]=arguments[ce];return R.prototype[V].apply(P,M)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,R,k){k||(k=0);const P=Array(16);if(typeof R=="string")for(var V=0;V<16;++V)P[V]=R.charCodeAt(k++)|R.charCodeAt(k++)<<8|R.charCodeAt(k++)<<16|R.charCodeAt(k++)<<24;else for(V=0;V<16;++V)P[V]=R[k++]|R[k++]<<8|R[k++]<<16|R[k++]<<24;R=N.g[0],k=N.g[1],V=N.g[2];let U=N.g[3],M;M=R+(U^k&(V^U))+P[0]+3614090360&4294967295,R=k+(M<<7&4294967295|M>>>25),M=U+(V^R&(k^V))+P[1]+3905402710&4294967295,U=R+(M<<12&4294967295|M>>>20),M=V+(k^U&(R^k))+P[2]+606105819&4294967295,V=U+(M<<17&4294967295|M>>>15),M=k+(R^V&(U^R))+P[3]+3250441966&4294967295,k=V+(M<<22&4294967295|M>>>10),M=R+(U^k&(V^U))+P[4]+4118548399&4294967295,R=k+(M<<7&4294967295|M>>>25),M=U+(V^R&(k^V))+P[5]+1200080426&4294967295,U=R+(M<<12&4294967295|M>>>20),M=V+(k^U&(R^k))+P[6]+2821735955&4294967295,V=U+(M<<17&4294967295|M>>>15),M=k+(R^V&(U^R))+P[7]+4249261313&4294967295,k=V+(M<<22&4294967295|M>>>10),M=R+(U^k&(V^U))+P[8]+1770035416&4294967295,R=k+(M<<7&4294967295|M>>>25),M=U+(V^R&(k^V))+P[9]+2336552879&4294967295,U=R+(M<<12&4294967295|M>>>20),M=V+(k^U&(R^k))+P[10]+4294925233&4294967295,V=U+(M<<17&4294967295|M>>>15),M=k+(R^V&(U^R))+P[11]+2304563134&4294967295,k=V+(M<<22&4294967295|M>>>10),M=R+(U^k&(V^U))+P[12]+1804603682&4294967295,R=k+(M<<7&4294967295|M>>>25),M=U+(V^R&(k^V))+P[13]+4254626195&4294967295,U=R+(M<<12&4294967295|M>>>20),M=V+(k^U&(R^k))+P[14]+2792965006&4294967295,V=U+(M<<17&4294967295|M>>>15),M=k+(R^V&(U^R))+P[15]+1236535329&4294967295,k=V+(M<<22&4294967295|M>>>10),M=R+(V^U&(k^V))+P[1]+4129170786&4294967295,R=k+(M<<5&4294967295|M>>>27),M=U+(k^V&(R^k))+P[6]+3225465664&4294967295,U=R+(M<<9&4294967295|M>>>23),M=V+(R^k&(U^R))+P[11]+643717713&4294967295,V=U+(M<<14&4294967295|M>>>18),M=k+(U^R&(V^U))+P[0]+3921069994&4294967295,k=V+(M<<20&4294967295|M>>>12),M=R+(V^U&(k^V))+P[5]+3593408605&4294967295,R=k+(M<<5&4294967295|M>>>27),M=U+(k^V&(R^k))+P[10]+38016083&4294967295,U=R+(M<<9&4294967295|M>>>23),M=V+(R^k&(U^R))+P[15]+3634488961&4294967295,V=U+(M<<14&4294967295|M>>>18),M=k+(U^R&(V^U))+P[4]+3889429448&4294967295,k=V+(M<<20&4294967295|M>>>12),M=R+(V^U&(k^V))+P[9]+568446438&4294967295,R=k+(M<<5&4294967295|M>>>27),M=U+(k^V&(R^k))+P[14]+3275163606&4294967295,U=R+(M<<9&4294967295|M>>>23),M=V+(R^k&(U^R))+P[3]+4107603335&4294967295,V=U+(M<<14&4294967295|M>>>18),M=k+(U^R&(V^U))+P[8]+1163531501&4294967295,k=V+(M<<20&4294967295|M>>>12),M=R+(V^U&(k^V))+P[13]+2850285829&4294967295,R=k+(M<<5&4294967295|M>>>27),M=U+(k^V&(R^k))+P[2]+4243563512&4294967295,U=R+(M<<9&4294967295|M>>>23),M=V+(R^k&(U^R))+P[7]+1735328473&4294967295,V=U+(M<<14&4294967295|M>>>18),M=k+(U^R&(V^U))+P[12]+2368359562&4294967295,k=V+(M<<20&4294967295|M>>>12),M=R+(k^V^U)+P[5]+4294588738&4294967295,R=k+(M<<4&4294967295|M>>>28),M=U+(R^k^V)+P[8]+2272392833&4294967295,U=R+(M<<11&4294967295|M>>>21),M=V+(U^R^k)+P[11]+1839030562&4294967295,V=U+(M<<16&4294967295|M>>>16),M=k+(V^U^R)+P[14]+4259657740&4294967295,k=V+(M<<23&4294967295|M>>>9),M=R+(k^V^U)+P[1]+2763975236&4294967295,R=k+(M<<4&4294967295|M>>>28),M=U+(R^k^V)+P[4]+1272893353&4294967295,U=R+(M<<11&4294967295|M>>>21),M=V+(U^R^k)+P[7]+4139469664&4294967295,V=U+(M<<16&4294967295|M>>>16),M=k+(V^U^R)+P[10]+3200236656&4294967295,k=V+(M<<23&4294967295|M>>>9),M=R+(k^V^U)+P[13]+681279174&4294967295,R=k+(M<<4&4294967295|M>>>28),M=U+(R^k^V)+P[0]+3936430074&4294967295,U=R+(M<<11&4294967295|M>>>21),M=V+(U^R^k)+P[3]+3572445317&4294967295,V=U+(M<<16&4294967295|M>>>16),M=k+(V^U^R)+P[6]+76029189&4294967295,k=V+(M<<23&4294967295|M>>>9),M=R+(k^V^U)+P[9]+3654602809&4294967295,R=k+(M<<4&4294967295|M>>>28),M=U+(R^k^V)+P[12]+3873151461&4294967295,U=R+(M<<11&4294967295|M>>>21),M=V+(U^R^k)+P[15]+530742520&4294967295,V=U+(M<<16&4294967295|M>>>16),M=k+(V^U^R)+P[2]+3299628645&4294967295,k=V+(M<<23&4294967295|M>>>9),M=R+(V^(k|~U))+P[0]+4096336452&4294967295,R=k+(M<<6&4294967295|M>>>26),M=U+(k^(R|~V))+P[7]+1126891415&4294967295,U=R+(M<<10&4294967295|M>>>22),M=V+(R^(U|~k))+P[14]+2878612391&4294967295,V=U+(M<<15&4294967295|M>>>17),M=k+(U^(V|~R))+P[5]+4237533241&4294967295,k=V+(M<<21&4294967295|M>>>11),M=R+(V^(k|~U))+P[12]+1700485571&4294967295,R=k+(M<<6&4294967295|M>>>26),M=U+(k^(R|~V))+P[3]+2399980690&4294967295,U=R+(M<<10&4294967295|M>>>22),M=V+(R^(U|~k))+P[10]+4293915773&4294967295,V=U+(M<<15&4294967295|M>>>17),M=k+(U^(V|~R))+P[1]+2240044497&4294967295,k=V+(M<<21&4294967295|M>>>11),M=R+(V^(k|~U))+P[8]+1873313359&4294967295,R=k+(M<<6&4294967295|M>>>26),M=U+(k^(R|~V))+P[15]+4264355552&4294967295,U=R+(M<<10&4294967295|M>>>22),M=V+(R^(U|~k))+P[6]+2734768916&4294967295,V=U+(M<<15&4294967295|M>>>17),M=k+(U^(V|~R))+P[13]+1309151649&4294967295,k=V+(M<<21&4294967295|M>>>11),M=R+(V^(k|~U))+P[4]+4149444226&4294967295,R=k+(M<<6&4294967295|M>>>26),M=U+(k^(R|~V))+P[11]+3174756917&4294967295,U=R+(M<<10&4294967295|M>>>22),M=V+(R^(U|~k))+P[2]+718787259&4294967295,V=U+(M<<15&4294967295|M>>>17),M=k+(U^(V|~R))+P[9]+3951481745&4294967295,N.g[0]=N.g[0]+R&4294967295,N.g[1]=N.g[1]+(V+(M<<21&4294967295|M>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+U&4294967295}i.prototype.v=function(N,R){R===void 0&&(R=N.length);const k=R-this.blockSize,P=this.C;let V=this.h,U=0;for(;U<R;){if(V==0)for(;U<=k;)o(this,N,U),U+=this.blockSize;if(typeof N=="string"){for(;U<R;)if(P[V++]=N.charCodeAt(U++),V==this.blockSize){o(this,P),V=0;break}}else for(;U<R;)if(P[V++]=N[U++],V==this.blockSize){o(this,P),V=0;break}}this.h=V,this.o+=R},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var R=1;R<N.length-8;++R)N[R]=0;R=this.o*8;for(var k=N.length-8;k<N.length;++k)N[k]=R&255,R/=256;for(this.v(N),N=Array(16),R=0,k=0;k<4;++k)for(let P=0;P<32;P+=8)N[R++]=this.g[k]>>>P&255;return N};function l(N,R){var k=d;return Object.prototype.hasOwnProperty.call(k,N)?k[N]:k[N]=R(N)}function u(N,R){this.h=R;const k=[];let P=!0;for(let V=N.length-1;V>=0;V--){const U=N[V]|0;P&&U==R||(k[V]=U,P=!1)}this.g=k}var d={};function m(N){return-128<=N&&N<128?l(N,function(R){return new u([R|0],R<0?-1:0)}):new u([N|0],N<0?-1:0)}function f(N){if(isNaN(N)||!isFinite(N))return x;if(N<0)return O(f(-N));const R=[];let k=1;for(let P=0;N>=k;P++)R[P]=N/k|0,k*=4294967296;return new u(R,0)}function T(N,R){if(N.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(N.charAt(0)=="-")return O(T(N.substring(1),R));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=f(Math.pow(R,8));let P=x;for(let U=0;U<N.length;U+=8){var V=Math.min(8,N.length-U);const M=parseInt(N.substring(U,U+V),R);V<8?(V=f(Math.pow(R,V)),P=P.j(V).add(f(M))):(P=P.j(k),P=P.add(f(M)))}return P}var x=m(0),b=m(1),w=m(16777216);n=u.prototype,n.m=function(){if(L(this))return-O(this).m();let N=0,R=1;for(let k=0;k<this.g.length;k++){const P=this.i(k);N+=(P>=0?P:4294967296+P)*R,R*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(D(this))return"0";if(L(this))return"-"+O(this).toString(N);const R=f(Math.pow(N,6));var k=this;let P="";for(;;){const V=ee(k,R).g;k=z(k,V.j(R));let U=((k.g.length>0?k.g[0]:k.h)>>>0).toString(N);if(k=V,D(k))return U+P;for(;U.length<6;)U="0"+U;P=U+P}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function D(N){if(N.h!=0)return!1;for(let R=0;R<N.g.length;R++)if(N.g[R]!=0)return!1;return!0}function L(N){return N.h==-1}n.l=function(N){return N=z(this,N),L(N)?-1:D(N)?0:1};function O(N){const R=N.g.length,k=[];for(let P=0;P<R;P++)k[P]=~N.g[P];return new u(k,~N.h).add(b)}n.abs=function(){return L(this)?O(this):this},n.add=function(N){const R=Math.max(this.g.length,N.g.length),k=[];let P=0;for(let V=0;V<=R;V++){let U=P+(this.i(V)&65535)+(N.i(V)&65535),M=(U>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);P=M>>>16,U&=65535,M&=65535,k[V]=M<<16|U}return new u(k,k[k.length-1]&-2147483648?-1:0)};function z(N,R){return N.add(O(R))}n.j=function(N){if(D(this)||D(N))return x;if(L(this))return L(N)?O(this).j(O(N)):O(O(this).j(N));if(L(N))return O(this.j(O(N)));if(this.l(w)<0&&N.l(w)<0)return f(this.m()*N.m());const R=this.g.length+N.g.length,k=[];for(var P=0;P<2*R;P++)k[P]=0;for(P=0;P<this.g.length;P++)for(let V=0;V<N.g.length;V++){const U=this.i(P)>>>16,M=this.i(P)&65535,ce=N.i(V)>>>16,Ve=N.i(V)&65535;k[2*P+2*V]+=M*Ve,G(k,2*P+2*V),k[2*P+2*V+1]+=U*Ve,G(k,2*P+2*V+1),k[2*P+2*V+1]+=M*ce,G(k,2*P+2*V+1),k[2*P+2*V+2]+=U*ce,G(k,2*P+2*V+2)}for(N=0;N<R;N++)k[N]=k[2*N+1]<<16|k[2*N];for(N=R;N<2*R;N++)k[N]=0;return new u(k,0)};function G(N,R){for(;(N[R]&65535)!=N[R];)N[R+1]+=N[R]>>>16,N[R]&=65535,R++}function j(N,R){this.g=N,this.h=R}function ee(N,R){if(D(R))throw Error("division by zero");if(D(N))return new j(x,x);if(L(N))return R=ee(O(N),R),new j(O(R.g),O(R.h));if(L(R))return R=ee(N,O(R)),new j(O(R.g),R.h);if(N.g.length>30){if(L(N)||L(R))throw Error("slowDivide_ only works with positive integers.");for(var k=b,P=R;P.l(N)<=0;)k=le(k),P=le(P);var V=ie(k,1),U=ie(P,1);for(P=ie(P,2),k=ie(k,2);!D(P);){var M=U.add(P);M.l(N)<=0&&(V=V.add(k),U=M),P=ie(P,1),k=ie(k,1)}return R=z(N,V.j(R)),new j(V,R)}for(V=x;N.l(R)>=0;){for(k=Math.max(1,Math.floor(N.m()/R.m())),P=Math.ceil(Math.log(k)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),U=f(k),M=U.j(R);L(M)||M.l(N)>0;)k-=P,U=f(k),M=U.j(R);D(U)&&(U=b),V=V.add(U),N=z(N,M)}return new j(V,N)}n.B=function(N){return ee(this,N).h},n.and=function(N){const R=Math.max(this.g.length,N.g.length),k=[];for(let P=0;P<R;P++)k[P]=this.i(P)&N.i(P);return new u(k,this.h&N.h)},n.or=function(N){const R=Math.max(this.g.length,N.g.length),k=[];for(let P=0;P<R;P++)k[P]=this.i(P)|N.i(P);return new u(k,this.h|N.h)},n.xor=function(N){const R=Math.max(this.g.length,N.g.length),k=[];for(let P=0;P<R;P++)k[P]=this.i(P)^N.i(P);return new u(k,this.h^N.h)};function le(N){const R=N.g.length+1,k=[];for(let P=0;P<R;P++)k[P]=N.i(P)<<1|N.i(P-1)>>>31;return new u(k,N.h)}function ie(N,R){const k=R>>5;R%=32;const P=N.g.length-k,V=[];for(let U=0;U<P;U++)V[U]=R>0?N.i(U+k)>>>R|N.i(U+k+1)<<32-R:N.i(U+k);return new u(V,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,wb=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=f,u.fromString=T,fs=u}).apply(typeof nT<"u"?nT:typeof self<"u"?self:typeof window<"u"?window:{});var md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cb,nu,Ib,wd,gp,Nb,Rb,kb;(function(){var n,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof md=="object"&&md];for(var E=0;E<p.length;++E){var A=p[E];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=t(this);function o(p,E){if(E)e:{var A=i;p=p.split(".");for(var I=0;I<p.length-1;I++){var Y=p[I];if(!(Y in A))break e;A=A[Y]}p=p[p.length-1],I=A[p],E=E(I),E!=I&&E!=null&&e(A,p,{configurable:!0,writable:!0,value:E})}}o("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(p){return p||function(E){var A=[],I;for(I in E)Object.prototype.hasOwnProperty.call(E,I)&&A.push([I,E[I]]);return A}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(p){var E=typeof p;return E=="object"&&p!=null||E=="function"}function m(p,E,A){return p.call.apply(p.bind,arguments)}function f(p,E,A){return f=m,f.apply(null,arguments)}function T(p,E){var A=Array.prototype.slice.call(arguments,1);return function(){var I=A.slice();return I.push.apply(I,arguments),p.apply(this,I)}}function x(p,E){function A(){}A.prototype=E.prototype,p.Z=E.prototype,p.prototype=new A,p.prototype.constructor=p,p.Ob=function(I,Y,W){for(var fe=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)fe[Me-2]=arguments[Me];return E.prototype[Y].apply(I,fe)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function w(p){const E=p.length;if(E>0){const A=Array(E);for(let I=0;I<E;I++)A[I]=p[I];return A}return[]}function D(p,E){for(let I=1;I<arguments.length;I++){const Y=arguments[I];var A=typeof Y;if(A=A!="object"?A:Y?Array.isArray(Y)?"array":A:"null",A=="array"||A=="object"&&typeof Y.length=="number"){A=p.length||0;const W=Y.length||0;p.length=A+W;for(let fe=0;fe<W;fe++)p[A+fe]=Y[fe]}else p.push(Y)}}class L{constructor(E,A){this.i=E,this.j=A,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function O(p){u.setTimeout(()=>{throw p},0)}function z(){var p=N;let E=null;return p.g&&(E=p.g,p.g=p.g.next,p.g||(p.h=null),E.next=null),E}class G{constructor(){this.h=this.g=null}add(E,A){const I=j.get();I.set(E,A),this.h?this.h.next=I:this.g=I,this.h=I}}var j=new L(()=>new ee,p=>p.reset());class ee{constructor(){this.next=this.g=this.h=null}set(E,A){this.h=E,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let le,ie=!1,N=new G,R=()=>{const p=Promise.resolve(void 0);le=()=>{p.then(k)}};function k(){for(var p;p=z();){try{p.h.call(p.g)}catch(A){O(A)}var E=j;E.j(p),E.h<100&&(E.h++,p.next=E.g,E.g=p)}ie=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(p,E){this.type=p,this.g=this.target=E,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,E=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const A=()=>{};u.addEventListener("test",A,E),u.removeEventListener("test",A,E)}catch{}return p})();function M(p){return/^[\s\xa0]*$/.test(p)}function ce(p,E){V.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,E)}x(ce,V),ce.prototype.init=function(p,E){const A=this.type=p.type,I=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=E,E=p.relatedTarget,E||(A=="mouseover"?E=p.fromElement:A=="mouseout"&&(E=p.toElement)),this.relatedTarget=E,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Ve="closure_listenable_"+(Math.random()*1e6|0),Q=0;function ue(p,E,A,I,Y){this.listener=p,this.proxy=null,this.src=E,this.type=A,this.capture=!!I,this.ha=Y,this.key=++Q,this.da=this.fa=!1}function de(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Se(p,E,A){for(const I in p)E.call(A,p[I],I,p)}function Le(p,E){for(const A in p)E.call(void 0,p[A],A,p)}function B(p){const E={};for(const A in p)E[A]=p[A];return E}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(p,E){let A,I;for(let Y=1;Y<arguments.length;Y++){I=arguments[Y];for(A in I)p[A]=I[A];for(let W=0;W<se.length;W++)A=se[W],Object.prototype.hasOwnProperty.call(I,A)&&(p[A]=I[A])}}function pe(p){this.src=p,this.g={},this.h=0}pe.prototype.add=function(p,E,A,I,Y){const W=p.toString();p=this.g[W],p||(p=this.g[W]=[],this.h++);const fe=ke(p,E,I,Y);return fe>-1?(E=p[fe],A||(E.fa=!1)):(E=new ue(E,this.src,W,!!I,Y),E.fa=A,p.push(E)),E};function Ce(p,E){const A=E.type;if(A in p.g){var I=p.g[A],Y=Array.prototype.indexOf.call(I,E,void 0),W;(W=Y>=0)&&Array.prototype.splice.call(I,Y,1),W&&(de(E),p.g[A].length==0&&(delete p.g[A],p.h--))}}function ke(p,E,A,I){for(let Y=0;Y<p.length;++Y){const W=p[Y];if(!W.da&&W.listener==E&&W.capture==!!A&&W.ha==I)return Y}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),Tt={};function Ee(p,E,A,I,Y){if(Array.isArray(E)){for(let W=0;W<E.length;W++)Ee(p,E[W],A,I,Y);return null}return A=$a(A),p&&p[Ve]?p.J(E,A,d(I)?!!I.capture:!1,Y):Ze(p,E,A,!1,I,Y)}function Ze(p,E,A,I,Y,W){if(!E)throw Error("Invalid event type");const fe=d(Y)?!!Y.capture:!!Y;let Me=Cs(p);if(Me||(p[Ue]=Me=new pe(p)),A=Me.add(E,A,I,fe,W),A.proxy)return A;if(I=ct(),A.proxy=I,I.src=p,I.listener=A,p.addEventListener)U||(Y=fe),Y===void 0&&(Y=!1),p.addEventListener(E.toString(),I,Y);else if(p.attachEvent)p.attachEvent(mi(E.toString()),I);else if(p.addListener&&p.removeListener)p.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return A}function ct(){function p(A){return E.call(p.src,p.listener,A)}const E=Ja;return p}function Mn(p,E,A,I,Y){if(Array.isArray(E))for(var W=0;W<E.length;W++)Mn(p,E[W],A,I,Y);else I=d(I)?!!I.capture:!!I,A=$a(A),p&&p[Ve]?(p=p.i,W=String(E).toString(),W in p.g&&(E=p.g[W],A=ke(E,A,I,Y),A>-1&&(de(E[A]),Array.prototype.splice.call(E,A,1),E.length==0&&(delete p.g[W],p.h--)))):p&&(p=Cs(p))&&(E=p.g[E.toString()],p=-1,E&&(p=ke(E,A,I,Y)),(A=p>-1?E[p]:null)&&Dn(A))}function Dn(p){if(typeof p!="number"&&p&&!p.da){var E=p.src;if(E&&E[Ve])Ce(E.i,p);else{var A=p.type,I=p.proxy;E.removeEventListener?E.removeEventListener(A,I,p.capture):E.detachEvent?E.detachEvent(mi(A),I):E.addListener&&E.removeListener&&E.removeListener(I),(A=Cs(E))?(Ce(A,p),A.h==0&&(A.src=null,E[Ue]=null)):de(p)}}}function mi(p){return p in Tt?Tt[p]:Tt[p]="on"+p}function Ja(p,E){if(p.da)p=!0;else{E=new ce(E,this);const A=p.listener,I=p.ha||p.src;p.fa&&Dn(p),p=A.call(I,E)}return p}function Cs(p){return p=p[Ue],p instanceof pe?p:null}var Ka="__closure_events_fn_"+(Math.random()*1e9>>>0);function $a(p){return typeof p=="function"?p:(p[Ka]||(p[Ka]=function(E){return p.handleEvent(E)}),p[Ka])}function wt(){P.call(this),this.i=new pe(this),this.M=this,this.G=null}x(wt,P),wt.prototype[Ve]=!0,wt.prototype.removeEventListener=function(p,E,A,I){Mn(this,p,E,A,I)};function qt(p,E){var A,I=p.G;if(I)for(A=[];I;I=I.G)A.push(I);if(p=p.M,I=E.type||E,typeof E=="string")E=new V(E,p);else if(E instanceof V)E.target=E.target||p;else{var Y=E;E=new V(I,p),he(E,Y)}Y=!0;let W,fe;if(A)for(fe=A.length-1;fe>=0;fe--)W=E.g=A[fe],Y=Er(W,I,!0,E)&&Y;if(W=E.g=p,Y=Er(W,I,!0,E)&&Y,Y=Er(W,I,!1,E)&&Y,A)for(fe=0;fe<A.length;fe++)W=E.g=A[fe],Y=Er(W,I,!1,E)&&Y}wt.prototype.N=function(){if(wt.Z.N.call(this),this.i){var p=this.i;for(const E in p.g){const A=p.g[E];for(let I=0;I<A.length;I++)de(A[I]);delete p.g[E],p.h--}}this.G=null},wt.prototype.J=function(p,E,A,I){return this.i.add(String(p),E,!1,A,I)},wt.prototype.K=function(p,E,A,I){return this.i.add(String(p),E,!0,A,I)};function Er(p,E,A,I){if(E=p.i.g[String(E)],!E)return!0;E=E.concat();let Y=!0;for(let W=0;W<E.length;++W){const fe=E[W];if(fe&&!fe.da&&fe.capture==A){const Me=fe.listener,Et=fe.ha||fe.src;fe.fa&&Ce(p.i,fe),Y=Me.call(Et,I)!==!1&&Y}}return Y&&!I.defaultPrevented}function qf(p,E){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=f(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(p,E||0)}function Ou(p){p.g=qf(()=>{p.g=null,p.i&&(p.i=!1,Ou(p))},p.l);const E=p.h;p.h=null,p.m.apply(null,E)}class un extends P{constructor(E,A){super(),this.m=E,this.l=A,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Ou(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Is(p){P.call(this),this.h=p,this.g={}}x(Is,P);var Qa=[];function Wa(p){Se(p.g,function(E,A){this.g.hasOwnProperty(A)&&Dn(E)},p),p.g={}}Is.prototype.N=function(){Is.Z.N.call(this),Wa(this)},Is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var br=u.JSON.stringify,Bf=u.JSON.parse,qu=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function Bu(){}function Fu(){}var Qn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jt(){V.call(this,"d")}x(Jt,V);function Pn(){V.call(this,"c")}x(Pn,V);var xt={},zu=null;function Eo(){return zu=zu||new wt}xt.Ia="serverreachability";function Gu(p){V.call(this,xt.Ia,p)}x(Gu,V);function pi(p){const E=Eo();qt(E,new Gu(E))}xt.STAT_EVENT="statevent";function Ns(p,E){V.call(this,xt.STAT_EVENT,p),this.stat=E}x(Ns,V);function Ct(p){const E=Eo();qt(E,new Ns(E,p))}xt.Ja="timingevent";function gi(p,E){V.call(this,xt.Ja,p),this.size=E}x(gi,V);function yi(p,E){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},E)}function Wn(){this.g=!0}Wn.prototype.ua=function(){this.g=!1};function Ff(p,E,A,I,Y,W){p.info(function(){if(p.g)if(W){var fe="",Me=W.split("&");for(let Qe=0;Qe<Me.length;Qe++){var Et=Me[Qe].split("=");if(Et.length>1){const mt=Et[0];Et=Et[1];const On=mt.split("_");fe=On.length>=2&&On[1]=="type"?fe+(mt+"="+Et+"&"):fe+(mt+"=redacted&")}}}else fe=null;else fe=W;return"XMLHTTP REQ ("+I+") [attempt "+Y+"]: "+E+`
`+A+`
`+fe})}function Hu(p,E,A,I,Y,W,fe){p.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+Y+"]: "+E+`
`+A+`
`+W+" "+fe})}function vi(p,E,A,I){p.info(function(){return"XMLHTTP TEXT ("+E+"): "+zf(p,A)+(I?" "+I:"")})}function Rs(p,E){p.info(function(){return"TIMEOUT: "+E})}Wn.prototype.info=function(){};function zf(p,E){if(!p.g)return E;if(!E)return null;try{const W=JSON.parse(E);if(W){for(p=0;p<W.length;p++)if(Array.isArray(W[p])){var A=W[p];if(!(A.length<2)){var I=A[1];if(Array.isArray(I)&&!(I.length<1)){var Y=I[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let fe=1;fe<I.length;fe++)I[fe]=""}}}}return br(W)}catch{return E}}var ks={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Za;function Ms(){}x(Ms,Bu),Ms.prototype.g=function(){return new XMLHttpRequest},Za=new Ms;function ji(p){return encodeURIComponent(String(p))}function ju(p){var E=1;p=p.split(":");const A=[];for(;E>0&&p.length;)A.push(p.shift()),E--;return p.length&&A.push(p.join(":")),A}function Xn(p,E,A,I){this.j=p,this.i=E,this.l=A,this.S=I||1,this.V=new Is(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zn}function Zn(){this.i=null,this.g="",this.h=!1}var It={},Gt={};function _i(p,E,A){p.M=1,p.A=Ds(Rt(E)),p.u=A,p.R=!0,bo(p,null)}function bo(p,E){p.F=Date.now(),Ti(p),p.B=Rt(p.A);var A=p.B,I=p.S;Array.isArray(I)||(I=[String(I)]),Co(A.i,"t",I),p.C=0,A=p.j.L,p.h=new Zn,p.g=oc(p.j,A?E:null,!p.u),p.P>0&&(p.O=new un(f(p.Y,p,p.g),p.P)),E=p.V,A=p.g,I=p.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(Qa[0]=Y.toString()),Y=Qa);for(let W=0;W<Y.length;W++){const fe=Ee(A,Y[W],I||E.handleEvent,!1,E.h||E);if(!fe)break;E.g[fe.key]=fe}E=p.J?B(p.J):{},p.u?(p.v||(p.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,E)):(p.v="GET",p.g.ea(p.B,p.v,null,E)),pi(),Ff(p.i,p.v,p.B,p.l,p.S,p.u)}Xn.prototype.ba=function(p){p=p.target;const E=this.O;E&&ni(p)==3?E.j():this.Y(p)},Xn.prototype.Y=function(p){try{if(p==this.g)e:{const Me=ni(this.g),Et=this.g.ya(),Qe=this.g.ca();if(!(Me<3)&&(Me!=3||this.g&&(this.h.h||this.g.la()||Kt(this.g)))){this.K||Me!=4||Et==7||(Et==8||Qe<=0?pi(3):pi(2)),xi(this);var E=this.g.ca();this.X=E;var A=Gf(this);if(this.o=E==200,Hu(this.i,this.v,this.B,this.l,this.S,Me,E),this.o){if(this.U&&!this.L){t:{if(this.g){var I,Y=this.g;if((I=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(I)){var W=I;break t}}W=null}if(p=W)vi(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ei(this,p);else{this.o=!1,this.m=3,Ct(12),xn(this),Vn(this);break e}}if(this.R){p=!0;let mt;for(;!this.K&&this.C<A.length;)if(mt=Ju(this,A),mt==Gt){Me==4&&(this.m=4,Ct(14),p=!1),vi(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==It){this.m=4,Ct(15),vi(this.i,this.l,A,"[Invalid Chunk]"),p=!1;break}else vi(this.i,this.l,mt,null),Ei(this,mt);if(Yu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||A.length!=0||this.h.h||(this.m=1,Ct(16),p=!1),this.o=this.o&&p,!p)vi(this.i,this.l,A,"[Invalid Chunked Response]"),xn(this),Vn(this);else if(A.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+A.length),ml(fe),fe.P=!0,Ct(11))}}else vi(this.i,this.l,A,null),Ei(this,A);Me==4&&xn(this),this.o&&!this.K&&(Me==4?nc(this.j,this):(this.o=!1,Ti(this)))}else Ji(this.g),E==400&&A.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),xn(this),Vn(this)}}}catch{}finally{}};function Gf(p){if(!Yu(p))return p.g.la();const E=Kt(p.g);if(E==="")return"";let A="";const I=E.length,Y=ni(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return xn(p),Vn(p),"";p.h.i=new u.TextDecoder}for(let W=0;W<I;W++)p.h.h=!0,A+=p.h.i.decode(E[W],{stream:!(Y&&W==I-1)});return E.length=0,p.h.g+=A,p.C=0,p.h.g}function Yu(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Ju(p,E){var A=p.C,I=E.indexOf(`
`,A);return I==-1?Gt:(A=Number(E.substring(A,I)),isNaN(A)?It:(I+=1,I+A>E.length?Gt:(E=E.slice(I,I+A),p.C=I+A,E)))}Xn.prototype.cancel=function(){this.K=!0,xn(this)};function Ti(p){p.T=Date.now()+p.H,So(p,p.H)}function So(p,E){if(p.D!=null)throw Error("WatchDog timer not null");p.D=yi(f(p.aa,p),E)}function xi(p){p.D&&(u.clearTimeout(p.D),p.D=null)}Xn.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(Rs(this.i,this.B),this.M!=2&&(pi(),Ct(17)),xn(this),this.m=2,Vn(this)):So(this,this.T-p)};function Vn(p){p.j.I==0||p.K||nc(p.j,p)}function xn(p){xi(p);var E=p.O;E&&typeof E.dispose=="function"&&E.dispose(),p.O=null,Wa(p.V),p.g&&(E=p.g,p.g=null,E.abort(),E.dispose())}function Ei(p,E){try{var A=p.j;if(A.I!=0&&(A.g==p||Si(A.h,p))){if(!p.L&&Si(A.h,p)&&A.I==3){try{var I=A.Ba.g.parse(E)}catch{I=null}if(Array.isArray(I)&&I.length==3){var Y=I;if(Y[0]==0){e:if(!A.v){if(A.g)if(A.g.F+3e3<p.F)Mo(A),kr(A);else break e;Bs(A),Ct(18)}}else A.xa=Y[1],0<A.xa-A.K&&Y[2]<37500&&A.F&&A.A==0&&!A.C&&(A.C=yi(f(A.Va,A),6e3));bi(A.h)<=1&&A.ta&&(A.ta=void 0)}else Ri(A,11)}else if((p.L||A.g==p)&&Mo(A),!M(E))for(Y=A.Ba.g.parse(E),E=0;E<Y.length;E++){let Qe=Y[E];const mt=Qe[0];if(!(mt<=A.K))if(A.K=mt,Qe=Qe[1],A.I==2)if(Qe[0]=="c"){A.M=Qe[1],A.ba=Qe[2];const On=Qe[3];On!=null&&(A.ka=On,A.j.info("VER="+A.ka));const ki=Qe[4];ki!=null&&(A.za=ki,A.j.info("SVER="+A.za));const ii=Qe[5];ii!=null&&typeof ii=="number"&&ii>0&&(I=1.5*ii,A.O=I,A.j.info("backChannelRequestTimeoutMs_="+I)),I=A;const ri=p.g;if(ri){const Fs=ri.g?ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fs){var W=I.h;W.g||Fs.indexOf("spdy")==-1&&Fs.indexOf("quic")==-1&&Fs.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(nl(W,W.h),W.h=null))}if(I.G){const Do=ri.g?ri.g.getResponseHeader("X-HTTP-Session-Id"):null;Do&&(I.wa=Do,et(I.J,I.G,Do))}}A.I=3,A.l&&A.l.ra(),A.aa&&(A.T=Date.now()-p.F,A.j.info("Handshake RTT: "+A.T+"ms")),I=A;var fe=p;if(I.na=sc(I,I.L?I.ba:null,I.W),fe.L){il(I.h,fe);var Me=fe,Et=I.O;Et&&(Me.H=Et),Me.D&&(xi(Me),Ti(Me)),I.g=fe}else ec(I);A.i.length>0&&Ni(A)}else Qe[0]!="stop"&&Qe[0]!="close"||Ri(A,7);else A.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Ri(A,7):fl(A):Qe[0]!="noop"&&A.l&&A.l.qa(Qe),A.A=0)}}pi(4)}catch{}}var Nt=class{constructor(p,E){this.g=p,this.map=E}};function el(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function tl(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function bi(p){return p.h?1:p.g?p.g.size:0}function Si(p,E){return p.h?p.h==E:p.g?p.g.has(E):!1}function nl(p,E){p.g?p.g.add(E):p.h=E}function il(p,E){p.h&&p.h==E?p.h=null:p.g&&p.g.has(E)&&p.g.delete(E)}el.prototype.cancel=function(){if(this.i=rl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function rl(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let E=p.i;for(const A of p.g.values())E=E.concat(A.G);return E}return w(p.i)}var Ku=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ao(p,E){if(p){p=p.split("&");for(let A=0;A<p.length;A++){const I=p[A].indexOf("=");let Y,W=null;I>=0?(Y=p[A].substring(0,I),W=p[A].substring(I+1)):Y=p[A],E(Y,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function En(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;p instanceof En?(this.l=p.l,Ht(this,p.j),this.o=p.o,this.g=p.g,Sr(this,p.u),this.h=p.h,sl(this,Xu(p.i)),this.m=p.m):p&&(E=String(p).match(Ku))?(this.l=!1,Ht(this,E[1]||"",!0),this.o=Ai(E[2]||""),this.g=Ai(E[3]||"",!0),Sr(this,E[4]),this.h=Ai(E[5]||"",!0),sl(this,E[6]||"",!0),this.m=Ai(E[7]||"")):(this.l=!1,this.i=new wr(null,this.l))}En.prototype.toString=function(){const p=[];var E=this.j;E&&p.push(Ps(E,wo,!0),":");var A=this.g;return(A||E=="file")&&(p.push("//"),(E=this.o)&&p.push(Ps(E,wo,!0),"@"),p.push(ji(A).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.u,A!=null&&p.push(":",String(A))),(A=this.h)&&(this.g&&A.charAt(0)!="/"&&p.push("/"),p.push(Ps(A,A.charAt(0)=="/"?ol:$u,!0))),(A=this.i.toString())&&p.push("?",A),(A=this.m)&&p.push("#",Ps(A,Qu)),p.join("")},En.prototype.resolve=function(p){const E=Rt(this);let A=!!p.j;A?Ht(E,p.j):A=!!p.o,A?E.o=p.o:A=!!p.g,A?E.g=p.g:A=p.u!=null;var I=p.h;if(A)Sr(E,p.u);else if(A=!!p.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var Y=E.h.lastIndexOf("/");Y!=-1&&(I=E.h.slice(0,Y+1)+I)}if(Y=I,Y==".."||Y==".")I="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){I=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const W=[];for(let fe=0;fe<Y.length;){const Me=Y[fe++];Me=="."?I&&fe==Y.length&&W.push(""):Me==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),I&&fe==Y.length&&W.push("")):(W.push(Me),I=!0)}I=W.join("/")}else I=Y}return A?E.h=I:A=p.i.toString()!=="",A?sl(E,Xu(p.i)):A=!!p.m,A&&(E.m=p.m),E};function Rt(p){return new En(p)}function Ht(p,E,A){p.j=A?Ai(E,!0):E,p.j&&(p.j=p.j.replace(/:$/,""))}function Sr(p,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);p.u=E}else p.u=null}function sl(p,E,A){E instanceof wr?(p.i=E,Io(p.i,p.l)):(A||(E=Ps(E,Ar)),p.i=new wr(E,p.l))}function et(p,E,A){p.i.set(E,A)}function Ds(p){return et(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Ai(p,E){return p?E?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Ps(p,E,A){return typeof p=="string"?(p=encodeURI(p).replace(E,fn),A&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function fn(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var wo=/[#\/\?@]/g,$u=/[#\?:]/g,ol=/[#\?]/g,Ar=/[#\?@]/g,Qu=/#/g;function wr(p,E){this.h=this.g=null,this.i=p||null,this.j=!!E}function hn(p){p.g||(p.g=new Map,p.h=0,p.i&&Ao(p.i,function(E,A){p.add(decodeURIComponent(E.replace(/\+/g," ")),A)}))}n=wr.prototype,n.add=function(p,E){hn(this),this.i=null,p=Cr(this,p);let A=this.g.get(p);return A||this.g.set(p,A=[]),A.push(E),this.h+=1,this};function Wu(p,E){hn(p),E=Cr(p,E),p.g.has(E)&&(p.i=null,p.h-=p.g.get(E).length,p.g.delete(E))}function al(p,E){return hn(p),E=Cr(p,E),p.g.has(E)}n.forEach=function(p,E){hn(this),this.g.forEach(function(A,I){A.forEach(function(Y){p.call(E,Y,I,this)},this)},this)};function ll(p,E){hn(p);let A=[];if(typeof E=="string")al(p,E)&&(A=A.concat(p.g.get(Cr(p,E))));else for(p=Array.from(p.g.values()),E=0;E<p.length;E++)A=A.concat(p[E]);return A}n.set=function(p,E){return hn(this),this.i=null,p=Cr(this,p),al(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[E]),this.h+=1,this},n.get=function(p,E){return p?(p=ll(this,p),p.length>0?String(p[0]):E):E};function Co(p,E,A){Wu(p,E),A.length>0&&(p.i=null,p.g.set(Cr(p,E),w(A)),p.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],E=Array.from(this.g.keys());for(let I=0;I<E.length;I++){var A=E[I];const Y=ji(A);A=ll(this,A);for(let W=0;W<A.length;W++){let fe=Y;A[W]!==""&&(fe+="="+ji(A[W])),p.push(fe)}}return this.i=p.join("&")};function Xu(p){const E=new wr;return E.i=p.i,p.g&&(E.g=new Map(p.g),E.h=p.h),E}function Cr(p,E){return E=String(E),p.j&&(E=E.toLowerCase()),E}function Io(p,E){E&&!p.j&&(hn(p),p.i=null,p.g.forEach(function(A,I){const Y=I.toLowerCase();I!=Y&&(Wu(this,I),Co(this,Y,A))},p)),p.j=E}function ei(p,E){const A=new Wn;if(u.Image){const I=new Image;I.onload=T(Ln,A,"TestLoadImage: loaded",!0,E,I),I.onerror=T(Ln,A,"TestLoadImage: error",!1,E,I),I.onabort=T(Ln,A,"TestLoadImage: abort",!1,E,I),I.ontimeout=T(Ln,A,"TestLoadImage: timeout",!1,E,I),u.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=p}else E(!1)}function ul(p,E){const A=new Wn,I=new AbortController,Y=setTimeout(()=>{I.abort(),Ln(A,"TestPingServer: timeout",!1,E)},1e4);fetch(p,{signal:I.signal}).then(W=>{clearTimeout(Y),W.ok?Ln(A,"TestPingServer: ok",!0,E):Ln(A,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Y),Ln(A,"TestPingServer: error",!1,E)})}function Ln(p,E,A,I,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),I(A)}catch{}}function Ir(){this.g=new qu}function wi(p){this.i=p.Sb||null,this.h=p.ab||!1}x(wi,Bu),wi.prototype.g=function(){return new Vs(this.i,this.h)};function Vs(p,E){wt.call(this),this.H=p,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Vs,wt),n=Vs.prototype,n.open=function(p,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=E,this.readyState=1,ti(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(E.body=p),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Nr(this)),this.readyState=0},n.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;No(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function No(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}n.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var E=p.value?p.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!p.done}))&&(this.response=this.responseText+=E)}p.done?Nr(this):ti(this),this.readyState==3&&No(this)}},n.Oa=function(p){this.g&&(this.response=this.responseText=p,Nr(this))},n.Na=function(p){this.g&&(this.response=p,Nr(this))},n.ga=function(){this.g&&Nr(this)};function Nr(p){p.readyState=4,p.l=null,p.j=null,p.B=null,ti(p)}n.setRequestHeader=function(p,E){this.A.append(p,E)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],E=this.h.entries();for(var A=E.next();!A.done;)A=A.value,p.push(A[0]+": "+A[1]),A=E.next();return p.join(`\r
`)};function ti(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Vs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Un(p){let E="";return Se(p,function(A,I){E+=I,E+=":",E+=A,E+=`\r
`}),E}function Ls(p,E,A){e:{for(I in A){var I=!1;break e}I=!0}I||(A=Un(A),typeof p=="string"?A!=null&&ji(A):et(p,E,A))}function it(p){wt.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(it,wt);var Ci=/^https?$/i,cl=["POST","PUT"];n=it.prototype,n.Fa=function(p){this.H=p},n.ea=function(p,E,A,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);E=E?E.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Za.g(),this.g.onreadystatechange=b(f(this.Ca,this));try{this.B=!0,this.g.open(E,String(p),!0),this.B=!1}catch(W){Us(this,W);return}if(p=A||"",A=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var Y in I)A.set(Y,I[Y]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const W of I.keys())A.set(W,I.get(W));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(A.keys()).find(W=>W.toLowerCase()=="content-type"),Y=u.FormData&&p instanceof u.FormData,!(Array.prototype.indexOf.call(cl,E,void 0)>=0)||I||Y||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,fe]of A)this.g.setRequestHeader(W,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(W){Us(this,W)}};function Us(p,E){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=E,p.o=5,dl(p),Yi(p)}function dl(p){p.A||(p.A=!0,qt(p,"complete"),qt(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,qt(this,"complete"),qt(this,"abort"),Yi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yi(this,!0)),it.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Os(this):this.Xa())},n.Xa=function(){Os(this)};function Os(p){if(p.h&&typeof l<"u"){if(p.v&&ni(p)==4)setTimeout(p.Ca.bind(p),0);else if(qt(p,"readystatechange"),ni(p)==4){p.h=!1;try{const W=p.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var A;if(!(A=E)){var I;if(I=W===0){let fe=String(p.D).match(Ku)[1]||null;!fe&&u.self&&u.self.location&&(fe=u.self.location.protocol.slice(0,-1)),I=!Ci.test(fe?fe.toLowerCase():"")}A=I}if(A)qt(p,"complete"),qt(p,"success");else{p.o=6;try{var Y=ni(p)>2?p.g.statusText:""}catch{Y=""}p.l=Y+" ["+p.ca()+"]",dl(p)}}finally{Yi(p)}}}}function Yi(p,E){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const A=p.g;p.g=null,E||qt(p,"ready");try{A.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ni(p){return p.g?p.g.readyState:0}n.ca=function(){try{return ni(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(p){if(this.g){var E=this.g.responseText;return p&&E.indexOf(p)==0&&(E=E.substring(p.length)),Bf(E)}};function Kt(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Ji(p){const E={};p=(p.g&&ni(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<p.length;I++){if(M(p[I]))continue;var A=ju(p[I]);const Y=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const W=E[Y]||[];E[Y]=W,W.push(A)}Le(E,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ii(p,E,A){return A&&A.internalChannelParams&&A.internalChannelParams[p]||E}function Rr(p){this.za=0,this.i=[],this.j=new Wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ii("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ii("baseRetryDelayMs",5e3,p),this.Za=Ii("retryDelaySeedMs",1e4,p),this.Ta=Ii("forwardChannelMaxRetries",2,p),this.va=Ii("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new el(p&&p.concurrentRequestLimit),this.Ba=new Ir,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Rr.prototype,n.ka=8,n.I=1,n.connect=function(p,E,A,I){Ct(0),this.W=p,this.H=E||{},A&&I!==void 0&&(this.H.OSID=A,this.H.OAID=I),this.F=this.X,this.J=sc(this,null,this.W),Ni(this)};function fl(p){if(Ro(p),p.I==3){var E=p.V++,A=Rt(p.J);if(et(A,"SID",p.M),et(A,"RID",E),et(A,"TYPE","terminate"),qs(p,A),E=new Xn(p,p.j,E),E.M=2,E.A=Ds(Rt(A)),A=!1,u.navigator&&u.navigator.sendBeacon)try{A=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!A&&u.Image&&(new Image().src=E.A,A=!0),A||(E.g=oc(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Ti(E)}rc(p)}function kr(p){p.g&&(ml(p),p.g.cancel(),p.g=null)}function Ro(p){kr(p),p.v&&(u.clearTimeout(p.v),p.v=null),Mo(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&u.clearTimeout(p.m),p.m=null)}function Ni(p){if(!tl(p.h)&&!p.m){p.m=!0;var E=p.Ea;le||R(),ie||(le(),ie=!0),N.add(E,p),p.D=0}}function ko(p,E){return bi(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=E.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=yi(f(p.Ea,p,E),ic(p,p.D)),p.D++,!0)}n.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const Y=new Xn(this,this.j,p);let W=this.o;if(this.U&&(W?(W=B(W),he(W,this.U)):W=this.U),this.u!==null||this.R||(Y.J=W,W=null),this.S)e:{for(var E=0,A=0;A<this.i.length;A++){t:{var I=this.i[A];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(E+=I,E>4096){E=A;break e}if(E===4096||A===this.i.length-1){E=A+1;break e}}E=1e3}else E=1e3;E=Zu(this,Y,E),A=Rt(this.J),et(A,"RID",p),et(A,"CVER",22),this.G&&et(A,"X-HTTP-Session-Id",this.G),qs(this,A),W&&(this.R?E="headers="+ji(Un(W))+"&"+E:this.u&&Ls(A,this.u,W)),nl(this.h,Y),this.Ra&&et(A,"TYPE","init"),this.S?(et(A,"$req",E),et(A,"SID","null"),Y.U=!0,_i(Y,A,null)):_i(Y,A,E),this.I=2}}else this.I==3&&(p?hl(this,p):this.i.length==0||tl(this.h)||hl(this))};function hl(p,E){var A;E?A=E.l:A=p.V++;const I=Rt(p.J);et(I,"SID",p.M),et(I,"RID",A),et(I,"AID",p.K),qs(p,I),p.u&&p.o&&Ls(I,p.u,p.o),A=new Xn(p,p.j,A,p.D+1),p.u===null&&(A.J=p.o),E&&(p.i=E.G.concat(p.i)),E=Zu(p,A,1e3),A.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),nl(p.h,A),_i(A,I,E)}function qs(p,E){p.H&&Se(p.H,function(A,I){et(E,I,A)}),p.l&&Se({},function(A,I){et(E,I,A)})}function Zu(p,E,A){A=Math.min(p.i.length,A);const I=p.l?f(p.l.Ka,p.l,p):null;e:{var Y=p.i;let Me=-1;for(;;){const Et=["count="+A];Me==-1?A>0?(Me=Y[0].g,Et.push("ofs="+Me)):Me=0:Et.push("ofs="+Me);let Qe=!0;for(let mt=0;mt<A;mt++){var W=Y[mt].g;const On=Y[mt].map;if(W-=Me,W<0)Me=Math.max(0,Y[mt].g-100),Qe=!1;else try{W="req"+W+"_"||"";try{var fe=On instanceof Map?On:Object.entries(On);for(const[ki,ii]of fe){let ri=ii;d(ii)&&(ri=br(ii)),Et.push(W+ki+"="+encodeURIComponent(ri))}}catch(ki){throw Et.push(W+"type="+encodeURIComponent("_badmap")),ki}}catch{I&&I(On)}}if(Qe){fe=Et.join("&");break e}}fe=void 0}return p=p.i.splice(0,A),E.G=p,fe}function ec(p){if(!p.g&&!p.v){p.Y=1;var E=p.Da;le||R(),ie||(le(),ie=!0),N.add(E,p),p.A=0}}function Bs(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=yi(f(p.Da,p),ic(p,p.A)),p.A++,!0)}n.Da=function(){if(this.v=null,tc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=yi(f(this.Wa,this),p)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),kr(this),tc(this))};function ml(p){p.B!=null&&(u.clearTimeout(p.B),p.B=null)}function tc(p){p.g=new Xn(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var E=Rt(p.na);et(E,"RID","rpc"),et(E,"SID",p.M),et(E,"AID",p.K),et(E,"CI",p.F?"0":"1"),!p.F&&p.ia&&et(E,"TO",p.ia),et(E,"TYPE","xmlhttp"),qs(p,E),p.u&&p.o&&Ls(E,p.u,p.o),p.O&&(p.g.H=p.O);var A=p.g;p=p.ba,A.M=1,A.A=Ds(Rt(E)),A.u=null,A.R=!0,bo(A,p)}n.Va=function(){this.C!=null&&(this.C=null,kr(this),Bs(this),Ct(19))};function Mo(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function nc(p,E){var A=null;if(p.g==E){Mo(p),ml(p),p.g=null;var I=2}else if(Si(p.h,E))A=E.G,il(p.h,E),I=1;else return;if(p.I!=0){if(E.o)if(I==1){A=E.u?E.u.length:0,E=Date.now()-E.F;var Y=p.D;I=Eo(),qt(I,new gi(I,A)),Ni(p)}else ec(p);else if(Y=E.m,Y==3||Y==0&&E.X>0||!(I==1&&ko(p,E)||I==2&&Bs(p)))switch(A&&A.length>0&&(E=p.h,E.i=E.i.concat(A)),Y){case 1:Ri(p,5);break;case 4:Ri(p,10);break;case 3:Ri(p,6);break;default:Ri(p,2)}}}function ic(p,E){let A=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(A*=2),A*E}function Ri(p,E){if(p.j.info("Error code "+E),E==2){var A=f(p.bb,p),I=p.Ua;const Y=!I;I=new En(I||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ht(I,"https"),Ds(I),Y?ei(I.toString(),A):ul(I.toString(),A)}else Ct(2);p.I=0,p.l&&p.l.pa(E),rc(p),Ro(p)}n.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function rc(p){if(p.I=0,p.ja=[],p.l){const E=rl(p.h);(E.length!=0||p.i.length!=0)&&(D(p.ja,E),D(p.ja,p.i),p.h.i.length=0,w(p.i),p.i.length=0),p.l.oa()}}function sc(p,E,A){var I=A instanceof En?Rt(A):new En(A);if(I.g!="")E&&(I.g=E+"."+I.g),Sr(I,I.u);else{var Y=u.location;I=Y.protocol,E=E?E+"."+Y.hostname:Y.hostname,Y=+Y.port;const W=new En(null);I&&Ht(W,I),E&&(W.g=E),Y&&Sr(W,Y),A&&(W.h=A),I=W}return A=p.G,E=p.wa,A&&E&&et(I,A,E),et(I,"VER",p.ka),qs(p,I),I}function oc(p,E,A){if(E&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=p.Aa&&!p.ma?new it(new wi({ab:A})):new it(p.ma),E.Fa(p.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ac(){}n=ac.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Mr(){}Mr.prototype.g=function(p,E){return new cn(p,E)};function cn(p,E){wt.call(this),this.g=new Rr(E),this.l=p,this.h=E&&E.messageUrlParams||null,p=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(p?p["X-WebChannel-Content-Type"]=E.messageContentType:p={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(p?p["X-WebChannel-Client-Profile"]=E.sa:p={"X-WebChannel-Client-Profile":E.sa}),this.g.U=p,(p=E&&E.Qb)&&!M(p)&&(this.g.u=p),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!M(E)&&(this.g.G=E,p=this.h,p!==null&&E in p&&(p=this.h,E in p&&delete p[E])),this.j=new Ki(this)}x(cn,wt),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){fl(this.g)},cn.prototype.o=function(p){var E=this.g;if(typeof p=="string"){var A={};A.__data__=p,p=A}else this.v&&(A={},A.__data__=br(p),p=A);E.i.push(new Nt(E.Ya++,p)),E.I==3&&Ni(E)},cn.prototype.N=function(){this.g.l=null,delete this.j,fl(this.g),delete this.g,cn.Z.N.call(this)};function lc(p){Jt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var E=p.__sm__;if(E){e:{for(const A in E){p=A;break e}p=void 0}(this.i=p)&&(p=this.i,E=E!==null&&p in E?E[p]:void 0),this.data=E}else this.data=p}x(lc,Jt);function uc(){Pn.call(this),this.status=1}x(uc,Pn);function Ki(p){this.g=p}x(Ki,ac),Ki.prototype.ra=function(){qt(this.g,"a")},Ki.prototype.qa=function(p){qt(this.g,new lc(p))},Ki.prototype.pa=function(p){qt(this.g,new uc)},Ki.prototype.oa=function(){qt(this.g,"b")},Mr.prototype.createWebChannel=Mr.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,kb=function(){return new Mr},Rb=function(){return Eo()},Nb=xt,gp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ks.NO_ERROR=0,ks.TIMEOUT=8,ks.HTTP_ERROR=6,wd=ks,Xa.COMPLETE="complete",Ib=Xa,Fu.EventType=Qn,Qn.OPEN="a",Qn.CLOSE="b",Qn.ERROR="c",Qn.MESSAGE="d",wt.prototype.listen=wt.prototype.J,nu=Fu,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,Cb=it}).apply(typeof md<"u"?md:typeof self<"u"?self:typeof window<"u"?window:{});const iT="@firebase/firestore",rT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oa="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=new Kp("@firebase/firestore");function ca(){return ho.logLevel}function ge(n,...e){if(ho.logLevel<=ze.DEBUG){const t=e.map(sg);ho.debug(`Firestore (${Oa}): ${n}`,...t)}}function yr(n,...e){if(ho.logLevel<=ze.ERROR){const t=e.map(sg);ho.error(`Firestore (${Oa}): ${n}`,...t)}}function Ca(n,...e){if(ho.logLevel<=ze.WARN){const t=e.map(sg);ho.warn(`Firestore (${Oa}): ${n}`,...t)}}function sg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Mb(n,i,t)}function Mb(n,e,t){let i=`FIRESTORE (${Oa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw yr(i),new Error(i)}function Xe(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||Mb(e,o,i)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Tr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(sn.UNAUTHENTICATED)))}shutdown(){}}class UR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class OR{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new mr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},d=m=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new mr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Xe(typeof i.accessToken=="string",31837,{l:i}),new Db(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class qR{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BR{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new qR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xe(this.o===void 0,3512);const i=l=>{l.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new sT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new sT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=zR(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Ge(n,e){return n<e?-1:n>e?1:0}function yp(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),l=e.charAt(i);if(o!==l)return Qm(o)===Qm(l)?Ge(o,l):Qm(o)?1:-1}return Ge(n.length,e.length)}const GR=55296,HR=57343;function Qm(n){const e=n.charCodeAt(0);return e>=GR&&e<=HR}function Ia(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="__name__";class Li{constructor(e,t,i){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&we(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Li.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Li?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Li.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ge(e.length,t.length)}static compareSegments(e,t){const i=Li.isNumericId(e),o=Li.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Li.extractNumericId(e).compare(Li.extractNumericId(t)):yp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fs.fromString(e.substring(4,e.length-2))}}class ut extends Li{construct(e,t,i){return new ut(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new ut(t)}static emptyPath(){return new ut([])}}const jR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Li{construct(e,t,i){return new en(e,t,i)}static isValidIdentifier(e){return jR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===oT}static keyField(){return new en([oT])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new me(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new me(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(l(),o++)}if(l(),u)throw new me(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(ut.fromString(e))}static fromName(e){return new xe(ut.fromString(e).popFirst(5))}static empty(){return new xe(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(n,e,t){if(!t)throw new me(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function YR(n,e,t,i){if(e===!0&&i===!0)throw new me(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function aT(n){if(!xe.isDocumentKey(n))throw new me(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lT(n){if(xe.isDocumentKey(n))throw new me(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Vb(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ff(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function vr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new me(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ff(n);throw new me(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function JR(n,e){if(e<=0)throw new me(ne.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ru(n,e){if(!Vb(n))throw new me(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new me(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=-62135596800,cT=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*cT);return new lt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<uT)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cT}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ru(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-uT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Ut("string",lt._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new lt(0,0))}static max(){return new Ie(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu=-1;function KR(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(i===1e9?new lt(t+1,0):new lt(t,i));return new ms(o,xe.empty(),e)}function $R(n){return new ms(n.readTime,n.key,yu)}class ms{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ms(Ie.min(),xe.empty(),yu)}static max(){return new ms(Ie.max(),xe.empty(),yu)}}function QR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(n.documentKey,e.documentKey),t!==0?t:Ge(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qa(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==WR)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ae.reject(t)}static resolve(e){return new ae(((t,i)=>{t(e)}))}static reject(e){return new ae(((t,i)=>{i(e)}))}static waitFor(e){return new ae(((t,i)=>{let o=0,l=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++l,u&&l===o&&t()}),(m=>i(m)))})),u=!0,l===o&&t()}))}static or(e){let t=ae.resolve(!1);for(const i of e)t=t.next((o=>o?ae.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new ae(((i,o)=>{const l=e.length,u=new Array(l);let d=0;for(let m=0;m<l;m++){const f=m;t(e[f]).next((T=>{u[f]=T,++d,d===l&&i(u)}),(T=>o(T)))}}))}static doWhile(e,t){return new ae(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function ZR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ba(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}hf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag=-1;function mf(n){return n==null}function Gd(n){return n===0&&1/n==-1/0}function e2(n){return typeof n=="number"&&Number.isInteger(n)&&!Gd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="";function t2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=dT(e)),e=n2(n.get(t),e);return dT(e)}function n2(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case Lb:t+="";break;default:t+=l}}return t}function dT(n){return n+Lb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ub(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pd(this.root,e,this.comparator,!1)}getReverseIterator(){return new pd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pd(this.root,e,this.comparator,!0)}}class pd{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Zt.RED,this.left=o??Zt.EMPTY,this.right=l??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Zt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Zt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hT(this.data.getIterator())}getIteratorFrom(e){return new hT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ft(this.comparator);return t.data=e,t}}class hT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new Rn([])}unionWith(e){let t=new Ft(en.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Rn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ia(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Ob("Invalid base64 string: "+l):l}})(e);return new tn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let u=0;u<o.length;++u)l+=String.fromCharCode(o[u]);return l})(e);return new tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const i2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ps(n){if(Xe(!!n,39018),typeof n=="string"){let e=0;const t=i2.exec(n);if(Xe(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function gs(n){return typeof n=="string"?tn.fromBase64String(n):tn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="server_timestamp",Bb="__type__",Fb="__previous_value__",zb="__local_write_time__";function lg(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Bb])==null?void 0:i.stringValue)===qb}function pf(n){const e=n.mapValue.fields[Fb];return lg(e)?pf(e):e}function vu(n){const e=ps(n.mapValue.fields[zb].timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,t,i,o,l,u,d,m,f,T){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=f,this.isUsingEmulator=T}}const Hd="(default)";class _u{constructor(e,t){this.projectId=e,this.database=t||Hd}static empty(){return new _u("","")}get isDefaultDatabase(){return this.database===Hd}isEqual(e){return e instanceof _u&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="__type__",s2="__max__",gd={mapValue:{}},Hb="__vector__",jd="value";function ys(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lg(n)?4:a2(n)?9007199254740991:o2(n)?10:11:we(28295,{value:n})}function Hi(n,e){if(n===e)return!0;const t=ys(n);if(t!==ys(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vu(n).isEqual(vu(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const u=ps(o.timestampValue),d=ps(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return gs(o.bytesValue).isEqual(gs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return At(o.geoPointValue.latitude)===At(l.geoPointValue.latitude)&&At(o.geoPointValue.longitude)===At(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return At(o.integerValue)===At(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const u=At(o.doubleValue),d=At(l.doubleValue);return u===d?Gd(u)===Gd(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Ia(n.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:case 11:return(function(o,l){const u=o.mapValue.fields||{},d=l.mapValue.fields||{};if(fT(u)!==fT(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(d[m]===void 0||!Hi(u[m],d[m])))return!1;return!0})(n,e);default:return we(52216,{left:n})}}function Tu(n,e){return(n.values||[]).find((t=>Hi(t,e)))!==void 0}function Na(n,e){if(n===e)return 0;const t=ys(n),i=ys(e);if(t!==i)return Ge(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ge(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const d=At(l.integerValue||l.doubleValue),m=At(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return mT(n.timestampValue,e.timestampValue);case 4:return mT(vu(n),vu(e));case 5:return yp(n.stringValue,e.stringValue);case 6:return(function(l,u){const d=gs(l),m=gs(u);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const d=l.split("/"),m=u.split("/");for(let f=0;f<d.length&&f<m.length;f++){const T=Ge(d[f],m[f]);if(T!==0)return T}return Ge(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const d=Ge(At(l.latitude),At(u.latitude));return d!==0?d:Ge(At(l.longitude),At(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return pT(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var b,w,D,L;const d=l.fields||{},m=u.fields||{},f=(b=d[jd])==null?void 0:b.arrayValue,T=(w=m[jd])==null?void 0:w.arrayValue,x=Ge(((D=f==null?void 0:f.values)==null?void 0:D.length)||0,((L=T==null?void 0:T.values)==null?void 0:L.length)||0);return x!==0?x:pT(f,T)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===gd.mapValue&&u===gd.mapValue)return 0;if(l===gd.mapValue)return 1;if(u===gd.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),f=u.fields||{},T=Object.keys(f);m.sort(),T.sort();for(let x=0;x<m.length&&x<T.length;++x){const b=yp(m[x],T[x]);if(b!==0)return b;const w=Na(d[m[x]],f[T[x]]);if(w!==0)return w}return Ge(m.length,T.length)})(n.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function mT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ge(n,e);const t=ps(n),i=ps(e),o=Ge(t.seconds,i.seconds);return o!==0?o:Ge(t.nanos,i.nanos)}function pT(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Na(t[o],i[o]);if(l)return l}return Ge(t.length,i.length)}function Ra(n){return vp(n)}function vp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ps(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return gs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return xe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=vp(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const u of i)l?l=!1:o+=",",o+=`${u}:${vp(t.fields[u])}`;return o+"}"})(n.mapValue):we(61005,{value:n})}function Cd(n){switch(ys(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pf(n);return e?16+Cd(e):16;case 5:return 2*n.stringValue.length;case 6:return gs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Cd(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return bs(i.fields,((l,u)=>{o+=l.length+Cd(u)})),o})(n.mapValue);default:throw we(13486,{value:n})}}function gT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _p(n){return!!n&&"integerValue"in n}function ug(n){return!!n&&"arrayValue"in n}function yT(n){return!!n&&"nullValue"in n}function vT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Id(n){return!!n&&"mapValue"in n}function o2(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Gb])==null?void 0:i.stringValue)===Hb}function lu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return bs(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=lu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lu(n.arrayValue.values[t]);return e}return{...n}}function a2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===s2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Id(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lu(t)}setAll(e){let t=en.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=lu(u):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Id(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Id(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){bs(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Tn(lu(this.value))}}function jb(n){const e=[];return bs(n.fields,((t,i)=>{const o=new en([t]);if(Id(i)){const l=jb(i.mapValue).fields;if(l.length===0)e.push(o);else for(const u of l)e.push(o.child(u))}else e.push(o)})),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,i,o,l,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new on(e,0,Ie.min(),Ie.min(),Ie.min(),Tn.empty(),0)}static newFoundDocument(e,t,i,o){return new on(e,1,t,Ie.min(),i,o,0)}static newNoDocument(e,t){return new on(e,2,t,Ie.min(),Ie.min(),Tn.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,Ie.min(),Ie.min(),Tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,t){this.position=e,this.inclusive=t}}function _T(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],u=n.position[o];if(l.field.isKeyField()?i=xe.comparator(xe.fromName(u.referenceValue),t.key):i=Na(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function TT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Hi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t="asc"){this.field=e,this.dir=t}}function l2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{}class Lt extends Yb{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new c2(e,t,i):t==="array-contains"?new h2(e,i):t==="in"?new m2(e,i):t==="not-in"?new p2(e,i):t==="array-contains-any"?new g2(e,i):new Lt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new d2(e,i):new f2(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Na(t,this.value)):t!==null&&ys(this.value)===ys(t)&&this.matchesComparison(Na(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class di extends Yb{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new di(e,t)}matches(e){return Jb(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Jb(n){return n.op==="and"}function Kb(n){return u2(n)&&Jb(n)}function u2(n){for(const e of n.filters)if(e instanceof di)return!1;return!0}function Tp(n){if(n instanceof Lt)return n.field.canonicalString()+n.op.toString()+Ra(n.value);if(Kb(n))return n.filters.map((e=>Tp(e))).join(",");{const e=n.filters.map((t=>Tp(t))).join(",");return`${n.op}(${e})`}}function $b(n,e){return n instanceof Lt?(function(i,o){return o instanceof Lt&&i.op===o.op&&i.field.isEqual(o.field)&&Hi(i.value,o.value)})(n,e):n instanceof di?(function(i,o){return o instanceof di&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,u,d)=>l&&$b(u,o.filters[d])),!0):!1})(n,e):void we(19439)}function Qb(n){return n instanceof Lt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ra(t.value)}`})(n):n instanceof di?(function(t){return t.op.toString()+" {"+t.getFilters().map(Qb).join(" ,")+"}"})(n):"Filter"}class c2 extends Lt{constructor(e,t,i){super(e,t,i),this.key=xe.fromName(i.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class d2 extends Lt{constructor(e,t){super(e,"in",t),this.keys=Wb("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class f2 extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=Wb("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Wb(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>xe.fromName(i.referenceValue)))}class h2 extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ug(t)&&Tu(t.arrayValue,this.value)}}class m2 extends Lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Tu(this.value.arrayValue,t)}}class p2 extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Tu(this.value.arrayValue,t)}}class g2 extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ug(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Tu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,t=null,i=[],o=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=u,this.endAt=d,this.Te=null}}function xT(n,e=null,t=[],i=[],o=null,l=null,u=null){return new y2(n,e,t,i,o,l,u)}function cg(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Tp(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),mf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ra(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ra(i))).join(",")),e.Te=t}return e.Te}function dg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!l2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$b(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!TT(n.startAt,e.startAt)&&TT(n.endAt,e.endAt)}function xp(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,t=null,i=[],o=[],l=null,u="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function v2(n,e,t,i,o,l,u,d){return new Fa(n,e,t,i,o,l,u,d)}function fg(n){return new Fa(n)}function ET(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Xb(n){return n.collectionGroup!==null}function uu(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ft(en.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((f=>{f.isInequality()&&(d=d.add(f.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new xu(l,i))})),t.has(en.keyField().canonicalString())||e.Ie.push(new xu(en.keyField(),i))}return e.Ie}function qi(n){const e=Re(n);return e.Ee||(e.Ee=_2(e,uu(n))),e.Ee}function _2(n,e){if(n.limitType==="F")return xT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new xu(o.field,l)}));const t=n.endAt?new Yd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Yd(n.startAt.position,n.startAt.inclusive):null;return xT(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Ep(n,e){const t=n.filters.concat([e]);return new Fa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Jd(n,e,t){return new Fa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gf(n,e){return dg(qi(n),qi(e))&&n.limitType===e.limitType}function Zb(n){return`${cg(qi(n))}|lt:${n.limitType}`}function da(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Qb(o))).join(", ")}]`),mf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Ra(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Ra(o))).join(",")),`Target(${i})`})(qi(n))}; limitType=${n.limitType})`}function yf(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):xe.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of uu(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,m){const f=_T(u,d,m);return u.inclusive?f<=0:f<0})(i.startAt,uu(i),o)||i.endAt&&!(function(u,d,m){const f=_T(u,d,m);return u.inclusive?f>=0:f>0})(i.endAt,uu(i),o))})(n,e)}function T2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function eS(n){return(e,t)=>{let i=!1;for(const o of uu(n)){const l=x2(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function x2(n,e,t){const i=n.field.isKeyField()?xe.comparator(e.key,t.key):(function(l,u,d){const m=u.data.field(l),f=d.data.field(l);return m!==null&&f!==null?Na(m,f):we(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){bs(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return Ub(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=new gt(xe.comparator);function _r(){return E2}const tS=new gt(xe.comparator);function iu(...n){let e=tS;for(const t of n)e=e.insert(t.key,t);return e}function nS(n){let e=tS;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ro(){return cu()}function iS(){return cu()}function cu(){return new vo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const b2=new gt(xe.comparator),S2=new Ft(xe.comparator);function He(...n){let e=S2;for(const t of n)e=e.add(t);return e}const A2=new Ft(Ge);function w2(){return A2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gd(e)?"-0":e}}function rS(n){return{integerValue:""+n}}function C2(n,e){return e2(e)?rS(e):hg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(){this._=void 0}}function I2(n,e,t){return n instanceof Kd?(function(o,l){const u={fields:{[Bb]:{stringValue:qb},[zb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&lg(l)&&(l=pf(l)),l&&(u.fields[Fb]=l),{mapValue:u}})(t,e):n instanceof Eu?oS(n,e):n instanceof bu?aS(n,e):(function(o,l){const u=sS(o,l),d=bT(u)+bT(o.Ae);return _p(u)&&_p(o.Ae)?rS(d):hg(o.serializer,d)})(n,e)}function N2(n,e,t){return n instanceof Eu?oS(n,e):n instanceof bu?aS(n,e):t}function sS(n,e){return n instanceof $d?(function(i){return _p(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Kd extends vf{}class Eu extends vf{constructor(e){super(),this.elements=e}}function oS(n,e){const t=lS(e);for(const i of n.elements)t.some((o=>Hi(o,i)))||t.push(i);return{arrayValue:{values:t}}}class bu extends vf{constructor(e){super(),this.elements=e}}function aS(n,e){let t=lS(e);for(const i of n.elements)t=t.filter((o=>!Hi(o,i)));return{arrayValue:{values:t}}}class $d extends vf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function bT(n){return At(n.integerValue||n.doubleValue)}function lS(n){return ug(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function R2(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof Eu&&o instanceof Eu||i instanceof bu&&o instanceof bu?Ia(i.elements,o.elements,Hi):i instanceof $d&&o instanceof $d?Hi(i.Ae,o.Ae):i instanceof Kd&&o instanceof Kd})(n.transform,e.transform)}class k2{constructor(e,t){this.version=e,this.transformResults=t}}class kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class _f{}function uS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Tf(n.key,kn.none()):new ku(n.key,n.data,kn.none());{const t=n.data,i=Tn.empty();let o=new Ft(en.comparator);for(let l of e.fields)if(!o.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),o=o.add(l)}return new Ss(n.key,i,new Rn(o.toArray()),kn.none())}}function M2(n,e,t){n instanceof ku?(function(o,l,u){const d=o.value.clone(),m=AT(o.fieldTransforms,l,u.transformResults);d.setAll(m),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Ss?(function(o,l,u){if(!Nd(o.precondition,l))return void l.convertToUnknownDocument(u.version);const d=AT(o.fieldTransforms,l,u.transformResults),m=l.data;m.setAll(cS(o)),m.setAll(d),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,t):(function(o,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function du(n,e,t,i){return n instanceof ku?(function(l,u,d,m){if(!Nd(l.precondition,u))return d;const f=l.value.clone(),T=wT(l.fieldTransforms,m,u);return f.setAll(T),u.convertToFoundDocument(u.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ss?(function(l,u,d,m){if(!Nd(l.precondition,u))return d;const f=wT(l.fieldTransforms,m,u),T=u.data;return T.setAll(cS(l)),T.setAll(f),u.convertToFoundDocument(u.version,T).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((x=>x.field)))})(n,e,t,i):(function(l,u,d){return Nd(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function D2(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=sS(i.transform,o||null);l!=null&&(t===null&&(t=Tn.empty()),t.set(i.field,l))}return t||null}function ST(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ia(i,o,((l,u)=>R2(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ku extends _f{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ss extends _f{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function cS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function AT(n,e,t){const i=new Map;Xe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],u=l.transform,d=e.data.field(l.field);i.set(l.field,N2(u,d,t[o]))}return i}function wT(n,e,t){const i=new Map;for(const o of n){const l=o.transform,u=t.data.field(o.field);i.set(o.field,I2(l,u,e))}return i}class Tf extends _f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class P2 extends _f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&M2(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=du(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=du(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=iS();return this.mutations.forEach((o=>{const l=e.get(o.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=t.has(o.key)?null:d;const m=uS(u,d);m!==null&&i.set(o.key,m),u.isValidDocument()||u.convertToNoDocument(Ie.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),He())}isEqual(e){return this.batchId===e.batchId&&Ia(this.mutations,e.mutations,((t,i)=>ST(t,i)))&&Ia(this.baseMutations,e.baseMutations,((t,i)=>ST(t,i)))}}class mg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Xe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return b2})();const l=e.mutations;for(let u=0;u<l.length;u++)o=o.insert(l[u].key,i[u].version);return new mg(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,Ye;function O2(n){switch(n){case ne.OK:return we(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return we(15467,{code:n})}}function dS(n){if(n===void 0)return yr("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Vt.OK:return ne.OK;case Vt.CANCELLED:return ne.CANCELLED;case Vt.UNKNOWN:return ne.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return ne.INTERNAL;case Vt.UNAVAILABLE:return ne.UNAVAILABLE;case Vt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Vt.NOT_FOUND:return ne.NOT_FOUND;case Vt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Vt.ABORTED:return ne.ABORTED;case Vt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Vt.DATA_LOSS:return ne.DATA_LOSS;default:return we(39323,{code:n})}}(Ye=Vt||(Vt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=new fs([4294967295,4294967295],0);function CT(n){const e=q2().encode(n),t=new wb;return t.update(e),new Uint8Array(t.digest())}function IT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new fs([t,i],0),new fs([o,l],0)]}class pg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ru(`Invalid padding: ${t}`);if(i<0)throw new ru(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ru(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ru(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=fs.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(fs.fromNumber(i)));return o.compare(B2)===1&&(o=new fs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=CT(e),[i,o]=IT(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,o,l);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new pg(l,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=CT(e),[i,o]=IT(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,o,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Mu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new xf(Ie.min(),o,new gt(Ge),_r(),He())}}class Mu{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Mu(i,t,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class fS{constructor(e,t){this.targetId=e,this.Ce=t}}class hS{constructor(e,t,i=tn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class NT{constructor(){this.ve=0,this.Fe=RT(),this.Me=tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),t=He(),i=He();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:we(38017,{changeType:l})}})),new Mu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=RT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class F2{constructor(e){this.Ge=e,this.ze=new Map,this.je=_r(),this.Je=yd(),this.He=yd(),this.Ye=new gt(Ge)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(xp(l))if(i===0){const u=new xe(l.path);this.et(t,u,on.newNoDocument(u,Ie.min()))}else Xe(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const d=this.ut(e),m=d?this.ct(d,e,u):1;if(m!==0){this.it(t);const f=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let u,d;try{u=gs(i).toUint8Array()}catch(m){if(m instanceof Ob)return Ca("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new pg(u,o,l)}catch(m){return Ca(m instanceof ru?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const d=this.ot(u);if(d){if(l.current&&xp(d.target)){const m=new xe(d.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,on.newNoDocument(m,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let i=He();this.He.forEach(((l,u)=>{let d=!0;u.forEachWhile((m=>{const f=this.ot(m);return!f||f.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const o=new xf(e,t,this.Ye,this.je,i);return this.je=_r(),this.Je=yd(),this.He=yd(),this.Ye=new gt(Ge),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new NT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ft(Ge),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ft(Ge),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new NT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function yd(){return new gt(xe.comparator)}function RT(){return new gt(xe.comparator)}const z2={asc:"ASCENDING",desc:"DESCENDING"},G2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},H2={and:"AND",or:"OR"};class j2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bp(n,e){return n.useProto3Json||mf(e)?e:{value:e}}function Qd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Y2(n,e){return Qd(n,e.toTimestamp())}function Bi(n){return Xe(!!n,49232),Ie.fromTimestamp((function(t){const i=ps(t);return new lt(i.seconds,i.nanos)})(n))}function gg(n,e){return Sp(n,e).canonicalString()}function Sp(n,e){const t=(function(o){return new ut(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function pS(n){const e=ut.fromString(n);return Xe(TS(e),10190,{key:e.toString()}),e}function Ap(n,e){return gg(n.databaseId,e.path)}function Wm(n,e){const t=pS(e);if(t.get(1)!==n.databaseId.projectId)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new xe(yS(t))}function gS(n,e){return gg(n.databaseId,e)}function J2(n){const e=pS(n);return e.length===4?ut.emptyPath():yS(e)}function wp(n){return new ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yS(n){return Xe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function kT(n,e,t){return{name:Ap(n,e),fields:t.value.mapValue.fields}}function K2(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:we(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(f,T){return f.useProto3Json?(Xe(T===void 0||typeof T=="string",58123),tn.fromBase64String(T||"")):(Xe(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),tn.fromUint8Array(T||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(f){const T=f.code===void 0?ne.UNKNOWN:dS(f.code);return new me(T,f.message||"")})(u);t=new hS(i,o,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Wm(n,i.document.name),l=Bi(i.document.updateTime),u=i.document.createTime?Bi(i.document.createTime):Ie.min(),d=new Tn({mapValue:{fields:i.document.fields}}),m=on.newFoundDocument(o,l,u,d),f=i.targetIds||[],T=i.removedTargetIds||[];t=new Rd(f,T,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Wm(n,i.document),l=i.readTime?Bi(i.readTime):Ie.min(),u=on.newNoDocument(o,l),d=i.removedTargetIds||[];t=new Rd([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Wm(n,i.document),l=i.removedTargetIds||[];t=new Rd([],l,o,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,u=new U2(o,l),d=i.targetId;t=new fS(d,u)}}return t}function $2(n,e){let t;if(e instanceof ku)t={update:kT(n,e.key,e.value)};else if(e instanceof Tf)t={delete:Ap(n,e.key)};else if(e instanceof Ss)t={update:kT(n,e.key,e.data),updateMask:rk(e.fieldMask)};else{if(!(e instanceof P2))return we(16599,{Vt:e.type});t={verify:Ap(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,u){const d=u.transform;if(d instanceof Kd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Eu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof bu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof $d)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw we(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:Y2(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:we(27497)})(n,e.precondition)),t}function Q2(n,e){return n&&n.length>0?(Xe(e!==void 0,14353),n.map((t=>(function(o,l){let u=o.updateTime?Bi(o.updateTime):Bi(l);return u.isEqual(Ie.min())&&(u=Bi(l)),new k2(u,o.transformResults||[])})(t,e)))):[]}function W2(n,e){return{documents:[gS(n,e.path)]}}function X2(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=gS(n,o);const l=(function(f){if(f.length!==0)return _S(di.create(f,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(f){if(f.length!==0)return f.map((T=>(function(b){return{field:fa(b.field),direction:tk(b.dir)}})(T)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=bp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:o}}function Z2(n){let e=J2(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Xe(i===1,65062);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let l=[];t.where&&(l=(function(x){const b=vS(x);return b instanceof di&&Kb(b)?b.getFilters():[b]})(t.where));let u=[];t.orderBy&&(u=(function(x){return x.map((b=>(function(D){return new xu(ha(D.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(b)))})(t.orderBy));let d=null;t.limit&&(d=(function(x){let b;return b=typeof x=="object"?x.value:x,mf(b)?null:b})(t.limit));let m=null;t.startAt&&(m=(function(x){const b=!!x.before,w=x.values||[];return new Yd(w,b)})(t.startAt));let f=null;return t.endAt&&(f=(function(x){const b=!x.before,w=x.values||[];return new Yd(w,b)})(t.endAt)),v2(e,o,u,l,d,"F",m,f)}function ek(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function vS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ha(t.unaryFilter.field);return Lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=ha(t.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ha(t.unaryFilter.field);return Lt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ha(t.unaryFilter.field);return Lt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Lt.create(ha(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return di.create(t.compositeFilter.filters.map((i=>vS(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(n):we(30097,{filter:n})}function tk(n){return z2[n]}function nk(n){return G2[n]}function ik(n){return H2[n]}function fa(n){return{fieldPath:n.canonicalString()}}function ha(n){return en.fromServerFormat(n.fieldPath)}function _S(n){return n instanceof Lt?(function(t){if(t.op==="=="){if(vT(t.value))return{unaryFilter:{field:fa(t.field),op:"IS_NAN"}};if(yT(t.value))return{unaryFilter:{field:fa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(vT(t.value))return{unaryFilter:{field:fa(t.field),op:"IS_NOT_NAN"}};if(yT(t.value))return{unaryFilter:{field:fa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fa(t.field),op:nk(t.op),value:t.value}}})(n):n instanceof di?(function(t){const i=t.getFilters().map((o=>_S(o)));return i.length===1?i[0]:{compositeFilter:{op:ik(t.op),filters:i}}})(n):we(54877,{filter:n})}function rk(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function TS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,t,i,o,l=Ie.min(),u=Ie.min(),d=tn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new as(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.yt=e}}function ok(n){const e=Z2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Jd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this.Cn=new lk}addToCollectionParentIndex(e,t){return this.Cn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(ms.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(ms.min())}updateCollectionGroup(e,t,i){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class lk{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ft(ut.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ft(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xS=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(xS,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ka(0)}static cr(){return new ka(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="LruGarbageCollector",uk=1048576;function PT([n,e],[t,i]){const o=Ge(n,t);return o===0?Ge(e,i):o}class ck{constructor(e){this.Ir=e,this.buffer=new Ft(PT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();PT(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class dk{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(DT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ba(t)?ge(DT,"Ignoring IndexedDB error during garbage collection: ",t):await qa(t)}await this.Vr(3e5)}))}}class fk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ae.resolve(hf.ce);const i=new ck(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(MT)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),MT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,u,d,m,f;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,u=Date.now(),this.nthSequenceNumber(e,o)))).next((x=>(i=x,d=Date.now(),this.removeTargets(e,i,t)))).next((x=>(l=x,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((x=>(f=Date.now(),ca()<=ze.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-T}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${x} documents in `+(f-m)+`ms
Total Duration: ${f-T}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:x}))))}}function hk(n,e){return new fk(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(){this.changes=new vo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ae.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&du(i.mutation,o,Rn.empty(),lt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,He()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=He()){const o=ro();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let u=iu();return l.forEach(((d,m)=>{u=u.insert(d,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=ro();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,He())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let l=_r();const u=cu(),d=(function(){return cu()})();return t.forEach(((m,f)=>{const T=i.get(f.key);o.has(f.key)&&(T===void 0||T.mutation instanceof Ss)?l=l.insert(f.key,f):T!==void 0?(u.set(f.key,T.mutation.getFieldMask()),du(T.mutation,f,T.mutation.getFieldMask(),lt.now())):u.set(f.key,Rn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((f,T)=>u.set(f,T))),t.forEach(((f,T)=>d.set(f,new pk(T,u.get(f)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=cu();let o=new gt(((u,d)=>u-d)),l=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((m=>{const f=t.get(m);if(f===null)return;let T=i.get(m)||Rn.empty();T=d.applyToLocalView(f,T),i.set(m,T);const x=(o.get(d.batchId)||He()).add(m);o=o.insert(d.batchId,x)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),f=m.key,T=m.value,x=iS();T.forEach((b=>{if(!l.has(b)){const w=uS(t.get(b),i.get(b));w!==null&&x.set(b,w),l=l.add(b)}})),u.push(this.documentOverlayCache.saveOverlays(e,f,x))}return ae.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return xe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Xb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const u=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):ae.resolve(ro());let d=yu,m=l;return u.next((f=>ae.forEach(f,((T,x)=>(d<x.largestBatchId&&(d=x.largestBatchId),l.get(T)?ae.resolve():this.remoteDocumentCache.getEntry(e,T).next((b=>{m=m.insert(T,b)}))))).next((()=>this.populateOverlays(e,f,l))).next((()=>this.computeViews(e,m,f,He()))).next((T=>({batchId:d,changes:nS(T)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((i=>{let o=iu();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let u=iu();return this.indexManager.getCollectionParents(e,l).next((d=>ae.forEach(d,(m=>{const f=(function(x,b){return new Fa(b,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,f,i,o).next((T=>{T.forEach(((x,b)=>{u=u.insert(x,b)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((u=>{l.forEach(((m,f)=>{const T=f.getKey();u.get(T)===null&&(u=u.insert(T,on.newInvalidDocument(T)))}));let d=iu();return u.forEach(((m,f)=>{const T=l.get(m);T!==void 0&&du(T.mutation,f,Rn.empty(),lt.now()),yf(t,f)&&(d=d.insert(m,f))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ae.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Bi(o.createTime)}})(t)),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:ok(o.bundledQuery),readTime:Bi(o.readTime)}})(t)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(){this.overlays=new gt(xe.comparator),this.qr=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ro();return ae.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),ae.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),ae.resolve()}getOverlaysForCollection(e,t,i){const o=ro(),l=t.length+1,u=new xe(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const m=d.getNext().value,f=m.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===l&&m.largestBatchId>i&&o.set(m.getKey(),m)}return ae.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new gt(((f,T)=>f-T));const u=this.overlays.getIterator();for(;u.hasNext();){const f=u.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let T=l.get(f.largestBatchId);T===null&&(T=ro(),l=l.insert(f.largestBatchId,T)),T.set(f.getKey(),f)}}const d=ro(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((f,T)=>d.set(f,T))),!(d.size()>=o)););return ae.resolve(d)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new L2(t,i));let l=this.qr.get(t);l===void 0&&(l=He(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(){this.Qr=new Ft(Yt.$r),this.Ur=new Ft(Yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Yt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Yt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new xe(new ut([])),i=new Yt(t,e),o=new Yt(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new xe(new ut([])),i=new Yt(t,e),o=new Yt(t,e+1);let l=He();return this.Ur.forEachInRange([i,o],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Yt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Yt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return xe.comparator(e.key,t.key)||Ge(e.Yr,t.Yr)}static Kr(e,t){return Ge(e.Yr,t.Yr)||xe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ft(Yt.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new V2(l,t,i,o);this.mutationQueue.push(u);for(const d of o)this.Zr=this.Zr.add(new Yt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ae.resolve(u)}lookupMutationBatch(e,t){return ae.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return ae.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?ag:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Yt(t,0),o=new Yt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(u=>{const d=this.Xr(u.Yr);l.push(d)})),ae.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ft(Ge);return t.forEach((o=>{const l=new Yt(o,0),u=new Yt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(d=>{i=i.add(d.Yr)}))})),ae.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;xe.isDocumentKey(l)||(l=l.child(""));const u=new Yt(new xe(l),0);let d=new Ft(Ge);return this.Zr.forEachWhile((m=>{const f=m.key.path;return!!i.isPrefixOf(f)&&(f.length===o&&(d=d.add(m.Yr)),!0)}),u),ae.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Xe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ae.forEach(t.mutations,(o=>{const l=new Yt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Yt(t,0),o=this.Zr.firstAfterOrEqual(i);return ae.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.ri=e,this.docs=(function(){return new gt(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ae.resolve(i?i.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let i=_r();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():on.newInvalidDocument(o))})),ae.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=_r();const u=t.path,d=new xe(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:f,value:{document:T}}=m.getNext();if(!u.isPrefixOf(f.path))break;f.path.length>u.length+1||QR($R(T),i)<=0||(o.has(T.key)||yf(t,T))&&(l=l.insert(T.key,T.mutableCopy()))}return ae.resolve(l)}getAllFromCollectionGroup(e,t,i,o){we(9500)}ii(e,t){return ae.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new Ek(this)}getSize(e){return ae.resolve(this.size)}}class Ek extends mk{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),ae.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e){this.persistence=e,this.si=new vo((t=>cg(t)),dg),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.oi=0,this._i=new yg,this.targetCount=0,this.ai=ka.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ae.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ka(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Pr(t),ae.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),ae.waitFor(l).next((()=>o))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ae.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ae.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((u=>{l.push(o.markPotentiallyOrphaned(e,u))})),ae.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ae.resolve(i)}containsKey(e,t){return ae.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,t){this.ui={},this.overlays={},this.ci=new hf(0),this.li=!1,this.li=!0,this.hi=new _k,this.referenceDelegate=e(this),this.Pi=new bk(this),this.indexManager=new ak,this.remoteDocumentCache=(function(o){return new xk(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new sk(t),this.Ii=new yk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new Tk(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ge("MemoryPersistence","Starting transaction:",e);const o=new Sk(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return ae.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class Sk extends XR{constructor(e){super(),this.currentSequenceNumber=e}}class vg{constructor(e){this.persistence=e,this.Ri=new yg,this.Vi=null}static mi(e){return new vg(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ae.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,(i=>{const o=xe.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Ie.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ae.or([()=>ae.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Wd{constructor(e,t){this.persistence=e,this.pi=new vo((i=>t2(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=hk(this,t)}static mi(e,t){return new Wd(e,t)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return ae.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?ae.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((d=>{d||(i++,l.removeEntry(u,Ie.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ae.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ae.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ae.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Cd(e.data.value)),t}br(e,t,i){return ae.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ae.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=He(),o=He();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new _g(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return rI()?8:ZR(ln())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new Ak;return this.Ss(e,t,u).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(ca()<=ze.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",da(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(ca()<=ze.DEBUG&&ge("QueryEngine","Query:",da(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(ca()<=ze.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",da(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qi(t))):ae.resolve())}ys(e,t){if(ET(t))return ae.resolve(null);let i=qi(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Jd(t,null,"F"),i=qi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const u=He(...l);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((m=>{const f=this.Ds(t,d);return this.Cs(t,f,u,m.readTime)?this.ys(e,Jd(t,null,"F")):this.vs(e,f,t,m)}))))})))))}ws(e,t,i,o){return ET(t)||o.isEqual(Ie.min())?ae.resolve(null):this.ps.getDocuments(e,i).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,i,o)?ae.resolve(null):(ca()<=ze.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),da(t)),this.vs(e,u,t,KR(o,yu)).next((d=>d)))}))}Ds(e,t){let i=new Ft(eS(e));return t.forEach(((o,l)=>{yf(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return ca()<=ze.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",da(t)),this.ps.getDocumentsMatchingQuery(e,t,ms.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="LocalStore",Ck=3e8;class Ik{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new gt(Ge),this.xs=new vo((l=>cg(l)),dg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Nk(n,e,t,i){return new Ik(n,e,t,i)}async function bS(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const u=[],d=[];let m=He();for(const f of o){u.push(f.batchId);for(const T of f.mutations)m=m.add(T.key)}for(const f of l){d.push(f.batchId);for(const T of f.mutations)m=m.add(T.key)}return t.localDocuments.getDocuments(i,m).next((f=>({Ls:f,removedBatchIds:u,addedBatchIds:d})))}))}))}function Rk(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,m,f,T){const x=f.batch,b=x.keys();let w=ae.resolve();return b.forEach((D=>{w=w.next((()=>T.getEntry(m,D))).next((L=>{const O=f.docVersions.get(D);Xe(O!==null,48541),L.version.compareTo(O)<0&&(x.applyToRemoteDocument(L,f),L.isValidDocument()&&(L.setReadTime(f.commitVersion),T.addEntry(L)))}))})),w.next((()=>d.mutationQueue.removeMutationBatch(m,x)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let m=He();for(let f=0;f<d.mutationResults.length;++f)d.mutationResults[f].transformResults.length>0&&(m=m.add(d.batch.mutations[f].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function SS(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function kk(n,e){const t=Re(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((T,x)=>{const b=o.get(x);if(!b)return;d.push(t.Pi.removeMatchingKeys(l,T.removedDocuments,x).next((()=>t.Pi.addMatchingKeys(l,T.addedDocuments,x))));let w=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(x)!==null?w=w.withResumeToken(tn.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):T.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(T.resumeToken,i)),o=o.insert(x,w),(function(L,O,z){return L.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=Ck?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(b,w,T)&&d.push(t.Pi.updateTargetData(l,w))}));let m=_r(),f=He();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,T))})),d.push(Mk(l,u,e.documentUpdates).next((T=>{m=T.ks,f=T.qs}))),!i.isEqual(Ie.min())){const T=t.Pi.getLastRemoteSnapshotVersion(l).next((x=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(T)}return ae.waitFor(d).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,f))).next((()=>m))})).then((l=>(t.Ms=o,l)))}function Mk(n,e,t){let i=He(),o=He();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let u=_r();return t.forEach(((d,m)=>{const f=l.get(d);m.isFoundDocument()!==f.isFoundDocument()&&(o=o.add(d)),m.isNoDocument()&&m.version.isEqual(Ie.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!f.isValidDocument()||m.version.compareTo(f.version)>0||m.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):ge(Tg,"Ignoring outdated watch update for ",d,". Current version:",f.version," Watch version:",m.version)})),{ks:u,qs:o}}))}function Dk(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=ag),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Pk(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,ae.resolve(o)):t.Pi.allocateTargetId(i).next((u=>(o=new as(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Cp(n,e,t){const i=Re(n),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Ba(u))throw u;ge(Tg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function VT(n,e,t){const i=Re(n);let o=Ie.min(),l=He();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,f,T){const x=Re(m),b=x.xs.get(T);return b!==void 0?ae.resolve(x.Ms.get(b)):x.Pi.getTargetData(f,T)})(i,u,qi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,d.targetId).next((m=>{l=m}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?o:Ie.min(),t?l:He()))).next((d=>(Vk(i,T2(e),d),{documents:d,Qs:l})))))}function Vk(n,e,t){let i=n.Os.get(e)||Ie.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class LT{constructor(){this.activeTargetIds=w2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lk{constructor(){this.Mo=new LT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new LT,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="ConnectivityMonitor";class OT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(UT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(UT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vd=null;function Ip(){return vd===null?vd=(function(){return 268435456+Math.round(2147483648*Math.random())})():vd++,"0x"+vd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="RestConnection",Ok={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Hd?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const u=Ip(),d=this.zo(e,t.toUriEncodedString());ge(Xm,`Sending RPC '${e}' ${u}:`,d,i);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,o,l);const{host:f}=new URL(d),T=Va(f);return this.Jo(e,d,m,i,T).then((x=>(ge(Xm,`Received RPC '${e}' ${u}: `,x),x)),(x=>{throw Ca(Xm,`RPC '${e}' ${u} failed with error: `,x,"url: ",d,"request:",i),x}))}Ho(e,t,i,o,l,u){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Oa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=Ok[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class Fk extends qk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const u=Ip();return new Promise(((d,m)=>{const f=new Cb;f.setWithCredentials(!0),f.listenOnce(Ib.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case wd.NO_ERROR:const x=f.getResponseJson();ge(rn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(x)),d(x);break;case wd.TIMEOUT:ge(rn,`RPC '${e}' ${u} timed out`),m(new me(ne.DEADLINE_EXCEEDED,"Request time out"));break;case wd.HTTP_ERROR:const b=f.getStatus();if(ge(rn,`RPC '${e}' ${u} failed with status:`,b,"response text:",f.getResponseText()),b>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const D=w==null?void 0:w.error;if(D&&D.status&&D.message){const L=(function(z){const G=z.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(G)>=0?G:ne.UNKNOWN})(D.status);m(new me(L,D.message))}else m(new me(ne.UNKNOWN,"Server responded with status "+f.getStatus()))}else m(new me(ne.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:u,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ge(rn,`RPC '${e}' ${u} completed.`)}}));const T=JSON.stringify(o);ge(rn,`RPC '${e}' ${u} sending request:`,o),f.send(t,"POST",T,i,15)}))}T_(e,t,i){const o=Ip(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=kb(),d=Rb(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(m.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const T=l.join("");ge(rn,`Creating RPC '${e}' stream ${o}: ${T}`,m);const x=u.createWebChannel(T,m);this.I_(x);let b=!1,w=!1;const D=new Bk({Yo:O=>{w?ge(rn,`Not sending because RPC '${e}' stream ${o} is closed:`,O):(b||(ge(rn,`Opening RPC '${e}' stream ${o} transport.`),x.open(),b=!0),ge(rn,`RPC '${e}' stream ${o} sending:`,O),x.send(O))},Zo:()=>x.close()}),L=(O,z,G)=>{O.listen(z,(j=>{try{G(j)}catch(ee){setTimeout((()=>{throw ee}),0)}}))};return L(x,nu.EventType.OPEN,(()=>{w||(ge(rn,`RPC '${e}' stream ${o} transport opened.`),D.o_())})),L(x,nu.EventType.CLOSE,(()=>{w||(w=!0,ge(rn,`RPC '${e}' stream ${o} transport closed`),D.a_(),this.E_(x))})),L(x,nu.EventType.ERROR,(O=>{w||(w=!0,Ca(rn,`RPC '${e}' stream ${o} transport errored. Name:`,O.name,"Message:",O.message),D.a_(new me(ne.UNAVAILABLE,"The operation could not be completed")))})),L(x,nu.EventType.MESSAGE,(O=>{var z;if(!w){const G=O.data[0];Xe(!!G,16349);const j=G,ee=(j==null?void 0:j.error)||((z=j[0])==null?void 0:z.error);if(ee){ge(rn,`RPC '${e}' stream ${o} received error:`,ee);const le=ee.status;let ie=(function(k){const P=Vt[k];if(P!==void 0)return dS(P)})(le),N=ee.message;ie===void 0&&(ie=ne.INTERNAL,N="Unknown error status: "+le+" with message "+ee.message),w=!0,D.a_(new me(ie,N)),x.close()}else ge(rn,`RPC '${e}' stream ${o} received:`,G),D.u_(G)}})),L(d,Nb.STAT_EVENT,(O=>{O.stat===gp.PROXY?ge(rn,`RPC '${e}' stream ${o} detected buffering proxy`):O.stat===gp.NOPROXY&&ge(rn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{D.__()}),0),D}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Zm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(n){return new j2(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="PersistentStream";class wS{constructor(e,t,i,o,l,u,d,m){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new AS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(yr(t.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new me(ne.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(qT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ge(qT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class zk extends wS{constructor(e,t,i,o,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=K2(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ie.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ie.min():u.readTime?Bi(u.readTime):Ie.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=wp(this.serializer),t.addTarget=(function(l,u){let d;const m=u.target;if(d=xp(m)?{documents:W2(l,m)}:{query:X2(l,m).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=mS(l,u.resumeToken);const f=bp(l,u.expectedCount);f!==null&&(d.expectedCount=f)}else if(u.snapshotVersion.compareTo(Ie.min())>0){d.readTime=Qd(l,u.snapshotVersion.toTimestamp());const f=bp(l,u.expectedCount);f!==null&&(d.expectedCount=f)}return d})(this.serializer,e);const i=ek(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=wp(this.serializer),t.removeTarget=e,this.q_(t)}}class Gk extends wS{constructor(e,t,i,o,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Q2(e.writeResults,e.commitTime),i=Bi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=wp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>$2(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{}class jk extends Hk{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,Sp(t,i),o,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new me(ne.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,Sp(t,i),o,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new me(ne.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Yk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yr(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="RemoteStore";class Jk{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{_o(this)&&(ge(mo,"Restarting streams for network reachability change."),await(async function(m){const f=Re(m);f.Ea.add(4),await Du(f),f.Ra.set("Unknown"),f.Ea.delete(4),await bf(f)})(this))}))})),this.Ra=new Yk(i,o)}}async function bf(n){if(_o(n))for(const e of n.da)await e(!0)}async function Du(n){for(const e of n.da)await e(!1)}function CS(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Sg(t)?bg(t):za(t).O_()&&Eg(t,e))}function xg(n,e){const t=Re(n),i=za(t);t.Ia.delete(e),i.O_()&&IS(t,e),t.Ia.size===0&&(i.O_()?i.L_():_o(t)&&t.Ra.set("Unknown"))}function Eg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}za(n).Y_(e)}function IS(n,e){n.Va.Ue(e),za(n).Z_(e)}function bg(n){n.Va=new F2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),za(n).start(),n.Ra.ua()}function Sg(n){return _o(n)&&!za(n).x_()&&n.Ia.size>0}function _o(n){return Re(n).Ea.size===0}function NS(n){n.Va=void 0}async function Kk(n){n.Ra.set("Online")}async function $k(n){n.Ia.forEach(((e,t)=>{Eg(n,e)}))}async function Qk(n,e){NS(n),Sg(n)?(n.Ra.ha(e),bg(n)):n.Ra.set("Unknown")}async function Wk(n,e,t){if(n.Ra.set("Online"),e instanceof hS&&e.state===2&&e.cause)try{await(async function(o,l){const u=l.cause;for(const d of l.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(i){ge(mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Xd(n,i)}else if(e instanceof Rd?n.Va.Ze(e):e instanceof fS?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ie.min()))try{const i=await SS(n.localStore);t.compareTo(i)>=0&&await(function(l,u){const d=l.Va.Tt(u);return d.targetChanges.forEach(((m,f)=>{if(m.resumeToken.approximateByteSize()>0){const T=l.Ia.get(f);T&&l.Ia.set(f,T.withResumeToken(m.resumeToken,u))}})),d.targetMismatches.forEach(((m,f)=>{const T=l.Ia.get(m);if(!T)return;l.Ia.set(m,T.withResumeToken(tn.EMPTY_BYTE_STRING,T.snapshotVersion)),IS(l,m);const x=new as(T.target,m,f,T.sequenceNumber);Eg(l,x)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){ge(mo,"Failed to raise snapshot:",i),await Xd(n,i)}}async function Xd(n,e,t){if(!Ba(e))throw e;n.Ea.add(1),await Du(n),n.Ra.set("Offline"),t||(t=()=>SS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ge(mo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await bf(n)}))}function RS(n,e){return e().catch((t=>Xd(n,t,e)))}async function Sf(n){const e=Re(n),t=vs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ag;for(;Xk(e);)try{const o=await Dk(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,Zk(e,o)}catch(o){await Xd(e,o)}kS(e)&&MS(e)}function Xk(n){return _o(n)&&n.Ta.length<10}function Zk(n,e){n.Ta.push(e);const t=vs(n);t.O_()&&t.X_&&t.ea(e.mutations)}function kS(n){return _o(n)&&!vs(n).x_()&&n.Ta.length>0}function MS(n){vs(n).start()}async function eM(n){vs(n).ra()}async function tM(n){const e=vs(n);for(const t of n.Ta)e.ea(t.mutations)}async function nM(n,e,t){const i=n.Ta.shift(),o=mg.from(i,e,t);await RS(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Sf(n)}async function iM(n,e){e&&vs(n).X_&&await(async function(i,o){if((function(u){return O2(u)&&u!==ne.ABORTED})(o.code)){const l=i.Ta.shift();vs(i).B_(),await RS(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Sf(i)}})(n,e),kS(n)&&MS(n)}async function BT(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),ge(mo,"RemoteStore received new credentials");const i=_o(t);t.Ea.add(3),await Du(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await bf(t)}async function rM(n,e){const t=Re(n);e?(t.Ea.delete(2),await bf(t)):e||(t.Ea.add(2),await Du(t),t.Ra.set("Unknown"))}function za(n){return n.ma||(n.ma=(function(t,i,o){const l=Re(t);return l.sa(),new zk(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:Kk.bind(null,n),t_:$k.bind(null,n),r_:Qk.bind(null,n),H_:Wk.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Sg(n)?bg(n):n.Ra.set("Unknown")):(await n.ma.stop(),NS(n))}))),n.ma}function vs(n){return n.fa||(n.fa=(function(t,i,o){const l=Re(t);return l.sa(),new Gk(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:eM.bind(null,n),r_:iM.bind(null,n),ta:tM.bind(null,n),na:nM.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Sf(n)):(await n.fa.stop(),n.Ta.length>0&&(ge(mo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const u=Date.now()+i,d=new Ag(e,t,u,o,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wg(n,e){if(yr("AsyncQueue",`${e}: ${n}`),Ba(n))return new me(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{static emptySet(e){return new Ta(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||xe.comparator(t.key,i.key):(t,i)=>xe.comparator(t.key,i.key),this.keyedMap=iu(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ta)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ta;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(){this.ga=new gt(xe.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ma{constructor(e,t,i,o,l,u,d,m,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,o,l){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Ma(e,t,Ta.emptySet(t),u,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class oM{constructor(){this.queries=zT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Re(t),l=o.queries;o.queries=zT(),l.forEach(((u,d)=>{for(const m of d.Sa)m.onError(i)}))})(this,new me(ne.ABORTED,"Firestore shutting down"))}}function zT(){return new vo((n=>Zb(n)),gf)}async function DS(n,e){const t=Re(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new sM,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=wg(u,`Initialization of query '${da(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Cg(t)}async function PS(n,e){const t=Re(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function aM(n,e){const t=Re(n);let i=!1;for(const o of e){const l=o.query,u=t.queries.get(l);if(u){for(const d of u.Sa)d.Fa(o)&&(i=!0);u.wa=o}}i&&Cg(t)}function lM(n,e,t){const i=Re(n),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function Cg(n){n.Ca.forEach((e=>{e.next()}))}var Np,GT;(GT=Np||(Np={})).Ma="default",GT.Cache="cache";class VS{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Ma(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Np.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e){this.key=e}}class US{constructor(e){this.key=e}}class uM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=He(),this.mutatedKeys=He(),this.eu=eS(e),this.tu=new Ta(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new FT,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,f=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,x)=>{const b=o.get(T),w=yf(this.query,x)?x:null,D=!!b&&this.mutatedKeys.has(b.key),L=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let O=!1;b&&w?b.data.isEqual(w.data)?D!==L&&(i.track({type:3,doc:w}),O=!0):this.su(b,w)||(i.track({type:2,doc:w}),O=!0,(m&&this.eu(w,m)>0||f&&this.eu(w,f)<0)&&(d=!0)):!b&&w?(i.track({type:0,doc:w}),O=!0):b&&!w&&(i.track({type:1,doc:b}),O=!0,(m||f)&&(d=!0)),O&&(w?(u=u.add(w),l=L?l.add(T):l.delete(T)):(u=u.delete(T),l=l.delete(T)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const T=this.query.limitType==="F"?u.last():u.first();u=u.delete(T.key),l=l.delete(T.key),i.track({type:1,doc:T})}return{tu:u,iu:i,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((T,x)=>(function(w,D){const L=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:O})}};return L(w)-L(D)})(T.type,x.type)||this.eu(T.doc,x.doc))),this.ou(i),o=o??!1;const d=t&&!o?this._u():[],m=this.Xa.size===0&&this.current&&!o?1:0,f=m!==this.Za;return this.Za=m,u.length!==0||f?{snapshot:new Ma(this.query,e.tu,l,u,e.mutatedKeys,m===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new FT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=He(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new US(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new LS(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=He();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ma.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ig="SyncEngine";class cM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class dM{constructor(e){this.key=e,this.hu=!1}}class fM{constructor(e,t,i,o,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new vo((d=>Zb(d)),gf),this.Iu=new Map,this.Eu=new Set,this.du=new gt(xe.comparator),this.Au=new Map,this.Ru=new yg,this.Vu={},this.mu=new Map,this.fu=ka.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function hM(n,e,t=!0){const i=GS(n);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await OS(i,e,t,!0),o}async function mM(n,e){const t=GS(n);await OS(t,e,!0,!1)}async function OS(n,e,t,i){const o=await Pk(n.localStore,qi(e)),l=o.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await pM(n,e,l,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&CS(n.remoteStore,o),d}async function pM(n,e,t,i,o){n.pu=(x,b,w)=>(async function(L,O,z,G){let j=O.view.ru(z);j.Cs&&(j=await VT(L.localStore,O.query,!1).then((({documents:N})=>O.view.ru(N,j))));const ee=G&&G.targetChanges.get(O.targetId),le=G&&G.targetMismatches.get(O.targetId)!=null,ie=O.view.applyChanges(j,L.isPrimaryClient,ee,le);return jT(L,O.targetId,ie.au),ie.snapshot})(n,x,b,w);const l=await VT(n.localStore,e,!0),u=new uM(e,l.Qs),d=u.ru(l.documents),m=Mu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),f=u.applyChanges(d,n.isPrimaryClient,m);jT(n,t,f.au);const T=new cM(e,t,u);return n.Tu.set(e,T),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function gM(n,e,t){const i=Re(n),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((u=>!gf(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Cp(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&xg(i.remoteStore,o.targetId),Rp(i,o.targetId)})).catch(qa)):(Rp(i,o.targetId),await Cp(i.localStore,o.targetId,!0))}async function yM(n,e){const t=Re(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),xg(t.remoteStore,i.targetId))}async function vM(n,e,t){const i=AM(n);try{const o=await(function(u,d){const m=Re(u),f=lt.now(),T=d.reduce(((w,D)=>w.add(D.key)),He());let x,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let D=_r(),L=He();return m.Ns.getEntries(w,T).next((O=>{D=O,D.forEach(((z,G)=>{G.isValidDocument()||(L=L.add(z))}))})).next((()=>m.localDocuments.getOverlayedDocuments(w,D))).next((O=>{x=O;const z=[];for(const G of d){const j=D2(G,x.get(G.key).overlayedDocument);j!=null&&z.push(new Ss(G.key,j,jb(j.value.mapValue),kn.exists(!0)))}return m.mutationQueue.addMutationBatch(w,f,z,d)})).next((O=>{b=O;const z=O.applyToLocalDocumentSet(x,L);return m.documentOverlayCache.saveOverlays(w,O.batchId,z)}))})).then((()=>({batchId:b.batchId,changes:nS(x)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,m){let f=u.Vu[u.currentUser.toKey()];f||(f=new gt(Ge)),f=f.insert(d,m),u.Vu[u.currentUser.toKey()]=f})(i,o.batchId,t),await Pu(i,o.changes),await Sf(i.remoteStore)}catch(o){const l=wg(o,"Failed to persist write");t.reject(l)}}async function qS(n,e){const t=Re(n);try{const i=await kk(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const u=t.Au.get(l);u&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?Xe(u.hu,14607):o.removedDocuments.size>0&&(Xe(u.hu,42227),u.hu=!1))})),await Pu(t,i,e)}catch(i){await qa(i)}}function HT(n,e,t){const i=Re(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const m=Re(u);m.onlineState=d;let f=!1;m.queries.forEach(((T,x)=>{for(const b of x.Sa)b.va(d)&&(f=!0)})),f&&Cg(m)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function _M(n,e,t){const i=Re(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let u=new gt(xe.comparator);u=u.insert(l,on.newNoDocument(l,Ie.min()));const d=He().add(l),m=new xf(Ie.min(),new Map,new gt(Ge),u,d);await qS(i,m),i.du=i.du.remove(l),i.Au.delete(e),Ng(i)}else await Cp(i.localStore,e,!1).then((()=>Rp(i,e,t))).catch(qa)}async function TM(n,e){const t=Re(n),i=e.batch.batchId;try{const o=await Rk(t.localStore,e);FS(t,i,null),BS(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Pu(t,o)}catch(o){await qa(o)}}async function xM(n,e,t){const i=Re(n);try{const o=await(function(u,d){const m=Re(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let T;return m.mutationQueue.lookupMutationBatch(f,d).next((x=>(Xe(x!==null,37113),T=x.keys(),m.mutationQueue.removeMutationBatch(f,x)))).next((()=>m.mutationQueue.performConsistencyCheck(f))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(f,T,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,T))).next((()=>m.localDocuments.getDocuments(f,T)))}))})(i.localStore,e);FS(i,e,t),BS(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Pu(i,o)}catch(o){await qa(o)}}function BS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function FS(n,e,t){const i=Re(n);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Rp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||zS(n,i)}))}function zS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(xg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Ng(n))}function jT(n,e,t){for(const i of t)i instanceof LS?(n.Ru.addReference(i.key,e),EM(n,i)):i instanceof US?(ge(Ig,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||zS(n,i.key)):we(19791,{wu:i})}function EM(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ge(Ig,"New document in limbo: "+t),n.Eu.add(i),Ng(n))}function Ng(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new xe(ut.fromString(e)),i=n.fu.next();n.Au.set(i,new dM(t)),n.du=n.du.insert(t,i),CS(n.remoteStore,new as(qi(fg(t.path)),i,"TargetPurposeLimboResolution",hf.ce))}}async function Pu(n,e,t){const i=Re(n),o=[],l=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,m)=>{u.push(i.pu(m,e,t).then((f=>{var T;if((f||t)&&i.isPrimaryClient){const x=f?!f.fromCache:(T=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:T.current;i.sharedClientState.updateQueryState(m.targetId,x?"current":"not-current")}if(f){o.push(f);const x=_g.As(m.targetId,f);l.push(x)}})))})),await Promise.all(u),i.Pu.H_(o),await(async function(m,f){const T=Re(m);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>ae.forEach(f,(b=>ae.forEach(b.Es,(w=>T.persistence.referenceDelegate.addReference(x,b.targetId,w))).next((()=>ae.forEach(b.ds,(w=>T.persistence.referenceDelegate.removeReference(x,b.targetId,w)))))))))}catch(x){if(!Ba(x))throw x;ge(Tg,"Failed to update sequence numbers: "+x)}for(const x of f){const b=x.targetId;if(!x.fromCache){const w=T.Ms.get(b),D=w.snapshotVersion,L=w.withLastLimboFreeSnapshotVersion(D);T.Ms=T.Ms.insert(b,L)}}})(i.localStore,l))}async function bM(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){ge(Ig,"User change. New user:",e.toKey());const i=await bS(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((d=>{d.forEach((m=>{m.reject(new me(ne.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Pu(t,i.Ls)}}function SM(n,e){const t=Re(n),i=t.Au.get(e);if(i&&i.hu)return He().add(i.key);{let o=He();const l=t.Iu.get(e);if(!l)return o;for(const u of l){const d=t.Tu.get(u);o=o.unionWith(d.view.nu)}return o}}function GS(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_M.bind(null,e),e.Pu.H_=aM.bind(null,e.eventManager),e.Pu.yu=lM.bind(null,e.eventManager),e}function AM(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xM.bind(null,e),e}class Zd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ef(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Nk(this.persistence,new wk,e.initialUser,this.serializer)}Cu(e){return new ES(vg.mi,this.serializer)}Du(e){return new Lk}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zd.provider={build:()=>new Zd};class wM extends Zd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Xe(this.persistence.referenceDelegate instanceof Wd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new dk(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new ES((i=>Wd.mi(i,t)),this.serializer)}}class kp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>HT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=bM.bind(null,this.syncEngine),await rM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new oM})()}createDatastore(e){const t=Ef(e.databaseInfo.databaseId),i=(function(l){return new Fk(l)})(e.databaseInfo);return(function(l,u,d,m){return new jk(l,u,d,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,u,d){return new Jk(i,o,l,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>HT(this.syncEngine,t,0)),(function(){return OT.v()?new OT:new Uk})())}createSyncEngine(e,t){return(function(o,l,u,d,m,f,T){const x=new fM(o,l,u,d,m,f);return T&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Re(o);ge(mo,"RemoteStore shutting down."),l.Ea.add(5),await Du(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}kp.provider={build:()=>new kp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="FirestoreClient";class CM{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=sn.UNAUTHENTICATED,this.clientId=og.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async u=>{ge(_s,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ge(_s,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=wg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function ep(n,e){n.asyncQueue.verifyOperationInProgress(),ge(_s,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await bS(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function YT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await IM(n);ge(_s,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>BT(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>BT(e.remoteStore,o))),n._onlineComponents=e}async function IM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge(_s,"Using user provided OfflineComponentProvider");try{await ep(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ca("Error using user provided cache. Falling back to memory cache: "+t),await ep(n,new Zd)}}else ge(_s,"Using default OfflineComponentProvider"),await ep(n,new wM(void 0));return n._offlineComponents}async function jS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge(_s,"Using user provided OnlineComponentProvider"),await YT(n,n._uninitializedComponentsProvider._online)):(ge(_s,"Using default OnlineComponentProvider"),await YT(n,new kp))),n._onlineComponents}function NM(n){return jS(n).then((e=>e.syncEngine))}async function YS(n){const e=await jS(n),t=e.eventManager;return t.onListen=hM.bind(null,e.syncEngine),t.onUnlisten=gM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=mM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=yM.bind(null,e.syncEngine),t}function RM(n,e,t={}){const i=new mr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,m,f){const T=new HS({next:b=>{T.Nu(),u.enqueueAndForget((()=>PS(l,x)));const w=b.docs.has(d);!w&&b.fromCache?f.reject(new me(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&b.fromCache&&m&&m.source==="server"?f.reject(new me(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(b)},error:b=>f.reject(b)}),x=new VS(fg(d.path),T,{includeMetadataChanges:!0,qa:!0});return DS(l,x)})(await YS(n),n.asyncQueue,e,t,i))),i.promise}function kM(n,e,t={}){const i=new mr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,m,f){const T=new HS({next:b=>{T.Nu(),u.enqueueAndForget((()=>PS(l,x))),b.fromCache&&m.source==="server"?f.reject(new me(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(b)},error:b=>f.reject(b)}),x=new VS(d,T,{includeMetadataChanges:!0,qa:!0});return DS(l,x)})(await YS(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="firestore.googleapis.com",KT=!0;class $T{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=KS,this.ssl=KT}else this.host=e.host,this.ssl=e.ssl??KT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uk)throw new me(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JS(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Af{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $T({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $T(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new LR;switch(i.type){case"firstParty":return new BR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new me(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=JT.get(t);i&&(ge("ComponentProvider","Removing Datastore"),JT.delete(t),i.terminate())})(this),Promise.resolve()}}function MM(n,e,t,i={}){var f;n=vr(n,Af);const o=Va(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(UE(`https://${d}`),OE("Firestore",!0)),l.host!==KS&&l.host!==d&&Ca("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:d,ssl:o,emulatorOptions:i};if(!lo(m,u)&&(n._setSettings(m),i.mockUserToken)){let T,x;if(typeof i.mockUserToken=="string")T=i.mockUserToken,x=sn.MOCK_USER;else{T=$C(i.mockUserToken,(f=n._app)==null?void 0:f.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new me(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new sn(b)}n._authCredentials=new UR(new Db(T,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new As(this.firestore,e,this._query)}}class Ot{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Ru(t,Ot._jsonSchema))return new Ot(e,i||null,new xe(ut.fromString(t.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:Ut("string",Ot._jsonSchemaVersion),referencePath:Ut("string")};class hs extends As{constructor(e,t,i){super(e,t,fg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new xe(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function Ts(n,e,...t){if(n=zt(n),Pb("collection","path",e),n instanceof Af){const i=ut.fromString(e,...t);return lT(i),new hs(n,null,i)}{if(!(n instanceof Ot||n instanceof hs))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ut.fromString(e,...t));return lT(i),new hs(n.firestore,null,i)}}function fi(n,e,...t){if(n=zt(n),arguments.length===1&&(e=og.newId()),Pb("doc","path",e),n instanceof Af){const i=ut.fromString(e,...t);return aT(i),new Ot(n,null,new xe(i))}{if(!(n instanceof Ot||n instanceof hs))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ut.fromString(e,...t));return aT(i),new Ot(n.firestore,n instanceof hs?n.converter:null,new xe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="AsyncQueue";class WT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new AS(this,"async_queue_retry"),this._c=()=>{const i=Zm();i&&ge(QT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Zm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Zm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new mr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ba(e))throw e;ge(QT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,yr("INTERNAL UNHANDLED ERROR: ",XT(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Ag.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:XT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function XT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ga extends Af{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new WT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new WT(e),this._firestoreClient=void 0,await e}}}function DM(n,e){const t=typeof n=="object"?n:zE(),i=typeof n=="string"?n:Hd,o=Qp(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=JC("firestore");l&&MM(o,...l)}return o}function wf(n){if(n._terminated)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||PM(n),n._firestoreClient}function PM(n){var i,o,l;const e=n._freezeSettings(),t=(function(d,m,f,T){return new r2(d,m,f,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,JS(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new CM(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(tn.fromBase64String(e))}catch(t){throw new me(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kn(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ru(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:Ut("string",Kn._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fi._jsonSchemaVersion}}static fromJSON(e){if(Ru(e,Fi._jsonSchema))return new Fi(e.latitude,e.longitude)}}Fi._jsonSchemaVersion="firestore/geoPoint/1.0",Fi._jsonSchema={type:Ut("string",Fi._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:zi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ru(e,zi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new zi(e.vectorValues);throw new me(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zi._jsonSchemaVersion="firestore/vectorValue/1.0",zi._jsonSchema={type:Ut("string",zi._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=/^__.*__$/;class LM{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms):new ku(e,this.data,t,this.fieldTransforms)}}class $S{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function QS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:n})}}class kg{constructor(e,t,i,o,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new kg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ef(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(QS(this.Ac)&&VM.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class UM{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Ef(e)}Cc(e,t,i,o=!1){return new kg({Ac:e,methodName:t,Dc:i,path:en.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mg(n){const e=n._freezeSettings(),t=Ef(n._databaseId);return new UM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function WS(n,e,t,i,o,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);Dg("Data must be an object, but it was:",u,i);const d=XS(i,u);let m,f;if(l.merge)m=new Rn(u.fieldMask),f=u.fieldTransforms;else if(l.mergeFields){const T=[];for(const x of l.mergeFields){const b=Mp(e,x,t);if(!u.contains(b))throw new me(ne.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);eA(T,b)||T.push(b)}m=new Rn(T),f=u.fieldTransforms.filter((x=>m.covers(x.field)))}else m=null,f=u.fieldTransforms;return new LM(new Tn(d),m,f)}class If extends Rg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof If}}function OM(n,e,t,i){const o=n.Cc(1,e,t);Dg("Data must be an object, but it was:",o,i);const l=[],u=Tn.empty();bs(i,((m,f)=>{const T=Pg(e,m,t);f=zt(f);const x=o.yc(T);if(f instanceof If)l.push(T);else{const b=Vu(f,x);b!=null&&(l.push(T),u.set(T,b))}}));const d=new Rn(l);return new $S(u,d,o.fieldTransforms)}function qM(n,e,t,i,o,l){const u=n.Cc(1,e,t),d=[Mp(e,i,t)],m=[o];if(l.length%2!=0)throw new me(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(Mp(e,l[b])),m.push(l[b+1]);const f=[],T=Tn.empty();for(let b=d.length-1;b>=0;--b)if(!eA(f,d[b])){const w=d[b];let D=m[b];D=zt(D);const L=u.yc(w);if(D instanceof If)f.push(w);else{const O=Vu(D,L);O!=null&&(f.push(w),T.set(w,O))}}const x=new Rn(f);return new $S(T,x,u.fieldTransforms)}function BM(n,e,t,i=!1){return Vu(t,n.Cc(i?4:3,e))}function Vu(n,e){if(ZS(n=zt(n)))return Dg("Unsupported field value:",e,n),XS(n,e);if(n instanceof Rg)return(function(i,o){if(!QS(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let u=0;for(const d of i){let m=Vu(d,o.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),u++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=zt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return C2(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=lt.fromDate(i);return{timestampValue:Qd(o.serializer,l)}}if(i instanceof lt){const l=new lt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Qd(o.serializer,l)}}if(i instanceof Fi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Kn)return{bytesValue:mS(o.serializer,i._byteString)};if(i instanceof Ot){const l=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:gg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof zi)return(function(u,d){return{mapValue:{fields:{[Gb]:{stringValue:Hb},[jd]:{arrayValue:{values:u.toArray().map((f=>{if(typeof f!="number")throw d.Sc("VectorValues must only contain numeric values.");return hg(d.serializer,f)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${ff(i)}`)})(n,e)}function XS(n,e){const t={};return Ub(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bs(n,((i,o)=>{const l=Vu(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function ZS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof lt||n instanceof Fi||n instanceof Kn||n instanceof Ot||n instanceof Rg||n instanceof zi)}function Dg(n,e,t){if(!ZS(t)||!Vb(t)){const i=ff(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Mp(n,e,t){if((e=zt(e))instanceof Cf)return e._internalPath;if(typeof e=="string")return Pg(n,e);throw ef("Field path arguments must be of type string or ",n,!1,void 0,t)}const FM=new RegExp("[~\\*/\\[\\]]");function Pg(n,e,t){if(e.search(FM)>=0)throw ef(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cf(...e.split("."))._internalPath}catch{throw ef(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ef(n,e,t,i,o){const l=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${i}`),u&&(m+=` in document ${o}`),m+=")"),new me(ne.INVALID_ARGUMENT,d+n+m)}function eA(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Nf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class zM extends tA{data(){return super.data()}}function Nf(n,e){return typeof e=="string"?Pg(n,e):e instanceof Cf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new me(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vg{}class Lg extends Vg{}function po(n,e,...t){let i=[];e instanceof Vg&&i.push(e),i=i.concat(t),(function(l){const u=l.filter((m=>m instanceof Ug)).length,d=l.filter((m=>m instanceof Rf)).length;if(u>1||u>0&&d>0)throw new me(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class Rf extends Lg{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Rf(e,t,i)}_apply(e){const t=this._parse(e);return rA(e._query,t),new As(e.firestore,e.converter,Ep(e._query,t))}_parse(e){const t=Mg(e.firestore);return(function(l,u,d,m,f,T,x){let b;if(f.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new me(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){ex(x,T);const D=[];for(const L of x)D.push(ZT(m,l,L));b={arrayValue:{values:D}}}else b=ZT(m,l,x)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||ex(x,T),b=BM(d,u,x,T==="in"||T==="not-in");return Lt.create(f,T,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function kf(n,e,t){const i=e,o=Nf("where",n);return Rf._create(o,i,t)}class Ug extends Vg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ug(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:di.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let u=o;const d=l.getFlattenedFilters();for(const m of d)rA(u,m),u=Ep(u,m)})(e._query,t),new As(e.firestore,e.converter,Ep(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Og extends Lg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Og(e,t)}_apply(e){const t=(function(o,l,u){if(o.startAt!==null)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xu(l,u)})(e._query,this._field,this._direction);return new As(e.firestore,e.converter,(function(o,l){const u=o.explicitOrderBy.concat([l]);return new Fa(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function nA(n,e="asc"){const t=e,i=Nf("orderBy",n);return Og._create(i,t)}class qg extends Lg{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new qg(e,t,i)}_apply(e){return new As(e.firestore,e.converter,Jd(e._query,this._limit,this._limitType))}}function iA(n){return JR("limit",n),qg._create("limit",n,"F")}function ZT(n,e,t){if(typeof(t=zt(t))=="string"){if(t==="")throw new me(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xb(e)&&t.indexOf("/")!==-1)throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(ut.fromString(t));if(!xe.isDocumentKey(i))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return gT(n,new xe(i))}if(t instanceof Ot)return gT(n,t._key);throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(t)}.`)}function ex(n,e){if(!Array.isArray(n)||n.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rA(n,e){const t=(function(o,l){for(const u of o)for(const d of u.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class HM{convertValue(e,t="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return bs(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[jd].arrayValue)==null?void 0:o.values)==null?void 0:l.map((u=>At(u.doubleValue)));return new zi(t)}convertGeoPoint(e){return new Fi(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=pf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){const t=ps(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ut.fromString(e);Xe(TS(i),9688,{name:e});const o=new _u(i.get(1),i.get(3)),l=new xe(i.popFirst(5));return o.isEqual(t)||yr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class su{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oo extends tA{constructor(e,t,i,o,l,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Nf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=oo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}oo._jsonSchemaVersion="firestore/documentSnapshot/1.0",oo._jsonSchema={type:Ut("string",oo._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class kd extends oo{data(e={}){return super.data(e)}}class xa{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new su(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new kd(this._firestore,this._userDataWriter,i.key,i,new su(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const m=new kd(o._firestore,o._userDataWriter,d.doc.key,d.doc,new su(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new kd(o._firestore,o._userDataWriter,d.doc.key,d.doc,new su(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let f=-1,T=-1;return d.type!==0&&(f=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),T=u.indexOf(d.doc.key)),{type:jM(d.type),doc:m,oldIndex:f,newIndex:T}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=og.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(n){n=vr(n,Ot);const e=vr(n.firestore,Ga);return RM(wf(e),n._key).then((t=>JM(e,n,t)))}xa._jsonSchemaVersion="firestore/querySnapshot/1.0",xa._jsonSchema={type:Ut("string",xa._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class oA extends HM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}}function To(n){n=vr(n,As);const e=vr(n.firestore,Ga),t=wf(e),i=new oA(e);return GM(n._query),kM(t,n._query).then((o=>new xa(e,i,n,o)))}function Df(n,e,t){n=vr(n,Ot);const i=vr(n.firestore,Ga),o=sA(n.converter,e,t);return Bg(i,[WS(Mg(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,kn.none())])}function YM(n){return Bg(vr(n.firestore,Ga),[new Tf(n._key,kn.none())])}function Bg(n,e){return(function(i,o){const l=new mr;return i.asyncQueue.enqueueAndForget((async()=>vM(await NM(i),o,l))),l.promise})(wf(n),e)}function JM(n,e,t){const i=t.docs.get(e._key),o=new oA(n);return new oo(n,o,e._key,i,new su(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Mg(e)}set(e,t,i){this._verifyNotCommitted();const o=tp(e,this._firestore),l=sA(o.converter,t,i),u=WS(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,i);return this._mutations.push(u.toMutation(o._key,kn.none())),this}update(e,t,i,...o){this._verifyNotCommitted();const l=tp(e,this._firestore);let u;return u=typeof(t=zt(t))=="string"||t instanceof Cf?qM(this._dataReader,"WriteBatch.update",l._key,t,i,o):OM(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,kn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=tp(e,this._firestore);return this._mutations=this._mutations.concat(new Tf(t._key,kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new me(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tp(n,e){if((n=zt(n)).firestore!==e)throw new me(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(n){return wf(n=vr(n,Ga)),new KM(n,(e=>Bg(n,e)))}(function(e,t=!0){(function(o){Oa=o})(La),wa(new uo("firestore",((i,{instanceIdentifier:o,options:l})=>{const u=i.getProvider("app").getImmediate(),d=new Ga(new OR(i.getProvider("auth-internal")),new FR(u,i.getProvider("app-check-internal")),(function(f,T){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new me(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _u(f.options.projectId,T)})(u,o),u);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),ds(iT,rT,e),ds(iT,rT,"esm2020")})();var $M="firebase",QM="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ds($M,QM,"app");const WM={apiKey:"AIzaSyC23SBapgM4lAfyzc9HY6R9Zt96h8FDNC",authDomain:"diariodeobraiabeta.firebaseapp.com",projectId:"diariodeobraiabeta",storageBucket:"diariodeobraiabeta.appspot.com",messagingSenderId:"62365217585",appId:"1:62365217585:web:4bcc689f74935b3f1dfda0"},aA=FE(WM),Lu=PR(aA),_t=DM(aA),XM=n=>EN(Lu,async e=>{if(e){const t=fi(_t,"users",e.uid),i=await Mf(t);if(i.exists()){const o=i.data(),l=o.trialEndsAt instanceof lt?o.trialEndsAt.toMillis():o.trialEndsAt;n({id:i.id,...o,trialEndsAt:l})}else console.error("User authenticated but no data found in Firestore."),n(null)}else n(null)}),np="acessoplatform@gmail.com",ZM=async()=>{const n=po(Ts(_t,"users"),kf("email","==",np));if((await To(n)).empty){console.log("Admin user not found, creating one...");try{const t=await pb(Lu,np,"admin"),i={email:np,name:"Administrador",whatsapp:"00000000000",role:"admin",accessLevel:"full",trialEndsAt:null};await Df(fi(_t,"users",t.user.uid),i),console.log("Admin user created successfully.")}catch(t){console.error("Error creating admin user:",t)}}};ZM();const Pf=async n=>{let e;if(!n||n.role==="admin")e=po(Ts(_t,"users"));else if(n.role==="gestor")e=po(Ts(_t,"users"),kf("createdBy","==",n.id));else return[];return(await To(e)).docs.map(i=>({id:i.id,...i.data()}))},zg=async n=>{const e=Fg(_t);n.forEach(t=>{const{id:i,...o}=t;delete o.password;const l=fi(_t,"users",i);e.set(l,o,{merge:!0})}),await e.commit()},eD=async(n,e)=>{const t=await _N(Lu,n,e),i=fi(_t,"users",t.user.uid),o=await Mf(i);if(!o.exists())throw new Error("Usurio autenticado, mas sem dados de perfil. Contate o suporte.");return{id:o.id,...o.data()}},tD=async()=>{await bN(Lu)},nD=async n=>{if(!n.password)throw new Error("Senha  obrigatria para criar um novo usurio.");if(!(await To(po(Ts(_t,"users"),kf("email","==",n.email)))).empty)throw new Error("Este e-mail j est cadastrado.");const t=await pb(Lu,n.email,n.password),{password:i,...o}=n,l={...o,trialEndsAt:n.trialEndsAt?lt.fromMillis(n.trialEndsAt):null};return await Df(fi(_t,"users",t.user.uid),l),{id:t.user.uid,...l}},iD=async n=>{await YM(fi(_t,"users",n))},rD=async n=>{const e=po(Ts(_t,"projects"));let i=(await To(e)).docs.map(o=>({id:o.id,...o.data()}));return n.role==="campo"&&(i=i.filter(o=>{var l;return(l=n.assignedProjectIds)==null?void 0:l.includes(o.id)})),i},sD=async n=>{const e=Fg(_t);n.forEach(t=>{const i=fi(_t,"projects",t.id);e.set(i,t)}),await e.commit()},oD=async()=>(await To(Ts(_t,"constructors"))).docs.map(e=>({id:e.id,...e.data()})),aD=async n=>{const e=Fg(_t);n.forEach(t=>{const i=fi(_t,"constructors",t.id);e.set(i,t)}),await e.commit()},lD=async()=>{const n=fi(_t,"settings","platform"),e=await Mf(n),t={name:"Dirio de Obra Inteligente",logo:"",termsOfService:"",privacyPolicy:""};return e.exists()?{...t,...e.data()}:t},uD=async n=>{await Df(fi(_t,"settings","platform"),n)},lA=(n,e)=>fi(_t,`projects/${n}/logs`,e),cD=async(n,e)=>{const t=lA(n,e),i=await Mf(t);return i.exists()?i.data():null},dD=async(n,e,t)=>{const i=lA(n,e);await Df(i,t,{merge:!0})},fD=async(n,e)=>{const t=Ts(_t,`projects/${n}/logs`),i=po(t,kf("logData.date","<",e),nA("logData.date","desc"),iA(1)),o=await To(i);return o.empty?null:o.docs[0].data()},hD=async n=>{const e=Ts(_t,`projects/${n}/logs`),t=po(e,nA("logData.date","desc"),iA(20)),i=await To(t),o=new Map;return i.docs.forEach(l=>{const u=l.data();u.tasks&&u.tasks.forEach(d=>{d.text&&!o.has(d.text.toLowerCase().trim())&&o.set(d.text.toLowerCase().trim(),d)})}),Array.from(o.values())},mD=({user:n,onVerifyPayment:e,platformSettings:t})=>{const i=!!n.kiwifyPaymentUrl,[o,l]=te.useState(!1),u=()=>{n.kiwifyPaymentUrl&&(window.open(n.kiwifyPaymentUrl,"_blank"),l(!0))};return g.jsxs("div",{className:"w-full max-w-sm bg-light-card dark:bg-dark-card p-8 rounded-xl shadow-lg text-center",children:[g.jsx("h2",{className:"text-2xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Seu perodo de teste terminou"}),g.jsx("p",{className:"text-gray-600 dark:text-dark-text-secondary mt-2 mb-6",children:"Para continuar acessando suas obras e utilizar todas as funcionalidades, por favor, realize o pagamento da sua assinatura."}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("button",{onClick:u,disabled:!i,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-xl transition disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[g.jsx(af,{className:"h-6 w-6"}),"Ativar Assinatura (via Kiwify)"]}),o&&g.jsxs("div",{className:"animate-fade-in",children:[g.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-text-secondary -my-2",children:"Aps concluir o pagamento, retorne e verifique seu acesso."}),g.jsxs("button",{onClick:e,className:"w-full bg-brand-indigo hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-xl transition flex items-center justify-center gap-2 animate-pulse-bright mt-4",children:[g.jsx(LC,{className:"h-6 w-6"}),"J Paguei, Verificar Acesso"]})]})]}),!i&&g.jsx("p",{className:"text-xs text-red-500 mt-4",children:"Nenhum link de pagamento configurado. Por favor, entre em contato com o administrador."})]})},pD=({onConfirmed:n,user:e})=>{const[t,i]=te.useState("verifying");return te.useEffect(()=>{const o=setTimeout(async()=>{const l={...e,accessLevel:"full"},d=(await Pf({})).map(f=>f.id===e.id?l:f);await zg(d),i("confirmed");const m=setTimeout(()=>{n(l)},1500);return()=>clearTimeout(m)},2e3);return()=>clearTimeout(o)},[n,e]),g.jsx("div",{className:"w-full max-w-sm bg-light-card dark:bg-dark-card p-8 rounded-xl shadow-lg text-center",children:t==="verifying"?g.jsxs(g.Fragment,{children:[g.jsx(Gi,{className:"h-12 w-12 text-brand-indigo mx-auto animate-spin"}),g.jsx("h2",{className:"text-xl font-bold mt-4",children:"Verificando seu pagamento..."}),g.jsx("p",{className:"text-gray-500 dark:text-dark-text-secondary mt-2",children:"Isso pode levar alguns instantes."})]}):g.jsxs(g.Fragment,{children:[g.jsx(af,{className:"h-16 w-16 text-green-500 mx-auto"}),g.jsx("h2",{className:"text-2xl font-bold mt-4 text-green-600",children:"Pagamento Confirmado!"}),g.jsx("p",{className:"text-gray-600 dark:text-dark-text-secondary mt-2",children:"Seu acesso foi liberado. Redirecionando..."})]})})},so=({label:n,value:e,onChange:t,type:i="text",required:o=!1})=>g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:n}),g.jsx("input",{type:i,value:e,onChange:l=>t(l.target.value),required:o,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo transition duration-150 ease-in-out bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600"})]}),gD=({email:n,setEmail:e,password:t,setPassword:i,handleLogin:o,isLoading:l,setView:u})=>g.jsxs("form",{onSubmit:o,children:[g.jsx("h2",{className:"text-2xl font-bold text-center text-light-text-primary dark:text-dark-text-primary mb-1",children:"Bem-vindo(a)!"}),g.jsx("p",{className:"text-center text-gray-600 dark:text-dark-text-secondary mb-6",children:"Faa login para continuar."}),g.jsx(so,{type:"email",label:"E-mail",value:n,onChange:e,required:!0}),g.jsx(so,{type:"password",label:"Senha",value:t,onChange:i,required:!0}),g.jsx("div",{className:"text-right mt-2",children:g.jsx("button",{type:"button",onClick:()=>u("forgot"),className:"text-sm font-semibold text-brand-indigo-light hover:underline",children:"Esqueceu a senha?"})}),g.jsx("button",{type:"submit",disabled:l,className:"w-full bg-brand-indigo hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-xl transition mt-4 flex justify-center items-center disabled:opacity-50",children:l?g.jsx(Gi,{className:"h-5 w-5"}):"Entrar"}),g.jsxs("p",{className:"text-center mt-4 text-sm",children:["No tem uma conta? ",g.jsx("button",{type:"button",onClick:()=>u("signup"),className:"font-semibold text-brand-indigo-light hover:underline",children:"Cadastre-se"})]})]}),yD=n=>g.jsxs("form",{onSubmit:n.handleSignUp,children:[g.jsx("h2",{className:"text-2xl font-bold text-center text-light-text-primary dark:text-dark-text-primary mb-1",children:"Crie sua Conta"}),g.jsx("p",{className:"text-center text-gray-600 dark:text-dark-text-secondary mb-6",children:"Comece seu teste de 7 dias."}),g.jsx(so,{type:"text",label:"Nome Completo",value:n.name,onChange:n.setName,required:!0}),g.jsx(so,{type:"tel",label:"WhatsApp",value:n.whatsapp,onChange:n.setWhatsapp,required:!0}),g.jsx(so,{type:"email",label:"E-mail",value:n.email,onChange:n.setEmail,required:!0}),g.jsx(so,{type:"password",label:"Senha",value:n.password,onChange:n.setPassword,required:!0}),g.jsxs("div",{className:"mt-4 flex items-start",children:[g.jsx("div",{className:"flex items-center h-5",children:g.jsx("input",{id:"terms",name:"terms",type:"checkbox",checked:n.agreedToTerms,onChange:e=>n.setAgreedToTerms(e.target.checked),className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"})}),g.jsx("div",{className:"ml-3 text-sm",children:g.jsxs("label",{htmlFor:"terms",className:"text-gray-500 dark:text-gray-400",children:["Eu concordo com os ",g.jsx("button",{type:"button",onClick:n.onOpenPrivacyPolicy,className:"font-medium text-brand-indigo-light hover:underline",children:"Termos de Uso e Poltica de Privacidade"}),"."]})})]}),g.jsx("button",{type:"submit",disabled:n.isLoading||!n.agreedToTerms,className:"w-full bg-brand-indigo hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-xl transition mt-4 flex justify-center items-center disabled:opacity-50",children:n.isLoading?g.jsx(Gi,{className:"h-5 w-5"}):"Cadastrar"}),g.jsxs("p",{className:"text-center mt-4 text-sm",children:["J tem uma conta? ",g.jsx("button",{type:"button",onClick:()=>n.setView("login"),className:"font-semibold text-brand-indigo-light hover:underline",children:"Faa login"})]})]}),vD=({email:n,setEmail:e,handleForgotPassword:t,setView:i})=>g.jsxs("form",{onSubmit:t,children:[g.jsx("h2",{className:"text-2xl font-bold text-center text-light-text-primary dark:text-dark-text-primary mb-1",children:"Recuperar Senha"}),g.jsx("p",{className:"text-center text-gray-600 dark:text-dark-text-secondary mb-6",children:"Digite seu e-mail para receber as instrues."}),g.jsx(so,{type:"email",label:"E-mail",value:n,onChange:e,required:!0}),g.jsx("button",{type:"submit",className:"w-full bg-brand-indigo hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-xl transition mt-4",children:"Recuperar"}),g.jsxs("p",{className:"text-center mt-4 text-sm",children:["Lembrou a senha? ",g.jsx("button",{type:"button",onClick:()=>i("login"),className:"font-semibold text-brand-indigo-light hover:underline",children:"Voltar para o login"})]})]}),_D=({onLoginSuccess:n,platformSettings:e,onOpenPrivacyPolicy:t})=>{const[i,o]=te.useState("login"),[l,u]=te.useState(""),[d,m]=te.useState(""),[f,T]=te.useState(""),[x,b]=te.useState(""),[w,D]=te.useState(!1),[L,O]=te.useState(""),[z,G]=te.useState(""),[j,ee]=te.useState(!1),[le,ie]=te.useState(null),[N,R]=te.useState(!1),k=async M=>{M.preventDefault(),O(""),G(""),ee(!0);try{const ce=await eD(l,d);if(ce){let Ve=!1;if(ce.role==="gestor"&&(ce.accessLevel==="trial"&&ce.trialEndsAt&&Date.now()>ce.trialEndsAt||ce.accessLevel==="none")&&(Ve=!0),Ve){const Q={...ce,accessLevel:"none"},de=(await Pf({})).map(Se=>Se.id===ce.id?Q:Se);await zg(de),ie(Q)}else n(ce)}}catch(ce){O(ce instanceof Error?ce.message:"Ocorreu um erro.")}finally{ee(!1)}},P=async M=>{if(M.preventDefault(),!w){O("Voc deve concordar com os Termos de Uso e a Poltica de Privacidade.");return}O(""),G(""),ee(!0);const ce={email:l,name:f,whatsapp:x,password:d,role:"gestor",accessLevel:"trial",trialEndsAt:Date.now()+10080*60*1e3};try{await nD(ce),G("Cadastro realizado com sucesso! Voc tem 7 dias de teste. Faa o login para comear."),o("login")}catch(Ve){O(Ve instanceof Error?Ve.message:"Ocorreu um erro.")}finally{ee(!1)}},V=M=>{M.preventDefault(),O(""),G("Se o e-mail estiver cadastrado, um link de recuperao foi enviado. (Simulao)")},U=()=>{R(!0)};return g.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-bg flex flex-col justify-center items-center p-4",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx(sf,{className:"h-12 w-auto mx-auto",logoSrc:e.logo}),g.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-dark-text-primary mt-4",children:e.name})]}),g.jsxs("div",{className:"w-full max-w-sm",children:[L&&g.jsx("p",{className:"bg-red-100 text-red-700 p-3 rounded-md mb-4 text-sm text-center",children:L}),z&&g.jsx("p",{className:"bg-green-100 text-green-700 p-3 rounded-md mb-4 text-sm text-center",children:z}),g.jsxs("div",{className:`bg-light-card dark:bg-dark-card p-8 rounded-xl shadow-lg ${le?"hidden":"block"}`,children:[i==="login"&&g.jsx(gD,{email:l,setEmail:u,password:d,setPassword:m,handleLogin:k,isLoading:j,setView:o}),i==="signup"&&g.jsx(yD,{name:f,setName:T,whatsapp:x,setWhatsapp:b,email:l,setEmail:u,password:d,setPassword:m,agreedToTerms:w,setAgreedToTerms:D,handleSignUp:P,isLoading:j,setView:o,onOpenPrivacyPolicy:t}),i==="forgot"&&g.jsx(vD,{email:l,setEmail:u,handleForgotPassword:V,setView:o})]}),le&&(N?g.jsx(pD,{user:le,onConfirmed:n}):g.jsx(mD,{user:le,onVerifyPayment:U,platformSettings:e}))]})]})},TD=({platformSettings:n,projectName:e,onGoBack:t,userName:i,onLogout:o,onOpenProfile:l,theme:u,onToggleTheme:d})=>g.jsx("header",{className:"bg-light-card dark:bg-dark-card shadow-md sticky top-0 z-40 print:hidden dark:border-b dark:border-dark-border",children:g.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex items-center justify-between h-16",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[t&&g.jsx("button",{onClick:t,className:"text-gray-500 hover:text-light-text-primary dark:hover:text-dark-text-primary transition-colors p-2 -ml-2 rounded-full",title:"Incio (Seleo de Obras)",children:g.jsx(bC,{className:"h-6 w-6"})}),g.jsx(sf,{className:"h-8 w-auto",logoSrc:n.logo}),g.jsx("h1",{className:"text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:n.name})]}),g.jsxs("div",{className:"flex items-center gap-4",children:[e&&g.jsxs("div",{className:"hidden sm:block text-right",children:[g.jsx("span",{className:"text-sm text-gray-500 dark:text-dark-text-secondary",children:"Obra"}),g.jsx("p",{className:"font-semibold text-light-text-primary dark:text-dark-text-primary",children:e})]}),i&&g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("div",{className:"hidden md:block text-right",children:[g.jsx("span",{className:"text-sm text-gray-500 dark:text-dark-text-secondary",children:"Usurio"}),g.jsx("p",{className:"font-semibold text-light-text-primary dark:text-dark-text-primary",children:i})]}),g.jsx("button",{onClick:l,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-dark-border transition-colors","aria-label":"Meu Perfil",title:"Meu Perfil",children:g.jsx(AC,{className:"h-6 w-6"})}),g.jsx("button",{onClick:d,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-dark-border transition-colors","aria-label":"Alternar tema",children:u==="light"?g.jsx(SC,{className:"h-6 w-6"}):g.jsx(AE,{className:"h-6 w-6"})}),g.jsx("button",{onClick:o,className:"bg-gray-200 dark:bg-dark-border hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-dark-text-secondary font-semibold py-2 px-4 rounded-lg transition text-sm",children:"Sair"})]})]})]})})});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let xD,ED;function bD(){return{geminiUrl:xD,vertexUrl:ED}}function SD(n,e,t,i){var o,l;if(!(n!=null&&n.baseUrl)){const u=bD();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(l=u.geminiUrl)!==null&&l!==void 0?l:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xo{}function ve(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function y(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const m=n[d];if(Array.isArray(t))for(let f=0;f<m.length;f++){const T=m[f];y(T,e.slice(l+1),t[f])}else for(const f of m)y(f,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const m=n[d];y(m[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function h(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(d=>h(d,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function AD(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),l=i.split("."),u=new Set;let d=-1;for(let m=0;m<o.length;m++)if(o[m]==="*"){d=m;break}if(d!==-1&&l.length>d)for(let m=d;m<l.length;m++){const f=l[m];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&u.add(f)}Dp(n,o,l,0,u)}}function Dp(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const l=e[i];if(l.endsWith("[]")){const u=l.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const m of d[u])Dp(m,e,t,i+1,o)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(f=>!f.startsWith("_")&&!o.has(f)),m={};for(const f of d)m[f]=u[f];for(const[f,T]of Object.entries(m)){const x=[];for(const b of t.slice(i))b==="*"?x.push(f):x.push(b);y(u,x,T)}for(const f of d)delete u[f]}}else{const u=n;l in u&&Dp(u[l],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gg(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wD(n){const e={},t=h(n,["operationName"]);t!=null&&y(e,["operationName"],t);const i=h(n,["resourceName"]);return i!=null&&y(e,["_url","resourceName"],i),e}function CD(n){const e={},t=h(n,["name"]);t!=null&&y(e,["name"],t);const i=h(n,["metadata"]);i!=null&&y(e,["metadata"],i);const o=h(n,["done"]);o!=null&&y(e,["done"],o);const l=h(n,["error"]);l!=null&&y(e,["error"],l);const u=h(n,["response","generateVideoResponse"]);return u!=null&&y(e,["response"],ND(u)),e}function ID(n){const e={},t=h(n,["name"]);t!=null&&y(e,["name"],t);const i=h(n,["metadata"]);i!=null&&y(e,["metadata"],i);const o=h(n,["done"]);o!=null&&y(e,["done"],o);const l=h(n,["error"]);l!=null&&y(e,["error"],l);const u=h(n,["response"]);return u!=null&&y(e,["response"],RD(u)),e}function ND(n){const e={},t=h(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>kD(u))),y(e,["generatedVideos"],l)}const i=h(n,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const o=h(n,["raiMediaFilteredReasons"]);return o!=null&&y(e,["raiMediaFilteredReasons"],o),e}function RD(n){const e={},t=h(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>MD(u))),y(e,["generatedVideos"],l)}const i=h(n,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const o=h(n,["raiMediaFilteredReasons"]);return o!=null&&y(e,["raiMediaFilteredReasons"],o),e}function kD(n){const e={},t=h(n,["video"]);return t!=null&&y(e,["video"],VD(t)),e}function MD(n){const e={},t=h(n,["_self"]);return t!=null&&y(e,["video"],LD(t)),e}function DD(n){const e={},t=h(n,["operationName"]);return t!=null&&y(e,["_url","operationName"],t),e}function PD(n){const e={},t=h(n,["operationName"]);return t!=null&&y(e,["_url","operationName"],t),e}function VD(n){const e={},t=h(n,["uri"]);t!=null&&y(e,["uri"],t);const i=h(n,["encodedVideo"]);i!=null&&y(e,["videoBytes"],Gg(i));const o=h(n,["encoding"]);return o!=null&&y(e,["mimeType"],o),e}function LD(n){const e={},t=h(n,["gcsUri"]);t!=null&&y(e,["uri"],t);const i=h(n,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],Gg(i));const o=h(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var tx;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(tx||(tx={}));var nx;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(nx||(nx={}));var ix;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(ix||(ix={}));var ls;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(ls||(ls={}));var rx;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(rx||(rx={}));var sx;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(sx||(sx={}));var ox;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(ox||(ox={}));var ax;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ax||(ax={}));var lx;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(lx||(lx={}));var ux;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(ux||(ux={}));var cx;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(cx||(cx={}));var dx;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(dx||(dx={}));var fx;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(fx||(fx={}));var hx;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(hx||(hx={}));var mx;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(mx||(mx={}));var px;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(px||(px={}));var tf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(tf||(tf={}));var gx;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(gx||(gx={}));var yx;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(yx||(yx={}));var vx;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(vx||(vx={}));var Pp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Pp||(Pp={}));var _x;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(_x||(_x={}));var Tx;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Tx||(Tx={}));var xx;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(xx||(xx={}));var Ex;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Ex||(Ex={}));var bx;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(bx||(bx={}));var Sx;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Sx||(Sx={}));var Ax;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Ax||(Ax={}));var wx;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(wx||(wx={}));var Cx;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Cx||(Cx={}));var Ix;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Ix||(Ix={}));var Nx;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Nx||(Nx={}));var Rx;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Rx||(Rx={}));var kx;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(kx||(kx={}));var Mx;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Mx||(Mx={}));var Dx;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Dx||(Dx={}));var Px;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Px||(Px={}));var Vx;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Vx||(Vx={}));var Lx;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Lx||(Lx={}));var Ux;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Ux||(Ux={}));var Ox;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Ox||(Ox={}));var qx;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(qx||(qx={}));var Bx;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Bx||(Bx={}));var Fx;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Fx||(Fx={}));var zx;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(zx||(zx={}));var Gx;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Gx||(Gx={}));var Hx;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Hx||(Hx={}));var jx;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(jx||(jx={}));var Yx;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Yx||(Yx={}));var pa;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(pa||(pa={}));class Vp{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Zl{get text(){var e,t,i,o,l,u,d,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",T=!1;const x=[];for(const b of(m=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[w,D]of Object.entries(b))w!=="text"&&w!=="thought"&&(D!==null||D!==void 0)&&x.push(w);if(typeof b.text=="string"){if(typeof b.thought=="boolean"&&b.thought)continue;T=!0,f+=b.text}}return x.length>0&&console.warn(`there are non-text parts ${x} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),T?f:void 0}get data(){var e,t,i,o,l,u,d,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const T=[];for(const x of(m=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[b,w]of Object.entries(x))b!=="inlineData"&&(w!==null||w!==void 0)&&T.push(b);x.inlineData&&typeof x.inlineData.data=="string"&&(f+=atob(x.inlineData.data))}return T.length>0&&console.warn(`there are non-data parts ${T} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,t,i,o,l,u,d,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(m=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(T=>T.functionCall).map(T=>T.functionCall).filter(T=>T!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,t,i,o,l,u,d,m,f;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const T=(m=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(x=>x.executableCode).map(x=>x.executableCode).filter(x=>x!==void 0);if((T==null?void 0:T.length)!==0)return(f=T==null?void 0:T[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,t,i,o,l,u,d,m,f;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const T=(m=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(x=>x.codeExecutionResult).map(x=>x.codeExecutionResult).filter(x=>x!==void 0);if((T==null?void 0:T.length)!==0)return(f=T==null?void 0:T[0])===null||f===void 0?void 0:f.output}}class Jx{}class Kx{}class UD{}class OD{}class qD{}class BD{}class $x{}class Qx{}class Wx{}class FD{}class nf{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const i=new nf;let o;const l=e;return t?o=ID(l):o=CD(l),Object.assign(i,o),i}}class Xx{}class Zx{}class eE{}class zD{}class GD{}class HD{}class tE{}class jD{get text(){var e,t,i;let o="",l=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[m,f]of Object.entries(d))m!=="text"&&m!=="thought"&&f!==null&&u.push(m);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,i;let o="";const l=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,m]of Object.entries(u))d!=="inlineData"&&m!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class YD{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $e(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function uA(n,e){const t=$e(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function cA(n){return Array.isArray(n)?n.map(e=>rf(e)):[rf(n)]}function rf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function dA(n){const e=rf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function fA(n){const e=rf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function nE(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function hA(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>nE(e)):[nE(n)]}function Lp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function iE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function rE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function an(n){if(n==null)throw new Error("ContentUnion is required");return Lp(n)?n:{role:"user",parts:hA(n)}}function Hg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=an(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=an(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>an(t)):[an(e)]}function $n(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(iE(n)||rE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[an(n)]}const e=[],t=[],i=Lp(n[0]);for(const o of n){const l=Lp(o);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(iE(o)||rE(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:hA(t)}),e}function JD(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(ls).includes(t[0].toUpperCase())?t[0].toUpperCase():ls.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(ls).includes(i.toUpperCase())?i.toUpperCase():ls.TYPE_UNSPECIFIED})}}function Ea(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&JD(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(ls).includes(d.toUpperCase())?d.toUpperCase():ls.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Ea(d);else if(i.includes(u)){const m=[];for(const f of d){if(f.type=="null"){e.nullable=!0;continue}m.push(Ea(f))}e[u]=m}else if(o.includes(u)){const m={};for(const[f,T]of Object.entries(d))m[f]=Ea(T);e[u]=m}else{if(u==="additionalProperties")continue;e[u]=d}return e}function jg(n){return Ea(n)}function Yg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Jg(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ha(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ea(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ea(e.response));return n}function ja(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function KD(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function xr(n,e){if(typeof e!="string")throw new Error("name must be a string");return KD(n,e,"cachedContents")}function mA(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ws(n){return Gg(n)}function $D(n){return n!=null&&typeof n=="object"&&"name"in n}function QD(n){return n!=null&&typeof n=="object"&&"video"in n}function WD(n){return n!=null&&typeof n=="object"&&"uri"in n}function pA(n){var e;let t;if($D(n)&&(t=n.name),!(WD(n)&&(t=n.uri,t===void 0))&&!(QD(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function gA(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function yA(n){for(const e of["models","tunedModels","publisherModels"])if(XD(n,e))return n[e];return[]}function XD(n,e){return n!==null&&typeof n=="object"&&e in n}function ZD(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function eP(n,e={}){const t=[],i=new Set;for(const o of n){const l=o.name;if(i.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);i.add(l);const u=ZD(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function vA(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function tP(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function _A(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const m=u.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Ya(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function TA(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nP(n){const e={},t=h(n,["responsesFile"]);t!=null&&y(e,["fileName"],t);const i=h(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>DP(u))),y(e,["inlinedResponses"],l)}const o=h(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),y(e,["inlinedEmbedContentResponses"],l)}return e}function iP(n){const e={},t=h(n,["predictionsFormat"]);t!=null&&y(e,["format"],t);const i=h(n,["gcsDestination","outputUriPrefix"]);i!=null&&y(e,["gcsUri"],i);const o=h(n,["bigqueryDestination","outputUri"]);return o!=null&&y(e,["bigqueryUri"],o),e}function rP(n){const e={},t=h(n,["format"]);t!=null&&y(e,["predictionsFormat"],t);const i=h(n,["gcsUri"]);i!=null&&y(e,["gcsDestination","outputUriPrefix"],i);const o=h(n,["bigqueryUri"]);if(o!=null&&y(e,["bigqueryDestination","outputUri"],o),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Md(n){const e={},t=h(n,["name"]);t!=null&&y(e,["name"],t);const i=h(n,["metadata","displayName"]);i!=null&&y(e,["displayName"],i);const o=h(n,["metadata","state"]);o!=null&&y(e,["state"],TA(o));const l=h(n,["metadata","createTime"]);l!=null&&y(e,["createTime"],l);const u=h(n,["metadata","endTime"]);u!=null&&y(e,["endTime"],u);const d=h(n,["metadata","updateTime"]);d!=null&&y(e,["updateTime"],d);const m=h(n,["metadata","model"]);m!=null&&y(e,["model"],m);const f=h(n,["metadata","output"]);return f!=null&&y(e,["dest"],nP(_A(f))),e}function Up(n){const e={},t=h(n,["name"]);t!=null&&y(e,["name"],t);const i=h(n,["displayName"]);i!=null&&y(e,["displayName"],i);const o=h(n,["state"]);o!=null&&y(e,["state"],TA(o));const l=h(n,["error"]);l!=null&&y(e,["error"],l);const u=h(n,["createTime"]);u!=null&&y(e,["createTime"],u);const d=h(n,["startTime"]);d!=null&&y(e,["startTime"],d);const m=h(n,["endTime"]);m!=null&&y(e,["endTime"],m);const f=h(n,["updateTime"]);f!=null&&y(e,["updateTime"],f);const T=h(n,["model"]);T!=null&&y(e,["model"],T);const x=h(n,["inputConfig"]);x!=null&&y(e,["src"],sP(x));const b=h(n,["outputConfig"]);return b!=null&&y(e,["dest"],iP(_A(b))),e}function sP(n){const e={},t=h(n,["instancesFormat"]);t!=null&&y(e,["format"],t);const i=h(n,["gcsSource","uris"]);i!=null&&y(e,["gcsUri"],i);const o=h(n,["bigquerySource","inputUri"]);return o!=null&&y(e,["bigqueryUri"],o),e}function oP(n,e){const t={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=h(e,["fileName"]);i!=null&&y(t,["fileName"],i);const o=h(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>MP(n,u))),y(t,["requests","requests"],l)}return t}function aP(n){const e={},t=h(n,["format"]);t!=null&&y(e,["instancesFormat"],t);const i=h(n,["gcsUri"]);i!=null&&y(e,["gcsSource","uris"],i);const o=h(n,["bigqueryUri"]);if(o!=null&&y(e,["bigquerySource","inputUri"],o),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function lP(n){const e={},t=h(n,["data"]);if(t!=null&&y(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=h(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function uP(n,e){const t={},i=h(e,["name"]);return i!=null&&y(t,["_url","name"],Ya(n,i)),t}function cP(n,e){const t={},i=h(e,["name"]);return i!=null&&y(t,["_url","name"],Ya(n,i)),t}function dP(n){const e={},t=h(n,["content"]);t!=null&&y(e,["content"],t);const i=h(n,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],fP(i));const o=h(n,["tokenCount"]);o!=null&&y(e,["tokenCount"],o);const l=h(n,["finishReason"]);l!=null&&y(e,["finishReason"],l);const u=h(n,["avgLogprobs"]);u!=null&&y(e,["avgLogprobs"],u);const d=h(n,["groundingMetadata"]);d!=null&&y(e,["groundingMetadata"],d);const m=h(n,["index"]);m!=null&&y(e,["index"],m);const f=h(n,["logprobsResult"]);f!=null&&y(e,["logprobsResult"],f);const T=h(n,["safetyRatings"]);if(T!=null){let b=T;Array.isArray(b)&&(b=b.map(w=>w)),y(e,["safetyRatings"],b)}const x=h(n,["urlContextMetadata"]);return x!=null&&y(e,["urlContextMetadata"],x),e}function fP(n){const e={},t=h(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),y(e,["citations"],i)}return e}function xA(n){const e={},t=h(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>BP(l))),y(e,["parts"],o)}const i=h(n,["role"]);return i!=null&&y(e,["role"],i),e}function hP(n,e){const t={},i=h(n,["displayName"]);if(e!==void 0&&i!=null&&y(e,["batch","displayName"],i),h(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function mP(n,e){const t={},i=h(n,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const o=h(n,["dest"]);return e!==void 0&&o!=null&&y(e,["outputConfig"],rP(tP(o))),t}function sE(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["_url","model"],$e(n,i));const o=h(e,["src"]);o!=null&&y(t,["batch","inputConfig"],oP(n,vA(n,o)));const l=h(e,["config"]);return l!=null&&hP(l,t),t}function pP(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["model"],$e(n,i));const o=h(e,["src"]);o!=null&&y(t,["inputConfig"],aP(vA(n,o)));const l=h(e,["config"]);return l!=null&&mP(l,t),t}function gP(n,e){const t={},i=h(n,["displayName"]);return e!==void 0&&i!=null&&y(e,["batch","displayName"],i),t}function yP(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["_url","model"],$e(n,i));const o=h(e,["src"]);o!=null&&y(t,["batch","inputConfig"],SP(n,o));const l=h(e,["config"]);return l!=null&&gP(l,t),t}function vP(n,e){const t={},i=h(e,["name"]);return i!=null&&y(t,["_url","name"],Ya(n,i)),t}function _P(n,e){const t={},i=h(e,["name"]);return i!=null&&y(t,["_url","name"],Ya(n,i)),t}function TP(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["name"]);i!=null&&y(e,["name"],i);const o=h(n,["done"]);o!=null&&y(e,["done"],o);const l=h(n,["error"]);return l!=null&&y(e,["error"],l),e}function xP(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["name"]);i!=null&&y(e,["name"],i);const o=h(n,["done"]);o!=null&&y(e,["done"],o);const l=h(n,["error"]);return l!=null&&y(e,["error"],l),e}function EP(n,e){const t={},i=h(e,["contents"]);if(i!=null){let l=Hg(n,i);Array.isArray(l)&&(l=l.map(u=>u)),y(t,["requests[]","request","content"],l)}const o=h(e,["config"]);return o!=null&&(y(t,["_self"],bP(o,t)),AD(t,{"requests[].*":"requests[].request.*"})),t}function bP(n,e){const t={},i=h(n,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const o=h(n,["title"]);e!==void 0&&o!=null&&y(e,["requests[]","title"],o);const l=h(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&y(e,["requests[]","outputDimensionality"],l),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function SP(n,e){const t={},i=h(e,["fileName"]);i!=null&&y(t,["file_name"],i);const o=h(e,["inlinedRequests"]);return o!=null&&y(t,["requests"],EP(n,o)),t}function AP(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&y(e,["fileUri"],t);const i=h(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function wP(n,e,t){const i={},o=h(e,["systemInstruction"]);t!==void 0&&o!=null&&y(t,["systemInstruction"],xA(an(o)));const l=h(e,["temperature"]);l!=null&&y(i,["temperature"],l);const u=h(e,["topP"]);u!=null&&y(i,["topP"],u);const d=h(e,["topK"]);d!=null&&y(i,["topK"],d);const m=h(e,["candidateCount"]);m!=null&&y(i,["candidateCount"],m);const f=h(e,["maxOutputTokens"]);f!=null&&y(i,["maxOutputTokens"],f);const T=h(e,["stopSequences"]);T!=null&&y(i,["stopSequences"],T);const x=h(e,["responseLogprobs"]);x!=null&&y(i,["responseLogprobs"],x);const b=h(e,["logprobs"]);b!=null&&y(i,["logprobs"],b);const w=h(e,["presencePenalty"]);w!=null&&y(i,["presencePenalty"],w);const D=h(e,["frequencyPenalty"]);D!=null&&y(i,["frequencyPenalty"],D);const L=h(e,["seed"]);L!=null&&y(i,["seed"],L);const O=h(e,["responseMimeType"]);O!=null&&y(i,["responseMimeType"],O);const z=h(e,["responseSchema"]);z!=null&&y(i,["responseSchema"],jg(z));const G=h(e,["responseJsonSchema"]);if(G!=null&&y(i,["responseJsonSchema"],G),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=h(e,["safetySettings"]);if(t!==void 0&&j!=null){let U=j;Array.isArray(U)&&(U=U.map(M=>FP(M))),y(t,["safetySettings"],U)}const ee=h(e,["tools"]);if(t!==void 0&&ee!=null){let U=ja(ee);Array.isArray(U)&&(U=U.map(M=>zP(Ha(M)))),y(t,["tools"],U)}const le=h(e,["toolConfig"]);if(t!==void 0&&le!=null&&y(t,["toolConfig"],le),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ie=h(e,["cachedContent"]);t!==void 0&&ie!=null&&y(t,["cachedContent"],xr(n,ie));const N=h(e,["responseModalities"]);N!=null&&y(i,["responseModalities"],N);const R=h(e,["mediaResolution"]);R!=null&&y(i,["mediaResolution"],R);const k=h(e,["speechConfig"]);if(k!=null&&y(i,["speechConfig"],Yg(k)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=h(e,["thinkingConfig"]);P!=null&&y(i,["thinkingConfig"],P);const V=h(e,["imageConfig"]);return V!=null&&y(i,["imageConfig"],V),i}function CP(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(f=>dP(f))),y(e,["candidates"],m)}const o=h(n,["modelVersion"]);o!=null&&y(e,["modelVersion"],o);const l=h(n,["promptFeedback"]);l!=null&&y(e,["promptFeedback"],l);const u=h(n,["responseId"]);u!=null&&y(e,["responseId"],u);const d=h(n,["usageMetadata"]);return d!=null&&y(e,["usageMetadata"],d),e}function IP(n,e){const t={},i=h(e,["name"]);return i!=null&&y(t,["_url","name"],Ya(n,i)),t}function NP(n,e){const t={},i=h(e,["name"]);return i!=null&&y(t,["_url","name"],Ya(n,i)),t}function RP(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&y(e,["enableWidget"],t),e}function kP(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&y(e,["timeRangeFilter"],t),e}function MP(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["request","model"],$e(n,i));const o=h(e,["contents"]);if(o!=null){let d=$n(o);Array.isArray(d)&&(d=d.map(m=>xA(m))),y(t,["request","contents"],d)}const l=h(e,["metadata"]);l!=null&&y(t,["metadata"],l);const u=h(e,["config"]);return u!=null&&y(t,["request","generationConfig"],wP(n,u,h(t,["request"],{}))),t}function DP(n){const e={},t=h(n,["response"]);t!=null&&y(e,["response"],CP(t));const i=h(n,["error"]);return i!=null&&y(e,["error"],i),e}function PP(n,e){const t={},i=h(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const o=h(n,["pageToken"]);if(e!==void 0&&o!=null&&y(e,["_query","pageToken"],o),h(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function VP(n,e){const t={},i=h(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const o=h(n,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=h(n,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),t}function LP(n){const e={},t=h(n,["config"]);return t!=null&&PP(t,e),e}function UP(n){const e={},t=h(n,["config"]);return t!=null&&VP(t,e),e}function OP(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const o=h(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Md(u))),y(e,["batchJobs"],l)}return e}function qP(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const o=h(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Up(u))),y(e,["batchJobs"],l)}return e}function BP(n){const e={},t=h(n,["functionCall"]);t!=null&&y(e,["functionCall"],t);const i=h(n,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const o=h(n,["executableCode"]);o!=null&&y(e,["executableCode"],o);const l=h(n,["fileData"]);l!=null&&y(e,["fileData"],AP(l));const u=h(n,["functionResponse"]);u!=null&&y(e,["functionResponse"],u);const d=h(n,["inlineData"]);d!=null&&y(e,["inlineData"],lP(d));const m=h(n,["text"]);m!=null&&y(e,["text"],m);const f=h(n,["thought"]);f!=null&&y(e,["thought"],f);const T=h(n,["thoughtSignature"]);T!=null&&y(e,["thoughtSignature"],T);const x=h(n,["videoMetadata"]);return x!=null&&y(e,["videoMetadata"],x),e}function FP(n){const e={},t=h(n,["category"]);if(t!=null&&y(e,["category"],t),h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=h(n,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function zP(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(T=>T)),y(e,["functionDeclarations"],f)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(n,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const o=h(n,["googleMaps"]);o!=null&&y(e,["googleMaps"],RP(o));const l=h(n,["computerUse"]);l!=null&&y(e,["computerUse"],l);const u=h(n,["codeExecution"]);if(u!=null&&y(e,["codeExecution"],u),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(n,["googleSearch"]);d!=null&&y(e,["googleSearch"],kP(d));const m=h(n,["urlContext"]);return m!=null&&y(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var go;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_RAG_STORES="ragStores",n.PAGED_ITEM_DOCUMENTS="documents"})(go||(go={}));class Uu{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GP extends xo{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new Uu(go.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=sE(this.apiClient,e),i=t._url,o=ve("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,m=d.requests,f=[];for(const T of m){const x=Object.assign({},T);if(x.systemInstruction){const b=x.systemInstruction;delete x.systemInstruction;const w=x.request;w.systemInstruction=b,x.request=w}f.push(x)}return d.requests=f,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?i.dest=`${l.slice(0,-6)}/dest`:i.dest=`${l}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=pP(this.apiClient,e);return d=ve("batchPredictionJobs",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json()),u.then(T=>Up(T))}else{const f=sE(this.apiClient,e);return d=ve("{model}:batchGenerateContent",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),u.then(T=>Md(T))}}async createEmbeddingsInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=yP(this.apiClient,e);return l=ve("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>Md(m))}}async get(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=NP(this.apiClient,e);return d=ve("batchPredictionJobs/{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json()),u.then(T=>Up(T))}else{const f=IP(this.apiClient,e);return d=ve("batches/{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),u.then(T=>Md(T))}}async cancel(e){var t,i,o,l;let u="",d={};if(this.apiClient.isVertexAI()){const m=cP(this.apiClient,e);u=ve("batchPredictionJobs/{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const m=uP(this.apiClient,e);u=ve("batches/{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=UP(e);return d=ve("batchPredictionJobs",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>{const x=qP(T),b=new tE;return Object.assign(b,x),b})}else{const f=LP(e);return d=ve("batches",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>{const x=OP(T),b=new tE;return Object.assign(b,x),b})}}async delete(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=_P(this.apiClient,e);return d=ve("batchPredictionJobs/{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>xP(T))}else{const f=vP(this.apiClient,e);return d=ve("batches/{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>TP(T))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HP(n){const e={},t=h(n,["data"]);if(t!=null&&y(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=h(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function oE(n){const e={},t=h(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>d5(l))),y(e,["parts"],o)}const i=h(n,["role"]);return i!=null&&y(e,["role"],i),e}function jP(n,e){const t={},i=h(n,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const o=h(n,["expireTime"]);e!==void 0&&o!=null&&y(e,["expireTime"],o);const l=h(n,["displayName"]);e!==void 0&&l!=null&&y(e,["displayName"],l);const u=h(n,["contents"]);if(e!==void 0&&u!=null){let T=$n(u);Array.isArray(T)&&(T=T.map(x=>oE(x))),y(e,["contents"],T)}const d=h(n,["systemInstruction"]);e!==void 0&&d!=null&&y(e,["systemInstruction"],oE(an(d)));const m=h(n,["tools"]);if(e!==void 0&&m!=null){let T=m;Array.isArray(T)&&(T=T.map(x=>f5(x))),y(e,["tools"],T)}const f=h(n,["toolConfig"]);if(e!==void 0&&f!=null&&y(e,["toolConfig"],f),h(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function YP(n,e){const t={},i=h(n,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const o=h(n,["expireTime"]);e!==void 0&&o!=null&&y(e,["expireTime"],o);const l=h(n,["displayName"]);e!==void 0&&l!=null&&y(e,["displayName"],l);const u=h(n,["contents"]);if(e!==void 0&&u!=null){let x=$n(u);Array.isArray(x)&&(x=x.map(b=>b)),y(e,["contents"],x)}const d=h(n,["systemInstruction"]);e!==void 0&&d!=null&&y(e,["systemInstruction"],an(d));const m=h(n,["tools"]);if(e!==void 0&&m!=null){let x=m;Array.isArray(x)&&(x=x.map(b=>h5(b))),y(e,["tools"],x)}const f=h(n,["toolConfig"]);e!==void 0&&f!=null&&y(e,["toolConfig"],f);const T=h(n,["kmsKeyName"]);return e!==void 0&&T!=null&&y(e,["encryption_spec","kmsKeyName"],T),t}function JP(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["model"],uA(n,i));const o=h(e,["config"]);return o!=null&&jP(o,t),t}function KP(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["model"],uA(n,i));const o=h(e,["config"]);return o!=null&&YP(o,t),t}function $P(n,e){const t={},i=h(e,["name"]);return i!=null&&y(t,["_url","name"],xr(n,i)),t}function QP(n,e){const t={},i=h(e,["name"]);return i!=null&&y(t,["_url","name"],xr(n,i)),t}function WP(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function XP(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function ZP(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&y(e,["fileUri"],t);const i=h(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function e5(n){const e={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=h(n,["description"]);t!=null&&y(e,["description"],t);const i=h(n,["name"]);i!=null&&y(e,["name"],i);const o=h(n,["parameters"]);o!=null&&y(e,["parameters"],o);const l=h(n,["parametersJsonSchema"]);l!=null&&y(e,["parametersJsonSchema"],l);const u=h(n,["response"]);u!=null&&y(e,["response"],u);const d=h(n,["responseJsonSchema"]);return d!=null&&y(e,["responseJsonSchema"],d),e}function t5(n,e){const t={},i=h(e,["name"]);return i!=null&&y(t,["_url","name"],xr(n,i)),t}function n5(n,e){const t={},i=h(e,["name"]);return i!=null&&y(t,["_url","name"],xr(n,i)),t}function i5(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&y(e,["enableWidget"],t),e}function r5(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&y(e,["timeRangeFilter"],t),e}function s5(n,e){const t={},i=h(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const o=h(n,["pageToken"]);return e!==void 0&&o!=null&&y(e,["_query","pageToken"],o),t}function o5(n,e){const t={},i=h(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const o=h(n,["pageToken"]);return e!==void 0&&o!=null&&y(e,["_query","pageToken"],o),t}function a5(n){const e={},t=h(n,["config"]);return t!=null&&s5(t,e),e}function l5(n){const e={},t=h(n,["config"]);return t!=null&&o5(t,e),e}function u5(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const o=h(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),y(e,["cachedContents"],l)}return e}function c5(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const o=h(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),y(e,["cachedContents"],l)}return e}function d5(n){const e={},t=h(n,["functionCall"]);t!=null&&y(e,["functionCall"],t);const i=h(n,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const o=h(n,["executableCode"]);o!=null&&y(e,["executableCode"],o);const l=h(n,["fileData"]);l!=null&&y(e,["fileData"],ZP(l));const u=h(n,["functionResponse"]);u!=null&&y(e,["functionResponse"],u);const d=h(n,["inlineData"]);d!=null&&y(e,["inlineData"],HP(d));const m=h(n,["text"]);m!=null&&y(e,["text"],m);const f=h(n,["thought"]);f!=null&&y(e,["thought"],f);const T=h(n,["thoughtSignature"]);T!=null&&y(e,["thoughtSignature"],T);const x=h(n,["videoMetadata"]);return x!=null&&y(e,["videoMetadata"],x),e}function f5(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(T=>T)),y(e,["functionDeclarations"],f)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(n,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const o=h(n,["googleMaps"]);o!=null&&y(e,["googleMaps"],i5(o));const l=h(n,["computerUse"]);l!=null&&y(e,["computerUse"],l);const u=h(n,["codeExecution"]);if(u!=null&&y(e,["codeExecution"],u),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(n,["googleSearch"]);d!=null&&y(e,["googleSearch"],r5(d));const m=h(n,["urlContext"]);return m!=null&&y(e,["urlContext"],m),e}function h5(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let x=t;Array.isArray(x)&&(x=x.map(b=>e5(b))),y(e,["functionDeclarations"],x)}const i=h(n,["retrieval"]);i!=null&&y(e,["retrieval"],i);const o=h(n,["googleSearchRetrieval"]);o!=null&&y(e,["googleSearchRetrieval"],o);const l=h(n,["googleMaps"]);l!=null&&y(e,["googleMaps"],l);const u=h(n,["computerUse"]);u!=null&&y(e,["computerUse"],u);const d=h(n,["codeExecution"]);d!=null&&y(e,["codeExecution"],d);const m=h(n,["enterpriseWebSearch"]);m!=null&&y(e,["enterpriseWebSearch"],m);const f=h(n,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const T=h(n,["urlContext"]);return T!=null&&y(e,["urlContext"],T),e}function m5(n,e){const t={},i=h(n,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const o=h(n,["expireTime"]);return e!==void 0&&o!=null&&y(e,["expireTime"],o),t}function p5(n,e){const t={},i=h(n,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const o=h(n,["expireTime"]);return e!==void 0&&o!=null&&y(e,["expireTime"],o),t}function g5(n,e){const t={},i=h(e,["name"]);i!=null&&y(t,["_url","name"],xr(n,i));const o=h(e,["config"]);return o!=null&&m5(o,t),t}function y5(n,e){const t={},i=h(e,["name"]);i!=null&&y(t,["_url","name"],xr(n,i));const o=h(e,["config"]);return o!=null&&p5(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v5 extends xo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Uu(go.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=KP(this.apiClient,e);return d=ve("cachedContents",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json()),u.then(T=>T)}else{const f=JP(this.apiClient,e);return d=ve("cachedContents",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),u.then(T=>T)}}async get(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=n5(this.apiClient,e);return d=ve("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json()),u.then(T=>T)}else{const f=t5(this.apiClient,e);return d=ve("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),u.then(T=>T)}}async delete(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=QP(this.apiClient,e);return d=ve("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>{const x=XP(T),b=new Zx;return Object.assign(b,x),b})}else{const f=$P(this.apiClient,e);return d=ve("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>{const x=WP(T),b=new Zx;return Object.assign(b,x),b})}}async update(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=y5(this.apiClient,e);return d=ve("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json()),u.then(T=>T)}else{const f=g5(this.apiClient,e);return d=ve("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),u.then(T=>T)}}async listInternal(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=l5(e);return d=ve("cachedContents",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>{const x=c5(T),b=new eE;return Object.assign(b,x),b})}else{const f=a5(e);return d=ve("cachedContents",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>{const x=u5(T),b=new eE;return Object.assign(b,x),b})}}}function aE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ht(n){return this instanceof ht?(this.v=n,this):new ht(n)}function ba(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(w){return function(D){return Promise.resolve(D).then(w,x)}}function d(w,D){i[w]&&(o[w]=function(L){return new Promise(function(O,z){l.push([w,L,O,z])>1||m(w,L)})},D&&(o[w]=D(o[w])))}function m(w,D){try{f(i[w](D))}catch(L){b(l[0][3],L)}}function f(w){w.value instanceof ht?Promise.resolve(w.value.v).then(T,x):b(l[0][2],w)}function T(w){m("next",w)}function x(w){m("throw",w)}function b(w,D){w(D),l.shift(),l.length&&m(l[0][0],l[0][1])}}function fu(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof aE=="function"?aE(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(l){t[l]=n[l]&&function(u){return new Promise(function(d,m){u=n[l](u),o(d,m,u.done,u.value)})}}function o(l,u,d,m){Promise.resolve(m).then(function(f){l({value:f,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _5(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:EA(t)}function EA(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function T5(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function lE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let l=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),l&&!EA(n[i])&&(l=!1),i++;l?e.push(...o):e.pop()}return e}class x5{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new E5(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class E5{constructor(e,t,i,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),T5(l)}async sendMessage(e){var t;await this.sendPromise;const i=an(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,d;const m=await o,f=(u=(l=m.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,T=m.automaticFunctionCallingHistory,x=this.getHistory(!0).length;let b=[];T!=null&&(b=(d=T.slice(x))!==null&&d!==void 0?d:[]);const w=f?[f]:[];this.recordHistory(i,w,b)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=an(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,i)}getHistory(e=!1){const t=e?lE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,o;return ba(this,arguments,function*(){var u,d,m,f;const T=[];try{for(var x=!0,b=fu(e),w;w=yield ht(b.next()),u=w.done,!u;x=!0){f=w.value,x=!1;const D=f;if(_5(D)){const L=(o=(i=D.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;L!==void 0&&T.push(L)}yield yield ht(D)}}catch(D){d={error:D}}finally{try{!x&&!u&&(m=b.return)&&(yield ht(m.call(b)))}finally{if(d)throw d.error}}this.recordHistory(t,T)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...lE(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Vf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b5(n){const e={},t=h(n,["file"]);return t!=null&&y(e,["file"],t),e}function S5(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function A5(n){const e={},t=h(n,["name"]);return t!=null&&y(e,["_url","file"],pA(t)),e}function w5(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function C5(n){const e={},t=h(n,["name"]);return t!=null&&y(e,["_url","file"],pA(t)),e}function I5(n,e){const t={},i=h(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const o=h(n,["pageToken"]);return e!==void 0&&o!=null&&y(e,["_query","pageToken"],o),t}function N5(n){const e={},t=h(n,["config"]);return t!=null&&I5(t,e),e}function R5(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const o=h(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),y(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k5 extends xo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Uu(go.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=N5(e);return l=ve("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(f=>{const T=f;return T.sdkHttpResponse={headers:m.headers},T})),o.then(m=>{const f=R5(m),T=new zD;return Object.assign(T,f),T})}}async createInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=b5(e);return l=ve("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const f=S5(m),T=new GD;return Object.assign(T,f),T})}}async get(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=C5(e);return l=ve("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=A5(e);return l=ve("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(f=>{const T=f;return T.sdkHttpResponse={headers:m.headers},T})),o.then(m=>{const f=w5(m),T=new HD;return Object.assign(T,f),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dd(n){const e={},t=h(n,["data"]);if(t!=null&&y(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=h(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function M5(n){const e={},t=h(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>J5(l))),y(e,["parts"],o)}const i=h(n,["role"]);return i!=null&&y(e,["role"],i),e}function D5(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&y(e,["fileUri"],t);const i=h(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function P5(n){const e={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=h(n,["description"]);t!=null&&y(e,["description"],t);const i=h(n,["name"]);i!=null&&y(e,["name"],i);const o=h(n,["parameters"]);o!=null&&y(e,["parameters"],o);const l=h(n,["parametersJsonSchema"]);l!=null&&y(e,["parametersJsonSchema"],l);const u=h(n,["response"]);u!=null&&y(e,["response"],u);const d=h(n,["responseJsonSchema"]);return d!=null&&y(e,["responseJsonSchema"],d),e}function V5(n){const e={},t=h(n,["modelSelectionConfig"]);t!=null&&y(e,["modelConfig"],t);const i=h(n,["audioTimestamp"]);i!=null&&y(e,["audioTimestamp"],i);const o=h(n,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=h(n,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const u=h(n,["frequencyPenalty"]);u!=null&&y(e,["frequencyPenalty"],u);const d=h(n,["logprobs"]);d!=null&&y(e,["logprobs"],d);const m=h(n,["maxOutputTokens"]);m!=null&&y(e,["maxOutputTokens"],m);const f=h(n,["mediaResolution"]);f!=null&&y(e,["mediaResolution"],f);const T=h(n,["presencePenalty"]);T!=null&&y(e,["presencePenalty"],T);const x=h(n,["responseJsonSchema"]);x!=null&&y(e,["responseJsonSchema"],x);const b=h(n,["responseLogprobs"]);b!=null&&y(e,["responseLogprobs"],b);const w=h(n,["responseMimeType"]);w!=null&&y(e,["responseMimeType"],w);const D=h(n,["responseModalities"]);D!=null&&y(e,["responseModalities"],D);const L=h(n,["responseSchema"]);L!=null&&y(e,["responseSchema"],L);const O=h(n,["routingConfig"]);O!=null&&y(e,["routingConfig"],O);const z=h(n,["seed"]);z!=null&&y(e,["seed"],z);const G=h(n,["speechConfig"]);G!=null&&y(e,["speechConfig"],bA(G));const j=h(n,["stopSequences"]);j!=null&&y(e,["stopSequences"],j);const ee=h(n,["temperature"]);ee!=null&&y(e,["temperature"],ee);const le=h(n,["thinkingConfig"]);le!=null&&y(e,["thinkingConfig"],le);const ie=h(n,["topK"]);ie!=null&&y(e,["topK"],ie);const N=h(n,["topP"]);if(N!=null&&y(e,["topP"],N),h(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function L5(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&y(e,["enableWidget"],t),e}function U5(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&y(e,["timeRangeFilter"],t),e}function O5(n,e){const t={},i=h(n,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const o=h(n,["responseModalities"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","responseModalities"],o);const l=h(n,["temperature"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","temperature"],l);const u=h(n,["topP"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","topP"],u);const d=h(n,["topK"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","topK"],d);const m=h(n,["maxOutputTokens"]);e!==void 0&&m!=null&&y(e,["setup","generationConfig","maxOutputTokens"],m);const f=h(n,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const T=h(n,["seed"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","seed"],T);const x=h(n,["speechConfig"]);e!==void 0&&x!=null&&y(e,["setup","generationConfig","speechConfig"],Jg(x));const b=h(n,["thinkingConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","thinkingConfig"],b);const w=h(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],w);const D=h(n,["systemInstruction"]);e!==void 0&&D!=null&&y(e,["setup","systemInstruction"],M5(an(D)));const L=h(n,["tools"]);if(e!==void 0&&L!=null){let ie=ja(L);Array.isArray(ie)&&(ie=ie.map(N=>$5(Ha(N)))),y(e,["setup","tools"],ie)}const O=h(n,["sessionResumption"]);e!==void 0&&O!=null&&y(e,["setup","sessionResumption"],K5(O));const z=h(n,["inputAudioTranscription"]);e!==void 0&&z!=null&&y(e,["setup","inputAudioTranscription"],z);const G=h(n,["outputAudioTranscription"]);e!==void 0&&G!=null&&y(e,["setup","outputAudioTranscription"],G);const j=h(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&y(e,["setup","realtimeInputConfig"],j);const ee=h(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&y(e,["setup","contextWindowCompression"],ee);const le=h(n,["proactivity"]);return e!==void 0&&le!=null&&y(e,["setup","proactivity"],le),t}function q5(n,e){const t={},i=h(n,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],V5(i));const o=h(n,["responseModalities"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","responseModalities"],o);const l=h(n,["temperature"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","temperature"],l);const u=h(n,["topP"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","topP"],u);const d=h(n,["topK"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","topK"],d);const m=h(n,["maxOutputTokens"]);e!==void 0&&m!=null&&y(e,["setup","generationConfig","maxOutputTokens"],m);const f=h(n,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const T=h(n,["seed"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","seed"],T);const x=h(n,["speechConfig"]);e!==void 0&&x!=null&&y(e,["setup","generationConfig","speechConfig"],bA(Jg(x)));const b=h(n,["thinkingConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","thinkingConfig"],b);const w=h(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],w);const D=h(n,["systemInstruction"]);e!==void 0&&D!=null&&y(e,["setup","systemInstruction"],an(D));const L=h(n,["tools"]);if(e!==void 0&&L!=null){let ie=ja(L);Array.isArray(ie)&&(ie=ie.map(N=>Q5(Ha(N)))),y(e,["setup","tools"],ie)}const O=h(n,["sessionResumption"]);e!==void 0&&O!=null&&y(e,["setup","sessionResumption"],O);const z=h(n,["inputAudioTranscription"]);e!==void 0&&z!=null&&y(e,["setup","inputAudioTranscription"],z);const G=h(n,["outputAudioTranscription"]);e!==void 0&&G!=null&&y(e,["setup","outputAudioTranscription"],G);const j=h(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&y(e,["setup","realtimeInputConfig"],j);const ee=h(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&y(e,["setup","contextWindowCompression"],ee);const le=h(n,["proactivity"]);return e!==void 0&&le!=null&&y(e,["setup","proactivity"],le),t}function B5(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["setup","model"],$e(n,i));const o=h(e,["config"]);return o!=null&&y(t,["config"],O5(o,t)),t}function F5(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["setup","model"],$e(n,i));const o=h(e,["config"]);return o!=null&&y(t,["config"],q5(o,t)),t}function z5(n){const e={},t=h(n,["musicGenerationConfig"]);return t!=null&&y(e,["musicGenerationConfig"],t),e}function G5(n){const e={},t=h(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),y(e,["weightedPrompts"],i)}return e}function H5(n){const e={},t=h(n,["media"]);if(t!=null){let f=cA(t);Array.isArray(f)&&(f=f.map(T=>Dd(T))),y(e,["mediaChunks"],f)}const i=h(n,["audio"]);i!=null&&y(e,["audio"],Dd(fA(i)));const o=h(n,["audioStreamEnd"]);o!=null&&y(e,["audioStreamEnd"],o);const l=h(n,["video"]);l!=null&&y(e,["video"],Dd(dA(l)));const u=h(n,["text"]);u!=null&&y(e,["text"],u);const d=h(n,["activityStart"]);d!=null&&y(e,["activityStart"],d);const m=h(n,["activityEnd"]);return m!=null&&y(e,["activityEnd"],m),e}function j5(n){const e={},t=h(n,["media"]);if(t!=null){let f=cA(t);Array.isArray(f)&&(f=f.map(T=>T)),y(e,["mediaChunks"],f)}const i=h(n,["audio"]);i!=null&&y(e,["audio"],fA(i));const o=h(n,["audioStreamEnd"]);o!=null&&y(e,["audioStreamEnd"],o);const l=h(n,["video"]);l!=null&&y(e,["video"],dA(l));const u=h(n,["text"]);u!=null&&y(e,["text"],u);const d=h(n,["activityStart"]);d!=null&&y(e,["activityStart"],d);const m=h(n,["activityEnd"]);return m!=null&&y(e,["activityEnd"],m),e}function Y5(n){const e={},t=h(n,["setupComplete"]);t!=null&&y(e,["setupComplete"],t);const i=h(n,["serverContent"]);i!=null&&y(e,["serverContent"],i);const o=h(n,["toolCall"]);o!=null&&y(e,["toolCall"],o);const l=h(n,["toolCallCancellation"]);l!=null&&y(e,["toolCallCancellation"],l);const u=h(n,["usageMetadata"]);u!=null&&y(e,["usageMetadata"],W5(u));const d=h(n,["goAway"]);d!=null&&y(e,["goAway"],d);const m=h(n,["sessionResumptionUpdate"]);return m!=null&&y(e,["sessionResumptionUpdate"],m),e}function J5(n){const e={},t=h(n,["functionCall"]);t!=null&&y(e,["functionCall"],t);const i=h(n,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const o=h(n,["executableCode"]);o!=null&&y(e,["executableCode"],o);const l=h(n,["fileData"]);l!=null&&y(e,["fileData"],D5(l));const u=h(n,["functionResponse"]);u!=null&&y(e,["functionResponse"],u);const d=h(n,["inlineData"]);d!=null&&y(e,["inlineData"],Dd(d));const m=h(n,["text"]);m!=null&&y(e,["text"],m);const f=h(n,["thought"]);f!=null&&y(e,["thought"],f);const T=h(n,["thoughtSignature"]);T!=null&&y(e,["thoughtSignature"],T);const x=h(n,["videoMetadata"]);return x!=null&&y(e,["videoMetadata"],x),e}function K5(n){const e={},t=h(n,["handle"]);if(t!=null&&y(e,["handle"],t),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function bA(n){const e={},t=h(n,["languageCode"]);t!=null&&y(e,["languageCode"],t);const i=h(n,["voiceConfig"]);if(i!=null&&y(e,["voiceConfig"],i),h(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function $5(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(T=>T)),y(e,["functionDeclarations"],f)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(n,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const o=h(n,["googleMaps"]);o!=null&&y(e,["googleMaps"],L5(o));const l=h(n,["computerUse"]);l!=null&&y(e,["computerUse"],l);const u=h(n,["codeExecution"]);if(u!=null&&y(e,["codeExecution"],u),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(n,["googleSearch"]);d!=null&&y(e,["googleSearch"],U5(d));const m=h(n,["urlContext"]);return m!=null&&y(e,["urlContext"],m),e}function Q5(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let x=t;Array.isArray(x)&&(x=x.map(b=>P5(b))),y(e,["functionDeclarations"],x)}const i=h(n,["retrieval"]);i!=null&&y(e,["retrieval"],i);const o=h(n,["googleSearchRetrieval"]);o!=null&&y(e,["googleSearchRetrieval"],o);const l=h(n,["googleMaps"]);l!=null&&y(e,["googleMaps"],l);const u=h(n,["computerUse"]);u!=null&&y(e,["computerUse"],u);const d=h(n,["codeExecution"]);d!=null&&y(e,["codeExecution"],d);const m=h(n,["enterpriseWebSearch"]);m!=null&&y(e,["enterpriseWebSearch"],m);const f=h(n,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const T=h(n,["urlContext"]);return T!=null&&y(e,["urlContext"],T),e}function W5(n){const e={},t=h(n,["promptTokenCount"]);t!=null&&y(e,["promptTokenCount"],t);const i=h(n,["cachedContentTokenCount"]);i!=null&&y(e,["cachedContentTokenCount"],i);const o=h(n,["candidatesTokenCount"]);o!=null&&y(e,["responseTokenCount"],o);const l=h(n,["toolUsePromptTokenCount"]);l!=null&&y(e,["toolUsePromptTokenCount"],l);const u=h(n,["thoughtsTokenCount"]);u!=null&&y(e,["thoughtsTokenCount"],u);const d=h(n,["totalTokenCount"]);d!=null&&y(e,["totalTokenCount"],d);const m=h(n,["promptTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(D=>D)),y(e,["promptTokensDetails"],w)}const f=h(n,["cacheTokensDetails"]);if(f!=null){let w=f;Array.isArray(w)&&(w=w.map(D=>D)),y(e,["cacheTokensDetails"],w)}const T=h(n,["candidatesTokensDetails"]);if(T!=null){let w=T;Array.isArray(w)&&(w=w.map(D=>D)),y(e,["responseTokensDetails"],w)}const x=h(n,["toolUsePromptTokensDetails"]);if(x!=null){let w=x;Array.isArray(w)&&(w=w.map(D=>D)),y(e,["toolUsePromptTokensDetails"],w)}const b=h(n,["trafficType"]);return b!=null&&y(e,["trafficType"],b),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function X5(n){const e={},t=h(n,["data"]);if(t!=null&&y(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=h(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Z5(n){const e={},t=h(n,["content"]);t!=null&&y(e,["content"],t);const i=h(n,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],e4(i));const o=h(n,["tokenCount"]);o!=null&&y(e,["tokenCount"],o);const l=h(n,["finishReason"]);l!=null&&y(e,["finishReason"],l);const u=h(n,["avgLogprobs"]);u!=null&&y(e,["avgLogprobs"],u);const d=h(n,["groundingMetadata"]);d!=null&&y(e,["groundingMetadata"],d);const m=h(n,["index"]);m!=null&&y(e,["index"],m);const f=h(n,["logprobsResult"]);f!=null&&y(e,["logprobsResult"],f);const T=h(n,["safetyRatings"]);if(T!=null){let b=T;Array.isArray(b)&&(b=b.map(w=>w)),y(e,["safetyRatings"],b)}const x=h(n,["urlContextMetadata"]);return x!=null&&y(e,["urlContextMetadata"],x),e}function e4(n){const e={},t=h(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),y(e,["citations"],i)}return e}function t4(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["_url","model"],$e(n,i));const o=h(e,["contents"]);if(o!=null){let l=$n(o);Array.isArray(l)&&(l=l.map(u=>u)),y(t,["contents"],l)}return t}function n4(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["tokensInfo"],o)}return e}function i4(n){const e={},t=h(n,["values"]);t!=null&&y(e,["values"],t);const i=h(n,["statistics"]);return i!=null&&y(e,["statistics"],r4(i)),e}function r4(n){const e={},t=h(n,["truncated"]);t!=null&&y(e,["truncated"],t);const i=h(n,["token_count"]);return i!=null&&y(e,["tokenCount"],i),e}function Lf(n){const e={},t=h(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>uV(l))),y(e,["parts"],o)}const i=h(n,["role"]);return i!=null&&y(e,["role"],i),e}function s4(n){const e={},t=h(n,["controlType"]);t!=null&&y(e,["controlType"],t);const i=h(n,["enableControlImageComputation"]);return i!=null&&y(e,["computeControl"],i),e}function o4(n){const e={};if(h(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function a4(n,e){const t={},i=h(n,["systemInstruction"]);e!==void 0&&i!=null&&y(e,["systemInstruction"],an(i));const o=h(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>IA(d))),y(e,["tools"],u)}const l=h(n,["generationConfig"]);return e!==void 0&&l!=null&&y(e,["generationConfig"],Q4(l)),t}function l4(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["_url","model"],$e(n,i));const o=h(e,["contents"]);if(o!=null){let u=$n(o);Array.isArray(u)&&(u=u.map(d=>Lf(d))),y(t,["contents"],u)}const l=h(e,["config"]);return l!=null&&o4(l),t}function u4(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["_url","model"],$e(n,i));const o=h(e,["contents"]);if(o!=null){let u=$n(o);Array.isArray(u)&&(u=u.map(d=>d)),y(t,["contents"],u)}const l=h(e,["config"]);return l!=null&&a4(l,t),t}function c4(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["totalTokens"]);i!=null&&y(e,["totalTokens"],i);const o=h(n,["cachedContentTokenCount"]);return o!=null&&y(e,["cachedContentTokenCount"],o),e}function d4(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["totalTokens"]);return i!=null&&y(e,["totalTokens"],i),e}function f4(n,e){const t={},i=h(e,["model"]);return i!=null&&y(t,["_url","name"],$e(n,i)),t}function h4(n,e){const t={},i=h(e,["model"]);return i!=null&&y(t,["_url","name"],$e(n,i)),t}function m4(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function p4(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function g4(n,e){const t={},i=h(n,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const o=h(n,["negativePrompt"]);e!==void 0&&o!=null&&y(e,["parameters","negativePrompt"],o);const l=h(n,["numberOfImages"]);e!==void 0&&l!=null&&y(e,["parameters","sampleCount"],l);const u=h(n,["aspectRatio"]);e!==void 0&&u!=null&&y(e,["parameters","aspectRatio"],u);const d=h(n,["guidanceScale"]);e!==void 0&&d!=null&&y(e,["parameters","guidanceScale"],d);const m=h(n,["seed"]);e!==void 0&&m!=null&&y(e,["parameters","seed"],m);const f=h(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&y(e,["parameters","safetySetting"],f);const T=h(n,["personGeneration"]);e!==void 0&&T!=null&&y(e,["parameters","personGeneration"],T);const x=h(n,["includeSafetyAttributes"]);e!==void 0&&x!=null&&y(e,["parameters","includeSafetyAttributes"],x);const b=h(n,["includeRaiReason"]);e!==void 0&&b!=null&&y(e,["parameters","includeRaiReason"],b);const w=h(n,["language"]);e!==void 0&&w!=null&&y(e,["parameters","language"],w);const D=h(n,["outputMimeType"]);e!==void 0&&D!=null&&y(e,["parameters","outputOptions","mimeType"],D);const L=h(n,["outputCompressionQuality"]);e!==void 0&&L!=null&&y(e,["parameters","outputOptions","compressionQuality"],L);const O=h(n,["addWatermark"]);e!==void 0&&O!=null&&y(e,["parameters","addWatermark"],O);const z=h(n,["labels"]);e!==void 0&&z!=null&&y(e,["labels"],z);const G=h(n,["editMode"]);e!==void 0&&G!=null&&y(e,["parameters","editMode"],G);const j=h(n,["baseSteps"]);return e!==void 0&&j!=null&&y(e,["parameters","editConfig","baseSteps"],j),t}function y4(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["_url","model"],$e(n,i));const o=h(e,["prompt"]);o!=null&&y(t,["instances[0]","prompt"],o);const l=h(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(m=>pV(m))),y(t,["instances[0]","referenceImages"],d)}const u=h(e,["config"]);return u!=null&&g4(u,t),t}function v4(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Uf(l))),y(e,["generatedImages"],o)}return e}function _4(n,e){const t={},i=h(n,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const o=h(n,["title"]);e!==void 0&&o!=null&&y(e,["requests[]","title"],o);const l=h(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&y(e,["requests[]","outputDimensionality"],l),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function T4(n,e){const t={},i=h(n,["taskType"]);e!==void 0&&i!=null&&y(e,["instances[]","task_type"],i);const o=h(n,["title"]);e!==void 0&&o!=null&&y(e,["instances[]","title"],o);const l=h(n,["outputDimensionality"]);e!==void 0&&l!=null&&y(e,["parameters","outputDimensionality"],l);const u=h(n,["mimeType"]);e!==void 0&&u!=null&&y(e,["instances[]","mimeType"],u);const d=h(n,["autoTruncate"]);return e!==void 0&&d!=null&&y(e,["parameters","autoTruncate"],d),t}function x4(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["_url","model"],$e(n,i));const o=h(e,["contents"]);if(o!=null){let d=Hg(n,o);Array.isArray(d)&&(d=d.map(m=>m)),y(t,["requests[]","content"],d)}const l=h(e,["config"]);l!=null&&_4(l,t);const u=h(e,["model"]);return u!==void 0&&y(t,["requests[]","model"],$e(n,u)),t}function E4(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["_url","model"],$e(n,i));const o=h(e,["contents"]);if(o!=null){let u=Hg(n,o);Array.isArray(u)&&(u=u.map(d=>d)),y(t,["instances[]","content"],u)}const l=h(e,["config"]);return l!=null&&T4(l,t),t}function b4(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>u)),y(e,["embeddings"],l)}const o=h(n,["metadata"]);return o!=null&&y(e,["metadata"],o),e}function S4(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["predictions[]","embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>i4(u))),y(e,["embeddings"],l)}const o=h(n,["metadata"]);return o!=null&&y(e,["metadata"],o),e}function A4(n){const e={},t=h(n,["endpoint"]);t!=null&&y(e,["name"],t);const i=h(n,["deployedModelId"]);return i!=null&&y(e,["deployedModelId"],i),e}function w4(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&y(e,["fileUri"],t);const i=h(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function C4(n){const e={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=h(n,["description"]);t!=null&&y(e,["description"],t);const i=h(n,["name"]);i!=null&&y(e,["name"],i);const o=h(n,["parameters"]);o!=null&&y(e,["parameters"],o);const l=h(n,["parametersJsonSchema"]);l!=null&&y(e,["parametersJsonSchema"],l);const u=h(n,["response"]);u!=null&&y(e,["response"],u);const d=h(n,["responseJsonSchema"]);return d!=null&&y(e,["responseJsonSchema"],d),e}function I4(n,e,t){const i={},o=h(e,["systemInstruction"]);t!==void 0&&o!=null&&y(t,["systemInstruction"],Lf(an(o)));const l=h(e,["temperature"]);l!=null&&y(i,["temperature"],l);const u=h(e,["topP"]);u!=null&&y(i,["topP"],u);const d=h(e,["topK"]);d!=null&&y(i,["topK"],d);const m=h(e,["candidateCount"]);m!=null&&y(i,["candidateCount"],m);const f=h(e,["maxOutputTokens"]);f!=null&&y(i,["maxOutputTokens"],f);const T=h(e,["stopSequences"]);T!=null&&y(i,["stopSequences"],T);const x=h(e,["responseLogprobs"]);x!=null&&y(i,["responseLogprobs"],x);const b=h(e,["logprobs"]);b!=null&&y(i,["logprobs"],b);const w=h(e,["presencePenalty"]);w!=null&&y(i,["presencePenalty"],w);const D=h(e,["frequencyPenalty"]);D!=null&&y(i,["frequencyPenalty"],D);const L=h(e,["seed"]);L!=null&&y(i,["seed"],L);const O=h(e,["responseMimeType"]);O!=null&&y(i,["responseMimeType"],O);const z=h(e,["responseSchema"]);z!=null&&y(i,["responseSchema"],jg(z));const G=h(e,["responseJsonSchema"]);if(G!=null&&y(i,["responseJsonSchema"],G),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=h(e,["safetySettings"]);if(t!==void 0&&j!=null){let U=j;Array.isArray(U)&&(U=U.map(M=>gV(M))),y(t,["safetySettings"],U)}const ee=h(e,["tools"]);if(t!==void 0&&ee!=null){let U=ja(ee);Array.isArray(U)&&(U=U.map(M=>EV(Ha(M)))),y(t,["tools"],U)}const le=h(e,["toolConfig"]);if(t!==void 0&&le!=null&&y(t,["toolConfig"],le),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ie=h(e,["cachedContent"]);t!==void 0&&ie!=null&&y(t,["cachedContent"],xr(n,ie));const N=h(e,["responseModalities"]);N!=null&&y(i,["responseModalities"],N);const R=h(e,["mediaResolution"]);R!=null&&y(i,["mediaResolution"],R);const k=h(e,["speechConfig"]);if(k!=null&&y(i,["speechConfig"],Yg(k)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=h(e,["thinkingConfig"]);P!=null&&y(i,["thinkingConfig"],P);const V=h(e,["imageConfig"]);return V!=null&&y(i,["imageConfig"],V),i}function N4(n,e,t){const i={},o=h(e,["systemInstruction"]);t!==void 0&&o!=null&&y(t,["systemInstruction"],an(o));const l=h(e,["temperature"]);l!=null&&y(i,["temperature"],l);const u=h(e,["topP"]);u!=null&&y(i,["topP"],u);const d=h(e,["topK"]);d!=null&&y(i,["topK"],d);const m=h(e,["candidateCount"]);m!=null&&y(i,["candidateCount"],m);const f=h(e,["maxOutputTokens"]);f!=null&&y(i,["maxOutputTokens"],f);const T=h(e,["stopSequences"]);T!=null&&y(i,["stopSequences"],T);const x=h(e,["responseLogprobs"]);x!=null&&y(i,["responseLogprobs"],x);const b=h(e,["logprobs"]);b!=null&&y(i,["logprobs"],b);const w=h(e,["presencePenalty"]);w!=null&&y(i,["presencePenalty"],w);const D=h(e,["frequencyPenalty"]);D!=null&&y(i,["frequencyPenalty"],D);const L=h(e,["seed"]);L!=null&&y(i,["seed"],L);const O=h(e,["responseMimeType"]);O!=null&&y(i,["responseMimeType"],O);const z=h(e,["responseSchema"]);z!=null&&y(i,["responseSchema"],jg(z));const G=h(e,["responseJsonSchema"]);G!=null&&y(i,["responseJsonSchema"],G);const j=h(e,["routingConfig"]);j!=null&&y(i,["routingConfig"],j);const ee=h(e,["modelSelectionConfig"]);ee!=null&&y(i,["modelConfig"],ee);const le=h(e,["safetySettings"]);if(t!==void 0&&le!=null){let Q=le;Array.isArray(Q)&&(Q=Q.map(ue=>ue)),y(t,["safetySettings"],Q)}const ie=h(e,["tools"]);if(t!==void 0&&ie!=null){let Q=ja(ie);Array.isArray(Q)&&(Q=Q.map(ue=>IA(Ha(ue)))),y(t,["tools"],Q)}const N=h(e,["toolConfig"]);t!==void 0&&N!=null&&y(t,["toolConfig"],N);const R=h(e,["labels"]);t!==void 0&&R!=null&&y(t,["labels"],R);const k=h(e,["cachedContent"]);t!==void 0&&k!=null&&y(t,["cachedContent"],xr(n,k));const P=h(e,["responseModalities"]);P!=null&&y(i,["responseModalities"],P);const V=h(e,["mediaResolution"]);V!=null&&y(i,["mediaResolution"],V);const U=h(e,["speechConfig"]);U!=null&&y(i,["speechConfig"],CA(Yg(U)));const M=h(e,["audioTimestamp"]);M!=null&&y(i,["audioTimestamp"],M);const ce=h(e,["thinkingConfig"]);ce!=null&&y(i,["thinkingConfig"],ce);const Ve=h(e,["imageConfig"]);return Ve!=null&&y(i,["imageConfig"],Ve),i}function uE(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["_url","model"],$e(n,i));const o=h(e,["contents"]);if(o!=null){let u=$n(o);Array.isArray(u)&&(u=u.map(d=>Lf(d))),y(t,["contents"],u)}const l=h(e,["config"]);return l!=null&&y(t,["generationConfig"],I4(n,l,t)),t}function cE(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["_url","model"],$e(n,i));const o=h(e,["contents"]);if(o!=null){let u=$n(o);Array.isArray(u)&&(u=u.map(d=>d)),y(t,["contents"],u)}const l=h(e,["config"]);return l!=null&&y(t,["generationConfig"],N4(n,l,t)),t}function dE(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(f=>Z5(f))),y(e,["candidates"],m)}const o=h(n,["modelVersion"]);o!=null&&y(e,["modelVersion"],o);const l=h(n,["promptFeedback"]);l!=null&&y(e,["promptFeedback"],l);const u=h(n,["responseId"]);u!=null&&y(e,["responseId"],u);const d=h(n,["usageMetadata"]);return d!=null&&y(e,["usageMetadata"],d),e}function fE(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(T=>T)),y(e,["candidates"],f)}const o=h(n,["createTime"]);o!=null&&y(e,["createTime"],o);const l=h(n,["modelVersion"]);l!=null&&y(e,["modelVersion"],l);const u=h(n,["promptFeedback"]);u!=null&&y(e,["promptFeedback"],u);const d=h(n,["responseId"]);d!=null&&y(e,["responseId"],d);const m=h(n,["usageMetadata"]);return m!=null&&y(e,["usageMetadata"],m),e}function R4(n,e){const t={};if(h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=h(n,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const o=h(n,["aspectRatio"]);e!==void 0&&o!=null&&y(e,["parameters","aspectRatio"],o);const l=h(n,["guidanceScale"]);if(e!==void 0&&l!=null&&y(e,["parameters","guidanceScale"],l),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=h(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&y(e,["parameters","safetySetting"],u);const d=h(n,["personGeneration"]);e!==void 0&&d!=null&&y(e,["parameters","personGeneration"],d);const m=h(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&y(e,["parameters","includeSafetyAttributes"],m);const f=h(n,["includeRaiReason"]);e!==void 0&&f!=null&&y(e,["parameters","includeRaiReason"],f);const T=h(n,["language"]);e!==void 0&&T!=null&&y(e,["parameters","language"],T);const x=h(n,["outputMimeType"]);e!==void 0&&x!=null&&y(e,["parameters","outputOptions","mimeType"],x);const b=h(n,["outputCompressionQuality"]);if(e!==void 0&&b!=null&&y(e,["parameters","outputOptions","compressionQuality"],b),h(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=h(n,["imageSize"]);if(e!==void 0&&w!=null&&y(e,["parameters","sampleImageSize"],w),h(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function k4(n,e){const t={},i=h(n,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const o=h(n,["negativePrompt"]);e!==void 0&&o!=null&&y(e,["parameters","negativePrompt"],o);const l=h(n,["numberOfImages"]);e!==void 0&&l!=null&&y(e,["parameters","sampleCount"],l);const u=h(n,["aspectRatio"]);e!==void 0&&u!=null&&y(e,["parameters","aspectRatio"],u);const d=h(n,["guidanceScale"]);e!==void 0&&d!=null&&y(e,["parameters","guidanceScale"],d);const m=h(n,["seed"]);e!==void 0&&m!=null&&y(e,["parameters","seed"],m);const f=h(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&y(e,["parameters","safetySetting"],f);const T=h(n,["personGeneration"]);e!==void 0&&T!=null&&y(e,["parameters","personGeneration"],T);const x=h(n,["includeSafetyAttributes"]);e!==void 0&&x!=null&&y(e,["parameters","includeSafetyAttributes"],x);const b=h(n,["includeRaiReason"]);e!==void 0&&b!=null&&y(e,["parameters","includeRaiReason"],b);const w=h(n,["language"]);e!==void 0&&w!=null&&y(e,["parameters","language"],w);const D=h(n,["outputMimeType"]);e!==void 0&&D!=null&&y(e,["parameters","outputOptions","mimeType"],D);const L=h(n,["outputCompressionQuality"]);e!==void 0&&L!=null&&y(e,["parameters","outputOptions","compressionQuality"],L);const O=h(n,["addWatermark"]);e!==void 0&&O!=null&&y(e,["parameters","addWatermark"],O);const z=h(n,["labels"]);e!==void 0&&z!=null&&y(e,["labels"],z);const G=h(n,["imageSize"]);e!==void 0&&G!=null&&y(e,["parameters","sampleImageSize"],G);const j=h(n,["enhancePrompt"]);return e!==void 0&&j!=null&&y(e,["parameters","enhancePrompt"],j),t}function M4(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["_url","model"],$e(n,i));const o=h(e,["prompt"]);o!=null&&y(t,["instances[0]","prompt"],o);const l=h(e,["config"]);return l!=null&&R4(l,t),t}function D4(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["_url","model"],$e(n,i));const o=h(e,["prompt"]);o!=null&&y(t,["instances[0]","prompt"],o);const l=h(e,["config"]);return l!=null&&k4(l,t),t}function P4(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>Y4(u))),y(e,["generatedImages"],l)}const o=h(n,["positivePromptSafetyAttributes"]);return o!=null&&y(e,["positivePromptSafetyAttributes"],AA(o)),e}function V4(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>Uf(u))),y(e,["generatedImages"],l)}const o=h(n,["positivePromptSafetyAttributes"]);return o!=null&&y(e,["positivePromptSafetyAttributes"],wA(o)),e}function L4(n,e){const t={},i=h(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i),h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=h(n,["durationSeconds"]);if(e!==void 0&&o!=null&&y(e,["parameters","durationSeconds"],o),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=h(n,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const u=h(n,["resolution"]);e!==void 0&&u!=null&&y(e,["parameters","resolution"],u);const d=h(n,["personGeneration"]);if(e!==void 0&&d!=null&&y(e,["parameters","personGeneration"],d),h(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=h(n,["negativePrompt"]);e!==void 0&&m!=null&&y(e,["parameters","negativePrompt"],m);const f=h(n,["enhancePrompt"]);if(e!==void 0&&f!=null&&y(e,["parameters","enhancePrompt"],f),h(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=h(n,["lastFrame"]);e!==void 0&&T!=null&&y(e,["instances[0]","lastFrame"],Of(T));const x=h(n,["referenceImages"]);if(e!==void 0&&x!=null){let b=x;Array.isArray(b)&&(b=b.map(w=>VV(w))),y(e,["instances[0]","referenceImages"],b)}if(h(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function U4(n,e){const t={},i=h(n,["numberOfVideos"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const o=h(n,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const l=h(n,["fps"]);e!==void 0&&l!=null&&y(e,["parameters","fps"],l);const u=h(n,["durationSeconds"]);e!==void 0&&u!=null&&y(e,["parameters","durationSeconds"],u);const d=h(n,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const m=h(n,["aspectRatio"]);e!==void 0&&m!=null&&y(e,["parameters","aspectRatio"],m);const f=h(n,["resolution"]);e!==void 0&&f!=null&&y(e,["parameters","resolution"],f);const T=h(n,["personGeneration"]);e!==void 0&&T!=null&&y(e,["parameters","personGeneration"],T);const x=h(n,["pubsubTopic"]);e!==void 0&&x!=null&&y(e,["parameters","pubsubTopic"],x);const b=h(n,["negativePrompt"]);e!==void 0&&b!=null&&y(e,["parameters","negativePrompt"],b);const w=h(n,["enhancePrompt"]);e!==void 0&&w!=null&&y(e,["parameters","enhancePrompt"],w);const D=h(n,["generateAudio"]);e!==void 0&&D!=null&&y(e,["parameters","generateAudio"],D);const L=h(n,["lastFrame"]);e!==void 0&&L!=null&&y(e,["instances[0]","lastFrame"],hi(L));const O=h(n,["referenceImages"]);if(e!==void 0&&O!=null){let j=O;Array.isArray(j)&&(j=j.map(ee=>LV(ee))),y(e,["instances[0]","referenceImages"],j)}const z=h(n,["mask"]);e!==void 0&&z!=null&&y(e,["instances[0]","mask"],PV(z));const G=h(n,["compressionQuality"]);return e!==void 0&&G!=null&&y(e,["parameters","compressionQuality"],G),t}function O4(n){const e={},t=h(n,["name"]);t!=null&&y(e,["name"],t);const i=h(n,["metadata"]);i!=null&&y(e,["metadata"],i);const o=h(n,["done"]);o!=null&&y(e,["done"],o);const l=h(n,["error"]);l!=null&&y(e,["error"],l);const u=h(n,["response","generateVideoResponse"]);return u!=null&&y(e,["response"],z4(u)),e}function q4(n){const e={},t=h(n,["name"]);t!=null&&y(e,["name"],t);const i=h(n,["metadata"]);i!=null&&y(e,["metadata"],i);const o=h(n,["done"]);o!=null&&y(e,["done"],o);const l=h(n,["error"]);l!=null&&y(e,["error"],l);const u=h(n,["response"]);return u!=null&&y(e,["response"],G4(u)),e}function B4(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["_url","model"],$e(n,i));const o=h(e,["prompt"]);o!=null&&y(t,["instances[0]","prompt"],o);const l=h(e,["image"]);l!=null&&y(t,["instances[0]","image"],Of(l));const u=h(e,["video"]);u!=null&&y(t,["instances[0]","video"],NA(u));const d=h(e,["source"]);d!=null&&H4(d,t);const m=h(e,["config"]);return m!=null&&L4(m,t),t}function F4(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["_url","model"],$e(n,i));const o=h(e,["prompt"]);o!=null&&y(t,["instances[0]","prompt"],o);const l=h(e,["image"]);l!=null&&y(t,["instances[0]","image"],hi(l));const u=h(e,["video"]);u!=null&&y(t,["instances[0]","video"],RA(u));const d=h(e,["source"]);d!=null&&j4(d,t);const m=h(e,["config"]);return m!=null&&U4(m,t),t}function z4(n){const e={},t=h(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>K4(u))),y(e,["generatedVideos"],l)}const i=h(n,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const o=h(n,["raiMediaFilteredReasons"]);return o!=null&&y(e,["raiMediaFilteredReasons"],o),e}function G4(n){const e={},t=h(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>$4(u))),y(e,["generatedVideos"],l)}const i=h(n,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const o=h(n,["raiMediaFilteredReasons"]);return o!=null&&y(e,["raiMediaFilteredReasons"],o),e}function H4(n,e){const t={},i=h(n,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const o=h(n,["image"]);e!==void 0&&o!=null&&y(e,["instances[0]","image"],Of(o));const l=h(n,["video"]);return e!==void 0&&l!=null&&y(e,["instances[0]","video"],NA(l)),t}function j4(n,e){const t={},i=h(n,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const o=h(n,["image"]);e!==void 0&&o!=null&&y(e,["instances[0]","image"],hi(o));const l=h(n,["video"]);return e!==void 0&&l!=null&&y(e,["instances[0]","video"],RA(l)),t}function Y4(n){const e={},t=h(n,["_self"]);t!=null&&y(e,["image"],tV(t));const i=h(n,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const o=h(n,["_self"]);return o!=null&&y(e,["safetyAttributes"],AA(o)),e}function Uf(n){const e={},t=h(n,["_self"]);t!=null&&y(e,["image"],SA(t));const i=h(n,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const o=h(n,["_self"]);o!=null&&y(e,["safetyAttributes"],wA(o));const l=h(n,["prompt"]);return l!=null&&y(e,["enhancedPrompt"],l),e}function J4(n){const e={},t=h(n,["_self"]);t!=null&&y(e,["mask"],SA(t));const i=h(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["labels"],o)}return e}function K4(n){const e={},t=h(n,["video"]);return t!=null&&y(e,["video"],MV(t)),e}function $4(n){const e={},t=h(n,["_self"]);return t!=null&&y(e,["video"],DV(t)),e}function Q4(n){const e={},t=h(n,["modelSelectionConfig"]);t!=null&&y(e,["modelConfig"],t);const i=h(n,["audioTimestamp"]);i!=null&&y(e,["audioTimestamp"],i);const o=h(n,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=h(n,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const u=h(n,["frequencyPenalty"]);u!=null&&y(e,["frequencyPenalty"],u);const d=h(n,["logprobs"]);d!=null&&y(e,["logprobs"],d);const m=h(n,["maxOutputTokens"]);m!=null&&y(e,["maxOutputTokens"],m);const f=h(n,["mediaResolution"]);f!=null&&y(e,["mediaResolution"],f);const T=h(n,["presencePenalty"]);T!=null&&y(e,["presencePenalty"],T);const x=h(n,["responseJsonSchema"]);x!=null&&y(e,["responseJsonSchema"],x);const b=h(n,["responseLogprobs"]);b!=null&&y(e,["responseLogprobs"],b);const w=h(n,["responseMimeType"]);w!=null&&y(e,["responseMimeType"],w);const D=h(n,["responseModalities"]);D!=null&&y(e,["responseModalities"],D);const L=h(n,["responseSchema"]);L!=null&&y(e,["responseSchema"],L);const O=h(n,["routingConfig"]);O!=null&&y(e,["routingConfig"],O);const z=h(n,["seed"]);z!=null&&y(e,["seed"],z);const G=h(n,["speechConfig"]);G!=null&&y(e,["speechConfig"],CA(G));const j=h(n,["stopSequences"]);j!=null&&y(e,["stopSequences"],j);const ee=h(n,["temperature"]);ee!=null&&y(e,["temperature"],ee);const le=h(n,["thinkingConfig"]);le!=null&&y(e,["thinkingConfig"],le);const ie=h(n,["topK"]);ie!=null&&y(e,["topK"],ie);const N=h(n,["topP"]);if(N!=null&&y(e,["topP"],N),h(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function W4(n,e){const t={},i=h(e,["model"]);return i!=null&&y(t,["_url","name"],$e(n,i)),t}function X4(n,e){const t={},i=h(e,["model"]);return i!=null&&y(t,["_url","name"],$e(n,i)),t}function Z4(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&y(e,["enableWidget"],t),e}function eV(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&y(e,["timeRangeFilter"],t),e}function tV(n){const e={},t=h(n,["bytesBase64Encoded"]);t!=null&&y(e,["imageBytes"],ws(t));const i=h(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function SA(n){const e={},t=h(n,["gcsUri"]);t!=null&&y(e,["gcsUri"],t);const i=h(n,["bytesBase64Encoded"]);i!=null&&y(e,["imageBytes"],ws(i));const o=h(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function Of(n){const e={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=h(n,["imageBytes"]);t!=null&&y(e,["bytesBase64Encoded"],ws(t));const i=h(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function hi(n){const e={},t=h(n,["gcsUri"]);t!=null&&y(e,["gcsUri"],t);const i=h(n,["imageBytes"]);i!=null&&y(e,["bytesBase64Encoded"],ws(i));const o=h(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function nV(n,e,t){const i={},o=h(e,["pageSize"]);t!==void 0&&o!=null&&y(t,["_query","pageSize"],o);const l=h(e,["pageToken"]);t!==void 0&&l!=null&&y(t,["_query","pageToken"],l);const u=h(e,["filter"]);t!==void 0&&u!=null&&y(t,["_query","filter"],u);const d=h(e,["queryBase"]);return t!==void 0&&d!=null&&y(t,["_url","models_url"],gA(n,d)),i}function iV(n,e,t){const i={},o=h(e,["pageSize"]);t!==void 0&&o!=null&&y(t,["_query","pageSize"],o);const l=h(e,["pageToken"]);t!==void 0&&l!=null&&y(t,["_query","pageToken"],l);const u=h(e,["filter"]);t!==void 0&&u!=null&&y(t,["_query","filter"],u);const d=h(e,["queryBase"]);return t!==void 0&&d!=null&&y(t,["_url","models_url"],gA(n,d)),i}function rV(n,e){const t={},i=h(e,["config"]);return i!=null&&nV(n,i,t),t}function sV(n,e){const t={},i=h(e,["config"]);return i!=null&&iV(n,i,t),t}function oV(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const o=h(n,["_self"]);if(o!=null){let l=yA(o);Array.isArray(l)&&(l=l.map(u=>Op(u))),y(e,["models"],l)}return e}function aV(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const o=h(n,["_self"]);if(o!=null){let l=yA(o);Array.isArray(l)&&(l=l.map(u=>qp(u))),y(e,["models"],l)}return e}function lV(n){const e={},t=h(n,["maskMode"]);t!=null&&y(e,["maskMode"],t);const i=h(n,["segmentationClasses"]);i!=null&&y(e,["maskClasses"],i);const o=h(n,["maskDilation"]);return o!=null&&y(e,["dilation"],o),e}function Op(n){const e={},t=h(n,["name"]);t!=null&&y(e,["name"],t);const i=h(n,["displayName"]);i!=null&&y(e,["displayName"],i);const o=h(n,["description"]);o!=null&&y(e,["description"],o);const l=h(n,["version"]);l!=null&&y(e,["version"],l);const u=h(n,["_self"]);u!=null&&y(e,["tunedModelInfo"],bV(u));const d=h(n,["inputTokenLimit"]);d!=null&&y(e,["inputTokenLimit"],d);const m=h(n,["outputTokenLimit"]);m!=null&&y(e,["outputTokenLimit"],m);const f=h(n,["supportedGenerationMethods"]);return f!=null&&y(e,["supportedActions"],f),e}function qp(n){const e={},t=h(n,["name"]);t!=null&&y(e,["name"],t);const i=h(n,["displayName"]);i!=null&&y(e,["displayName"],i);const o=h(n,["description"]);o!=null&&y(e,["description"],o);const l=h(n,["versionId"]);l!=null&&y(e,["version"],l);const u=h(n,["deployedModels"]);if(u!=null){let x=u;Array.isArray(x)&&(x=x.map(b=>A4(b))),y(e,["endpoints"],x)}const d=h(n,["labels"]);d!=null&&y(e,["labels"],d);const m=h(n,["_self"]);m!=null&&y(e,["tunedModelInfo"],SV(m));const f=h(n,["defaultCheckpointId"]);f!=null&&y(e,["defaultCheckpointId"],f);const T=h(n,["checkpoints"]);if(T!=null){let x=T;Array.isArray(x)&&(x=x.map(b=>b)),y(e,["checkpoints"],x)}return e}function uV(n){const e={},t=h(n,["functionCall"]);t!=null&&y(e,["functionCall"],t);const i=h(n,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const o=h(n,["executableCode"]);o!=null&&y(e,["executableCode"],o);const l=h(n,["fileData"]);l!=null&&y(e,["fileData"],w4(l));const u=h(n,["functionResponse"]);u!=null&&y(e,["functionResponse"],u);const d=h(n,["inlineData"]);d!=null&&y(e,["inlineData"],X5(d));const m=h(n,["text"]);m!=null&&y(e,["text"],m);const f=h(n,["thought"]);f!=null&&y(e,["thought"],f);const T=h(n,["thoughtSignature"]);T!=null&&y(e,["thoughtSignature"],T);const x=h(n,["videoMetadata"]);return x!=null&&y(e,["videoMetadata"],x),e}function cV(n){const e={},t=h(n,["productImage"]);return t!=null&&y(e,["image"],hi(t)),e}function dV(n,e){const t={},i=h(n,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const o=h(n,["baseSteps"]);e!==void 0&&o!=null&&y(e,["parameters","editConfig","baseSteps"],o);const l=h(n,["outputGcsUri"]);e!==void 0&&l!=null&&y(e,["parameters","storageUri"],l);const u=h(n,["seed"]);e!==void 0&&u!=null&&y(e,["parameters","seed"],u);const d=h(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&y(e,["parameters","safetySetting"],d);const m=h(n,["personGeneration"]);e!==void 0&&m!=null&&y(e,["parameters","personGeneration"],m);const f=h(n,["addWatermark"]);e!==void 0&&f!=null&&y(e,["parameters","addWatermark"],f);const T=h(n,["outputMimeType"]);e!==void 0&&T!=null&&y(e,["parameters","outputOptions","mimeType"],T);const x=h(n,["outputCompressionQuality"]);e!==void 0&&x!=null&&y(e,["parameters","outputOptions","compressionQuality"],x);const b=h(n,["enhancePrompt"]);e!==void 0&&b!=null&&y(e,["parameters","enhancePrompt"],b);const w=h(n,["labels"]);return e!==void 0&&w!=null&&y(e,["labels"],w),t}function fV(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["_url","model"],$e(n,i));const o=h(e,["source"]);o!=null&&mV(o,t);const l=h(e,["config"]);return l!=null&&dV(l,t),t}function hV(n){const e={},t=h(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>Uf(o))),y(e,["generatedImages"],i)}return e}function mV(n,e){const t={},i=h(n,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const o=h(n,["personImage"]);e!==void 0&&o!=null&&y(e,["instances[0]","personImage","image"],hi(o));const l=h(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>cV(d))),y(e,["instances[0]","productImages"],u)}return t}function pV(n){const e={},t=h(n,["referenceImage"]);t!=null&&y(e,["referenceImage"],hi(t));const i=h(n,["referenceId"]);i!=null&&y(e,["referenceId"],i);const o=h(n,["referenceType"]);o!=null&&y(e,["referenceType"],o);const l=h(n,["maskImageConfig"]);l!=null&&y(e,["maskImageConfig"],lV(l));const u=h(n,["controlImageConfig"]);u!=null&&y(e,["controlImageConfig"],s4(u));const d=h(n,["styleImageConfig"]);d!=null&&y(e,["styleImageConfig"],d);const m=h(n,["subjectImageConfig"]);return m!=null&&y(e,["subjectImageConfig"],m),e}function AA(n){const e={},t=h(n,["safetyAttributes","categories"]);t!=null&&y(e,["categories"],t);const i=h(n,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const o=h(n,["contentType"]);return o!=null&&y(e,["contentType"],o),e}function wA(n){const e={},t=h(n,["safetyAttributes","categories"]);t!=null&&y(e,["categories"],t);const i=h(n,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const o=h(n,["contentType"]);return o!=null&&y(e,["contentType"],o),e}function gV(n){const e={},t=h(n,["category"]);if(t!=null&&y(e,["category"],t),h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=h(n,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function yV(n){const e={},t=h(n,["image"]);return t!=null&&y(e,["image"],hi(t)),e}function vV(n,e){const t={},i=h(n,["mode"]);e!==void 0&&i!=null&&y(e,["parameters","mode"],i);const o=h(n,["maxPredictions"]);e!==void 0&&o!=null&&y(e,["parameters","maxPredictions"],o);const l=h(n,["confidenceThreshold"]);e!==void 0&&l!=null&&y(e,["parameters","confidenceThreshold"],l);const u=h(n,["maskDilation"]);e!==void 0&&u!=null&&y(e,["parameters","maskDilation"],u);const d=h(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&y(e,["parameters","binaryColorThreshold"],d);const m=h(n,["labels"]);return e!==void 0&&m!=null&&y(e,["labels"],m),t}function _V(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["_url","model"],$e(n,i));const o=h(e,["source"]);o!=null&&xV(o,t);const l=h(e,["config"]);return l!=null&&vV(l,t),t}function TV(n){const e={},t=h(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>J4(o))),y(e,["generatedMasks"],i)}return e}function xV(n,e){const t={},i=h(n,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const o=h(n,["image"]);e!==void 0&&o!=null&&y(e,["instances[0]","image"],hi(o));const l=h(n,["scribbleImage"]);return e!==void 0&&l!=null&&y(e,["instances[0]","scribble"],yV(l)),t}function CA(n){const e={},t=h(n,["languageCode"]);t!=null&&y(e,["languageCode"],t);const i=h(n,["voiceConfig"]);if(i!=null&&y(e,["voiceConfig"],i),h(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function EV(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(T=>T)),y(e,["functionDeclarations"],f)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(n,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const o=h(n,["googleMaps"]);o!=null&&y(e,["googleMaps"],Z4(o));const l=h(n,["computerUse"]);l!=null&&y(e,["computerUse"],l);const u=h(n,["codeExecution"]);if(u!=null&&y(e,["codeExecution"],u),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(n,["googleSearch"]);d!=null&&y(e,["googleSearch"],eV(d));const m=h(n,["urlContext"]);return m!=null&&y(e,["urlContext"],m),e}function IA(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let x=t;Array.isArray(x)&&(x=x.map(b=>C4(b))),y(e,["functionDeclarations"],x)}const i=h(n,["retrieval"]);i!=null&&y(e,["retrieval"],i);const o=h(n,["googleSearchRetrieval"]);o!=null&&y(e,["googleSearchRetrieval"],o);const l=h(n,["googleMaps"]);l!=null&&y(e,["googleMaps"],l);const u=h(n,["computerUse"]);u!=null&&y(e,["computerUse"],u);const d=h(n,["codeExecution"]);d!=null&&y(e,["codeExecution"],d);const m=h(n,["enterpriseWebSearch"]);m!=null&&y(e,["enterpriseWebSearch"],m);const f=h(n,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const T=h(n,["urlContext"]);return T!=null&&y(e,["urlContext"],T),e}function bV(n){const e={},t=h(n,["baseModel"]);t!=null&&y(e,["baseModel"],t);const i=h(n,["createTime"]);i!=null&&y(e,["createTime"],i);const o=h(n,["updateTime"]);return o!=null&&y(e,["updateTime"],o),e}function SV(n){const e={},t=h(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&y(e,["baseModel"],t);const i=h(n,["createTime"]);i!=null&&y(e,["createTime"],i);const o=h(n,["updateTime"]);return o!=null&&y(e,["updateTime"],o),e}function AV(n,e){const t={},i=h(n,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const o=h(n,["description"]);e!==void 0&&o!=null&&y(e,["description"],o);const l=h(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&y(e,["defaultCheckpointId"],l),t}function wV(n,e){const t={},i=h(n,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const o=h(n,["description"]);e!==void 0&&o!=null&&y(e,["description"],o);const l=h(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&y(e,["defaultCheckpointId"],l),t}function CV(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["_url","name"],$e(n,i));const o=h(e,["config"]);return o!=null&&AV(o,t),t}function IV(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["_url","model"],$e(n,i));const o=h(e,["config"]);return o!=null&&wV(o,t),t}function NV(n,e){const t={},i=h(n,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const o=h(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&y(e,["parameters","safetySetting"],o);const l=h(n,["personGeneration"]);e!==void 0&&l!=null&&y(e,["parameters","personGeneration"],l);const u=h(n,["includeRaiReason"]);e!==void 0&&u!=null&&y(e,["parameters","includeRaiReason"],u);const d=h(n,["outputMimeType"]);e!==void 0&&d!=null&&y(e,["parameters","outputOptions","mimeType"],d);const m=h(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&y(e,["parameters","outputOptions","compressionQuality"],m);const f=h(n,["enhanceInputImage"]);e!==void 0&&f!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],f);const T=h(n,["imagePreservationFactor"]);e!==void 0&&T!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],T);const x=h(n,["labels"]);e!==void 0&&x!=null&&y(e,["labels"],x);const b=h(n,["numberOfImages"]);e!==void 0&&b!=null&&y(e,["parameters","sampleCount"],b);const w=h(n,["mode"]);return e!==void 0&&w!=null&&y(e,["parameters","mode"],w),t}function RV(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["_url","model"],$e(n,i));const o=h(e,["image"]);o!=null&&y(t,["instances[0]","image"],hi(o));const l=h(e,["upscaleFactor"]);l!=null&&y(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=h(e,["config"]);return u!=null&&NV(u,t),t}function kV(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=h(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Uf(l))),y(e,["generatedImages"],o)}return e}function MV(n){const e={},t=h(n,["uri"]);t!=null&&y(e,["uri"],t);const i=h(n,["encodedVideo"]);i!=null&&y(e,["videoBytes"],ws(i));const o=h(n,["encoding"]);return o!=null&&y(e,["mimeType"],o),e}function DV(n){const e={},t=h(n,["gcsUri"]);t!=null&&y(e,["uri"],t);const i=h(n,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],ws(i));const o=h(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function PV(n){const e={},t=h(n,["image"]);t!=null&&y(e,["_self"],hi(t));const i=h(n,["maskMode"]);return i!=null&&y(e,["maskMode"],i),e}function VV(n){const e={},t=h(n,["image"]);t!=null&&y(e,["image"],Of(t));const i=h(n,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function LV(n){const e={},t=h(n,["image"]);t!=null&&y(e,["image"],hi(t));const i=h(n,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function NA(n){const e={},t=h(n,["uri"]);t!=null&&y(e,["uri"],t);const i=h(n,["videoBytes"]);i!=null&&y(e,["encodedVideo"],ws(i));const o=h(n,["mimeType"]);return o!=null&&y(e,["encoding"],o),e}function RA(n){const e={},t=h(n,["uri"]);t!=null&&y(e,["gcsUri"],t);const i=h(n,["videoBytes"]);i!=null&&y(e,["bytesBase64Encoded"],ws(i));const o=h(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UV="Content-Type",OV="X-Server-Timeout",qV="User-Agent",Bp="x-goog-api-client",BV="1.28.0",FV=`google-genai-sdk/${BV}`,zV="v1beta1",GV="v1beta",hE=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class HV{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:zV,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:GV,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?i[o]=Object.assign(Object.assign({},i[o]),l):l!==void 0&&(i[o]=l);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&jV(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await mE(o),new Vp(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await mE(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return ba(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:m}=yield ht(o.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=l.decode(m,{stream:!0});try{const x=JSON.parse(f);if("error"in x){const b=JSON.parse(JSON.stringify(x.error)),w=b.status,D=b.code,L=`got status: ${w}. ${JSON.stringify(x)}`;if(D>=400&&D<600)throw new Vf({message:L,status:D})}}catch(x){if(x.name==="ApiError")throw x}u+=f;let T=u.match(hE);for(;T;){const x=T[1];try{const b=new Response(x,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ht(new Vp(b)),u=u.slice(T[0].length),T=u.match(hE)}catch(b){throw new Error(`exception parsing stream chunk ${x}. ${b}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=FV+" "+this.clientOptions.userAgentExtra;return e[qV]=t,e[Bp]=t,e[UV]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))i.append(o,l);e.timeout&&e.timeout>0&&i.append(OV,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}async uploadFile(e,t){var i,o;const l={};t!=null&&(l.mimeType=t.mimeType,l.name=t.name,l.displayName=t.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const u=this.clientOptions.uploader,d=await u.stat(e);l.sizeBytes=String(d.size);const m=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:d.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=m;let f="";typeof e=="string"&&(f=e.replace(/[/\\]+$/,""),f=(o=f.split(/[/\\]/).pop())!==null&&o!==void 0?o:"");const T=await this.fetchUploadUrl(l,f,t);return u.upload(e,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i){var o;let l={};i!=null&&i.httpOptions?l=i.httpOptions:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`},t?{"X-Goog-Upload-File-Name":t}:{})};const u={file:e},d=await this.request({path:ve("upload/v1beta/files",u._url),body:JSON.stringify(u),httpMethod:"POST",httpOptions:l});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(o=d==null?void 0:d.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function mE(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new Vf({message:o,status:t}):new Error(o)}}function jV(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(l,u){const d=Object.assign({},l);for(const m in u)if(Object.prototype.hasOwnProperty.call(u,m)){const f=u[m],T=d[m];f&&typeof f=="object"&&!Array.isArray(f)&&T&&typeof T=="object"&&!Array.isArray(T)?d[m]=i(T,f):(T&&f&&typeof T!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof T}, New type: ${typeof f}. Overwriting.`),d[m]=f)}return d}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YV="mcp_used/unknown";let JV=!1;function kA(n){for(const e of n)if(KV(e)||typeof e=="object"&&"inputSchema"in e)return!0;return JV}function MA(n){var e;const t=(e=n[Bp])!==null&&e!==void 0?e:"";n[Bp]=(t+` ${YV}`).trimStart()}function KV(n){return n!==null&&typeof n=="object"&&n instanceof Kg}function $V(n,e=100){return ba(this,arguments,function*(){let i,o=0;for(;o<e;){const l=yield ht(n.listTools({cursor:i}));for(const u of l.tools)yield yield ht(u),o++;if(!l.nextCursor)break;i=l.nextCursor}})}class Kg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Kg(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const l={},u=[];for(const T of this.mcpClients)try{for(var d=!0,m=(t=void 0,fu($V(T))),f;f=await m.next(),e=f.done,!e;d=!0){o=f.value,d=!1;const x=o;u.push(x);const b=x.name;if(l[b])throw new Error(`Duplicate function name ${b} found in MCP tools. Please ensure function names are unique.`);l[b]=T}}catch(x){t={error:x}}finally{try{!d&&!e&&(i=m.return)&&await i.call(m)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),eP(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,l);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function QV(n,e,t){const i=new YD;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class WV{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=e3(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),m=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let f=()=>{};const T=new Promise(j=>{f=j}),x=e.callbacks,b=function(){f({})},w=this.apiClient,D={onopen:b,onmessage:j=>{QV(w,x.onmessage,j)},onerror:(t=x==null?void 0:x.onerror)!==null&&t!==void 0?t:function(j){},onclose:(i=x==null?void 0:x.onclose)!==null&&i!==void 0?i:function(j){}},L=this.webSocketFactory.create(m,ZV(u),D);L.connect(),await T;const G={setup:{model:$e(this.apiClient,e.model)}};return L.send(JSON.stringify(G)),new XV(L,this.apiClient)}}class XV{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=G5(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=z5(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(pa.PLAY)}pause(){this.sendPlaybackControl(pa.PAUSE)}stop(){this.sendPlaybackControl(pa.STOP)}resetContext(){this.sendPlaybackControl(pa.RESET_CONTEXT)}close(){this.conn.close()}}function ZV(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function e3(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t3="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function n3(n,e,t){const i=new jD;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const u=Y5(l);Object.assign(i,u)}else Object.assign(i,l);e(i)}class i3{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new WV(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,l,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let T;const x=this.apiClient.getHeaders();e.config&&e.config.tools&&kA(e.config.tools)&&MA(x);const b=a3(x);if(this.apiClient.isVertexAI())T=`${m}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(b,T);else{const k=this.apiClient.getApiKey();let P="BidiGenerateContent",V="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",V="access_token"),T=`${m}/ws/google.ai.generativelanguage.${f}.GenerativeService.${P}?${V}=${k}`}let w=()=>{};const D=new Promise(k=>{w=k}),L=e.callbacks,O=function(){var k;(k=L==null?void 0:L.onopen)===null||k===void 0||k.call(L),w({})},z=this.apiClient,G={onopen:O,onmessage:k=>{n3(z,L.onmessage,k)},onerror:(t=L==null?void 0:L.onerror)!==null&&t!==void 0?t:function(k){},onclose:(i=L==null?void 0:L.onclose)!==null&&i!==void 0?i:function(k){}},j=this.webSocketFactory.create(T,o3(b),G);j.connect(),await D;let ee=$e(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ee.startsWith("publishers/")){const k=this.apiClient.getProject(),P=this.apiClient.getLocation();ee=`projects/${k}/locations/${P}/`+ee}let le={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[tf.AUDIO]}:e.config.responseModalities=[tf.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ie=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],N=[];for(const k of ie)if(this.isCallableTool(k)){const P=k;N.push(await P.tool())}else N.push(k);N.length>0&&(e.config.tools=N);const R={model:ee,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?le=F5(this.apiClient,R):le=B5(this.apiClient,R),delete le.config,j.send(JSON.stringify(le)),new s3(j,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const r3={turnComplete:!0};class s3{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=$n(t.turns),e.isVertexAI()||(i=i.map(o=>Lf(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(t3)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},r3),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:j5(e)}:t={realtimeInput:H5(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function o3(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function a3(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pE=10;function gE(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Sa(u)){o=!0;break}if(!o)return!0;const l=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Sa(n){return"callTool"in n&&typeof n.callTool=="function"}function l3(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Sa(o)))!==null&&i!==void 0?i:!1}function u3(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!Sa(o)))!==null&&i!==void 0?i:!1}function yE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class c3 extends xo{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,l,u,d;const m=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!l3(t)||gE(t.config))return await this.generateContentInternal(m);if(u3(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,T;const x=$n(m.contents),b=(l=(o=(i=m.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:pE;let w=0;for(;w<b&&(f=await this.generateContentInternal(m),!(!f.functionCalls||f.functionCalls.length===0));){const D=f.candidates[0].content,L=[];for(const O of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Sa(O)){const G=await O.callTool(f.functionCalls);L.push(...G)}w++,T={role:"user",parts:L},m.contents=$n(m.contents),m.contents.push(D),m.contents.push(T),yE(m.config)&&(x.push(D),x.push(T))}return yE(m.config)&&(f.automaticFunctionCallingHistory=x),f},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),gE(t.config)){const i=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let l;const u=[];if(i!=null&&i.generatedImages)for(const m of i.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((o=m==null?void 0:m.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=m==null?void 0:m.safetyAttributes:u.push(m);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Uu(go.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,l,u,d,m;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((m=(d=t.source)===null||d===void 0?void 0:d.video)===null||m===void 0)&&m.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async m=>Sa(m)?await m.tool():m)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&kA(e.config.tools)){const m=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let f=Object.assign({},m);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),MA(f),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return d}async initAfcToolsMap(e){var t,i,o;const l=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Sa(u)){const d=u,m=await d.tool();for(const f of(o=m.functionDeclarations)!==null&&o!==void 0?o:[]){if(!f.name)throw new Error("Function declaration name is required.");if(l.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);l.set(f.name,d)}}return l}async processAfcStream(e){var t,i,o;const l=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:pE;let u=!1,d=0;const m=await this.initAfcToolsMap(e);return(function(f,T,x){var b,w;return ba(this,arguments,function*(){for(var D,L,O,z;d<l;){u&&(d++,u=!1);const le=yield ht(f.processParamsMaybeAddMcpUsage(x)),ie=yield ht(f.generateContentStreamInternal(le)),N=[],R=[];try{for(var G=!0,j=(L=void 0,fu(ie)),ee;ee=yield ht(j.next()),D=ee.done,!D;G=!0){z=ee.value,G=!1;const k=z;if(yield yield ht(k),k.candidates&&(!((b=k.candidates[0])===null||b===void 0)&&b.content)){R.push(k.candidates[0].content);for(const P of(w=k.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(d<l&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(T.has(P.functionCall.name)){const V=yield ht(T.get(P.functionCall.name).callTool([P.functionCall]));N.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${T.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(k){L={error:k}}finally{try{!G&&!D&&(O=j.return)&&(yield ht(O.call(j)))}finally{if(L)throw L.error}}if(N.length>0){u=!0;const k=new Zl;k.candidates=[{content:{role:"user",parts:N}}],yield yield ht(k);const P=[];P.push(...R),P.push({role:"user",parts:N});const V=$n(x.contents).concat(P);x.contents=V}else break}})})(this,m,e)}async generateContentInternal(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=cE(this.apiClient,e);return d=ve("{model}:generateContent",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>{const x=fE(T),b=new Zl;return Object.assign(b,x),b})}else{const f=uE(this.apiClient,e);return d=ve("{model}:generateContent",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>{const x=dE(T),b=new Zl;return Object.assign(b,x),b})}}async generateContentStreamInternal(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=cE(this.apiClient,e);return d=ve("{model}:streamGenerateContent?alt=sse",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.requestStream({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(x){return ba(this,arguments,function*(){var b,w,D,L;try{for(var O=!0,z=fu(x),G;G=yield ht(z.next()),b=G.done,!b;O=!0){L=G.value,O=!1;const j=L,ee=fE(yield ht(j.json()));ee.sdkHttpResponse={headers:j.headers};const le=new Zl;Object.assign(le,ee),yield yield ht(le)}}catch(j){w={error:j}}finally{try{!O&&!b&&(D=z.return)&&(yield ht(D.call(z)))}finally{if(w)throw w.error}}})})}else{const f=uE(this.apiClient,e);return d=ve("{model}:streamGenerateContent?alt=sse",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.requestStream({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(x){return ba(this,arguments,function*(){var b,w,D,L;try{for(var O=!0,z=fu(x),G;G=yield ht(z.next()),b=G.done,!b;O=!0){L=G.value,O=!1;const j=L,ee=dE(yield ht(j.json()));ee.sdkHttpResponse={headers:j.headers};const le=new Zl;Object.assign(le,ee),yield yield ht(le)}}catch(j){w={error:j}}finally{try{!O&&!b&&(D=z.return)&&(yield ht(D.call(z)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=E4(this.apiClient,e);return d=ve("{model}:predict",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>{const x=S4(T),b=new Jx;return Object.assign(b,x),b})}else{const f=x4(this.apiClient,e);return d=ve("{model}:batchEmbedContents",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>{const x=b4(T),b=new Jx;return Object.assign(b,x),b})}}async generateImagesInternal(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=D4(this.apiClient,e);return d=ve("{model}:predict",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>{const x=V4(T),b=new Kx;return Object.assign(b,x),b})}else{const f=M4(this.apiClient,e);return d=ve("{model}:predict",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>{const x=P4(T),b=new Kx;return Object.assign(b,x),b})}}async editImageInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=y4(this.apiClient,e);return l=ve("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(f=>{const T=f;return T.sdkHttpResponse={headers:m.headers},T})),o.then(m=>{const f=v4(m),T=new UD;return Object.assign(T,f),T})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=RV(this.apiClient,e);return l=ve("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(f=>{const T=f;return T.sdkHttpResponse={headers:m.headers},T})),o.then(m=>{const f=kV(m),T=new OD;return Object.assign(T,f),T})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=fV(this.apiClient,e);return l=ve("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const f=hV(m),T=new qD;return Object.assign(T,f),T})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=_V(this.apiClient,e);return l=ve("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const f=TV(m),T=new BD;return Object.assign(T,f),T})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=X4(this.apiClient,e);return d=ve("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json()),u.then(T=>qp(T))}else{const f=W4(this.apiClient,e);return d=ve("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),u.then(T=>Op(T))}}async listInternal(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=sV(this.apiClient,e);return d=ve("{models_url}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>{const x=aV(T),b=new $x;return Object.assign(b,x),b})}else{const f=rV(this.apiClient,e);return d=ve("{models_url}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>{const x=oV(T),b=new $x;return Object.assign(b,x),b})}}async update(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=IV(this.apiClient,e);return d=ve("{model}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json()),u.then(T=>qp(T))}else{const f=CV(this.apiClient,e);return d=ve("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),u.then(T=>Op(T))}}async delete(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=h4(this.apiClient,e);return d=ve("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>{const x=p4(T),b=new Qx;return Object.assign(b,x),b})}else{const f=f4(this.apiClient,e);return d=ve("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>{const x=m4(T),b=new Qx;return Object.assign(b,x),b})}}async countTokens(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=u4(this.apiClient,e);return d=ve("{model}:countTokens",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>{const x=d4(T),b=new Wx;return Object.assign(b,x),b})}else{const f=l4(this.apiClient,e);return d=ve("{model}:countTokens",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>{const x=c4(T),b=new Wx;return Object.assign(b,x),b})}}async computeTokens(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=t4(this.apiClient,e);return l=ve("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(f=>{const T=f;return T.sdkHttpResponse={headers:m.headers},T})),o.then(m=>{const f=n4(m),T=new FD;return Object.assign(T,f),T})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=F4(this.apiClient,e);return d=ve("{model}:predictLongRunning",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json()),u.then(T=>{const x=q4(T),b=new nf;return Object.assign(b,x),b})}else{const f=B4(this.apiClient,e);return d=ve("{model}:predictLongRunning",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),u.then(T=>{const x=O4(T),b=new nf;return Object.assign(b,x),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d3 extends xo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=PD(e);return d=ve("{operationName}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json()),u}else{const f=DD(e);return d=ve("{operationName}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=wD(e);return l=ve("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f3(n){const e={},t=h(n,["data"]);if(t!=null&&y(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=h(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function h3(n){const e={},t=h(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>x3(l))),y(e,["parts"],o)}const i=h(n,["role"]);return i!=null&&y(e,["role"],i),e}function m3(n,e,t){const i={},o=h(e,["expireTime"]);t!==void 0&&o!=null&&y(t,["expireTime"],o);const l=h(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&y(t,["newSessionExpireTime"],l);const u=h(e,["uses"]);t!==void 0&&u!=null&&y(t,["uses"],u);const d=h(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&y(t,["bidiGenerateContentSetup"],T3(n,d));const m=h(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&y(t,["fieldMask"],m),i}function p3(n,e){const t={},i=h(e,["config"]);return i!=null&&y(t,["config"],m3(n,i,t)),t}function g3(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&y(e,["fileUri"],t);const i=h(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function y3(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&y(e,["enableWidget"],t),e}function v3(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&y(e,["timeRangeFilter"],t),e}function _3(n,e){const t={},i=h(n,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const o=h(n,["responseModalities"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","responseModalities"],o);const l=h(n,["temperature"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","temperature"],l);const u=h(n,["topP"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","topP"],u);const d=h(n,["topK"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","topK"],d);const m=h(n,["maxOutputTokens"]);e!==void 0&&m!=null&&y(e,["setup","generationConfig","maxOutputTokens"],m);const f=h(n,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const T=h(n,["seed"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","seed"],T);const x=h(n,["speechConfig"]);e!==void 0&&x!=null&&y(e,["setup","generationConfig","speechConfig"],Jg(x));const b=h(n,["thinkingConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","thinkingConfig"],b);const w=h(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],w);const D=h(n,["systemInstruction"]);e!==void 0&&D!=null&&y(e,["setup","systemInstruction"],h3(an(D)));const L=h(n,["tools"]);if(e!==void 0&&L!=null){let ie=ja(L);Array.isArray(ie)&&(ie=ie.map(N=>b3(Ha(N)))),y(e,["setup","tools"],ie)}const O=h(n,["sessionResumption"]);e!==void 0&&O!=null&&y(e,["setup","sessionResumption"],E3(O));const z=h(n,["inputAudioTranscription"]);e!==void 0&&z!=null&&y(e,["setup","inputAudioTranscription"],z);const G=h(n,["outputAudioTranscription"]);e!==void 0&&G!=null&&y(e,["setup","outputAudioTranscription"],G);const j=h(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&y(e,["setup","realtimeInputConfig"],j);const ee=h(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&y(e,["setup","contextWindowCompression"],ee);const le=h(n,["proactivity"]);return e!==void 0&&le!=null&&y(e,["setup","proactivity"],le),t}function T3(n,e){const t={},i=h(e,["model"]);i!=null&&y(t,["setup","model"],$e(n,i));const o=h(e,["config"]);return o!=null&&y(t,["config"],_3(o,t)),t}function x3(n){const e={},t=h(n,["functionCall"]);t!=null&&y(e,["functionCall"],t);const i=h(n,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const o=h(n,["executableCode"]);o!=null&&y(e,["executableCode"],o);const l=h(n,["fileData"]);l!=null&&y(e,["fileData"],g3(l));const u=h(n,["functionResponse"]);u!=null&&y(e,["functionResponse"],u);const d=h(n,["inlineData"]);d!=null&&y(e,["inlineData"],f3(d));const m=h(n,["text"]);m!=null&&y(e,["text"],m);const f=h(n,["thought"]);f!=null&&y(e,["thought"],f);const T=h(n,["thoughtSignature"]);T!=null&&y(e,["thoughtSignature"],T);const x=h(n,["videoMetadata"]);return x!=null&&y(e,["videoMetadata"],x),e}function E3(n){const e={},t=h(n,["handle"]);if(t!=null&&y(e,["handle"],t),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function b3(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(T=>T)),y(e,["functionDeclarations"],f)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(n,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const o=h(n,["googleMaps"]);o!=null&&y(e,["googleMaps"],y3(o));const l=h(n,["computerUse"]);l!=null&&y(e,["computerUse"],l);const u=h(n,["codeExecution"]);if(u!=null&&y(e,["codeExecution"],u),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(n,["googleSearch"]);d!=null&&y(e,["googleSearch"],v3(d));const m=h(n,["urlContext"]);return m!=null&&y(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S3(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function A3(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const l=i.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=S3(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(f=>u.includes(f)?`generationConfig.${f}`:f));const m=[];l&&m.push(l),d.length>0&&m.push(...d),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class w3 extends xo{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=p3(this.apiClient,e);l=ve("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const m=A3(d,e.config);return o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function C3(n,e){const t={},i=h(n,["name"]);return i!=null&&y(t,["_url","name"],i),t}function I3(n,e){const t={},i=h(n,["name"]);return i!=null&&y(t,["_url","name"],i),t}function N3(n,e,t){const i={};if(h(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=h(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&y(e,["displayName"],o),h(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=h(n,["epochCount"]);e!==void 0&&l!=null&&y(e,["tuningTask","hyperparameters","epochCount"],l);const u=h(n,["learningRateMultiplier"]);if(u!=null&&y(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),h(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=h(n,["batchSize"]);e!==void 0&&d!=null&&y(e,["tuningTask","hyperparameters","batchSize"],d);const m=h(n,["learningRate"]);if(e!==void 0&&m!=null&&y(e,["tuningTask","hyperparameters","learningRate"],m),h(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(h(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function R3(n,e,t){const i={};let o=h(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const w=h(n,["validationDataset"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec"],vE(w))}else if(o==="PREFERENCE_TUNING"){const w=h(n,["validationDataset"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec"],vE(w))}const l=h(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&y(e,["tunedModelDisplayName"],l);const u=h(n,["description"]);e!==void 0&&u!=null&&y(e,["description"],u);let d=h(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const w=h(n,["epochCount"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(d==="PREFERENCE_TUNING"){const w=h(n,["epochCount"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let m=h(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const w=h(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(m==="PREFERENCE_TUNING"){const w=h(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let f=h(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const w=h(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(f==="PREFERENCE_TUNING"){const w=h(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let T=h(t,["config","method"]);if(T===void 0&&(T="SUPERVISED_FINE_TUNING"),T==="SUPERVISED_FINE_TUNING"){const w=h(n,["adapterSize"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(T==="PREFERENCE_TUNING"){const w=h(n,["adapterSize"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(h(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const x=h(n,["labels"]);e!==void 0&&x!=null&&y(e,["labels"],x);const b=h(n,["beta"]);return e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","beta"],b),i}function k3(n,e){const t={},i=h(n,["baseModel"]);i!=null&&y(t,["baseModel"],i);const o=h(n,["preTunedModel"]);o!=null&&y(t,["preTunedModel"],o);const l=h(n,["trainingDataset"]);l!=null&&z3(l);const u=h(n,["config"]);return u!=null&&N3(u,t),t}function M3(n,e){const t={},i=h(n,["baseModel"]);i!=null&&y(t,["baseModel"],i);const o=h(n,["preTunedModel"]);o!=null&&y(t,["preTunedModel"],o);const l=h(n,["trainingDataset"]);l!=null&&G3(l,t,e);const u=h(n,["config"]);return u!=null&&R3(u,t,e),t}function D3(n,e){const t={},i=h(n,["name"]);return i!=null&&y(t,["_url","name"],i),t}function P3(n,e){const t={},i=h(n,["name"]);return i!=null&&y(t,["_url","name"],i),t}function V3(n,e,t){const i={},o=h(n,["pageSize"]);e!==void 0&&o!=null&&y(e,["_query","pageSize"],o);const l=h(n,["pageToken"]);e!==void 0&&l!=null&&y(e,["_query","pageToken"],l);const u=h(n,["filter"]);return e!==void 0&&u!=null&&y(e,["_query","filter"],u),i}function L3(n,e,t){const i={},o=h(n,["pageSize"]);e!==void 0&&o!=null&&y(e,["_query","pageSize"],o);const l=h(n,["pageToken"]);e!==void 0&&l!=null&&y(e,["_query","pageToken"],l);const u=h(n,["filter"]);return e!==void 0&&u!=null&&y(e,["_query","filter"],u),i}function U3(n,e){const t={},i=h(n,["config"]);return i!=null&&V3(i,t),t}function O3(n,e){const t={},i=h(n,["config"]);return i!=null&&L3(i,t),t}function q3(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const o=h(n,["nextPageToken"]);o!=null&&y(t,["nextPageToken"],o);const l=h(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>DA(d))),y(t,["tuningJobs"],u)}return t}function B3(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const o=h(n,["nextPageToken"]);o!=null&&y(t,["nextPageToken"],o);const l=h(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>Fp(d))),y(t,["tuningJobs"],u)}return t}function F3(n,e){const t={},i=h(n,["name"]);i!=null&&y(t,["model"],i);const o=h(n,["name"]);return o!=null&&y(t,["endpoint"],o),t}function z3(n,e){const t={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=h(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(t,["examples","examples"],o)}return t}function G3(n,e,t){const i={};let o=h(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=h(n,["gcsUri"]);e!==void 0&&u!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=h(n,["gcsUri"]);e!==void 0&&u!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=h(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=h(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=h(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(h(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function DA(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const o=h(n,["name"]);o!=null&&y(t,["name"],o);const l=h(n,["state"]);l!=null&&y(t,["state"],mA(l));const u=h(n,["createTime"]);u!=null&&y(t,["createTime"],u);const d=h(n,["tuningTask","startTime"]);d!=null&&y(t,["startTime"],d);const m=h(n,["tuningTask","completeTime"]);m!=null&&y(t,["endTime"],m);const f=h(n,["updateTime"]);f!=null&&y(t,["updateTime"],f);const T=h(n,["description"]);T!=null&&y(t,["description"],T);const x=h(n,["baseModel"]);x!=null&&y(t,["baseModel"],x);const b=h(n,["_self"]);return b!=null&&y(t,["tunedModel"],F3(b)),t}function Fp(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const o=h(n,["name"]);o!=null&&y(t,["name"],o);const l=h(n,["state"]);l!=null&&y(t,["state"],mA(l));const u=h(n,["createTime"]);u!=null&&y(t,["createTime"],u);const d=h(n,["startTime"]);d!=null&&y(t,["startTime"],d);const m=h(n,["endTime"]);m!=null&&y(t,["endTime"],m);const f=h(n,["updateTime"]);f!=null&&y(t,["updateTime"],f);const T=h(n,["error"]);T!=null&&y(t,["error"],T);const x=h(n,["description"]);x!=null&&y(t,["description"],x);const b=h(n,["baseModel"]);b!=null&&y(t,["baseModel"],b);const w=h(n,["tunedModel"]);w!=null&&y(t,["tunedModel"],w);const D=h(n,["preTunedModel"]);D!=null&&y(t,["preTunedModel"],D);const L=h(n,["supervisedTuningSpec"]);L!=null&&y(t,["supervisedTuningSpec"],L);const O=h(n,["preferenceOptimizationSpec"]);O!=null&&y(t,["preferenceOptimizationSpec"],O);const z=h(n,["tuningDataStats"]);z!=null&&y(t,["tuningDataStats"],z);const G=h(n,["encryptionSpec"]);G!=null&&y(t,["encryptionSpec"],G);const j=h(n,["partnerModelTuningSpec"]);j!=null&&y(t,["partnerModelTuningSpec"],j);const ee=h(n,["customBaseModel"]);ee!=null&&y(t,["customBaseModel"],ee);const le=h(n,["experiment"]);le!=null&&y(t,["experiment"],le);const ie=h(n,["labels"]);ie!=null&&y(t,["labels"],ie);const N=h(n,["outputUri"]);N!=null&&y(t,["outputUri"],N);const R=h(n,["pipelineJob"]);R!=null&&y(t,["pipelineJob"],R);const k=h(n,["serviceAccount"]);k!=null&&y(t,["serviceAccount"],k);const P=h(n,["tunedModelDisplayName"]);P!=null&&y(t,["tunedModelDisplayName"],P);const V=h(n,["veoTuningSpec"]);return V!=null&&y(t,["veoTuningSpec"],V),t}function H3(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const o=h(n,["name"]);o!=null&&y(t,["name"],o);const l=h(n,["metadata"]);l!=null&&y(t,["metadata"],l);const u=h(n,["done"]);u!=null&&y(t,["done"],u);const d=h(n,["error"]);return d!=null&&y(t,["error"],d),t}function vE(n,e){const t={},i=h(n,["gcsUri"]);i!=null&&y(t,["validationDatasetUri"],i);const o=h(n,["vertexDatasetResource"]);return o!=null&&y(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class j3 extends xo{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Uu(go.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:Pp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=P3(e);return d=ve("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>Fp(T))}else{const f=D3(e);return d=ve("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>DA(T))}}async listInternal(e){var t,i,o,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const f=O3(e);return d=ve("tuningJobs",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>{const x=B3(T),b=new Xx;return Object.assign(b,x),b})}else{const f=U3(e);return d=ve("tunedModels",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(x=>{const b=x;return b.sdkHttpResponse={headers:T.headers},b})),u.then(T=>{const x=q3(T),b=new Xx;return Object.assign(b,x),b})}}async cancel(e){var t,i,o,l;let u="",d={};if(this.apiClient.isVertexAI()){const m=I3(e);u=ve("{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const m=C3(e);u=ve("{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=M3(e,e);return l=ve("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(f=>{const T=f;return T.sdkHttpResponse={headers:m.headers},T})),o.then(m=>Fp(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=k3(e);return l=ve("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(f=>{const T=f;return T.sdkHttpResponse={headers:m.headers},T})),o.then(m=>H3(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y3{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const J3=1024*1024*8,K3=3,$3=1e3,Q3=2,ip="x-goog-upload-status";async function W3(n,e,t){var i,o,l;let u=0,d=0,m=new Vp(new Response),f="upload";for(u=n.size;d<u;){const x=Math.min(J3,u-d),b=n.slice(d,d+x);d+x>=u&&(f+=", finalize");let w=0,D=$3;for(;w<K3&&(m=await t.request({path:"",body:b,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(d),"Content-Length":String(x)}}}),!(!((i=m==null?void 0:m.headers)===null||i===void 0)&&i[ip]));)w++,await Z3(D),D=D*Q3;if(d+=x,((o=m==null?void 0:m.headers)===null||o===void 0?void 0:o[ip])!=="active")break;if(u<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const T=await(m==null?void 0:m.json());if(((l=m==null?void 0:m.headers)===null||l===void 0?void 0:l[ip])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return T.file}async function X3(n){return{size:n.size,type:n.type}}function Z3(n){return new Promise(e=>setTimeout(e,n))}class eL{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await W3(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await X3(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tL{create(e,t,i){return new nL(e,t,i)}}class nL{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _E="x-goog-api-key";class iL{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(_E)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(_E,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rL="gl-node/";class sL{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=SD(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new iL(this.apiKey);this.apiClient=new HV({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:rL+"web",uploader:new eL,downloader:new Y3}),this.models=new c3(this.apiClient),this.live=new i3(this.apiClient,o,new tL),this.batches=new GP(this.apiClient),this.chats=new x5(this.models,this.apiClient),this.caches=new v5(this.apiClient),this.files=new k5(this.apiClient),this.operations=new d3(this.apiClient),this.authTokens=new w3(this.apiClient),this.tunings=new j3(this.apiClient)}}const PA=new sL({apiKey:"PLACEHOLDER_API_KEY"}),oL=n=>{const e=n.match(/^data:(.+);base64,(.+)$/);if(!e)throw new Error("Invalid data URL");const t=e[1],i=e[2];return{inlineData:{mimeType:t,data:i}}},aL=async(n,e)=>{const t="gemini-2.5-flash",i=[];for(const o of n)try{const l=oL(o.dataUrl),u={text:`Analise esta imagem de uma obra. Descreva em uma frase curta e objetiva uma atividade de construo civil que est sendo realizada ou que  representada na imagem. Foque em aes e objetos. Exemplo: "Instalao de formas para viga". Se a imagem no for clara ou no representar uma atividade, retorne "No foi possvel identificar". Histrico de tarefas recentes para evitar duplicatas: ${e.slice(0,5).join(", ")}`},m=(await PA.models.generateContent({model:t,contents:[{parts:[l,u]}]})).text.trim();m&&!m.includes("No foi possvel identificar")&&i.push({id:`result-${o.id}`,imageId:o.id,imagePreview:o.dataUrl,suggestion:m.replace(/["\.]/g,"")})}catch(l){console.error(`Error processing image ${o.id}:`,l)}return i},lL=async n=>{const e="gemini-2.5-pro",t=`Voc  um assistente de engenharia civil analisando dados de um dirio de obras. Com base no resumo a seguir, gere 3 a 5 insights acionveis em formato de bullet points. Foque em produtividade, riscos, e sugestes de melhoria. Seja conciso e direto.

    Resumo dos Dados:
    ${n}

    Exemplo de Sada:
    * **Risco de Atraso:** A tarefa 'Alvenaria do 2 Andar' est bloqueada h mltiplos dias. Verifique a causa raiz (falta de material, mo de obra) para evitar impacto no cronograma.
    * **Oportunidade de Melhoria:** A produtividade aumentou 15% na ltima semana. Investigue se a alocao de equipes ou o clima favorvel foram os fatores principais para replicar o sucesso.
    * **Ponto de Ateno:** O alto nmero de dias de chuva impactou as atividades externas. Considere planejar tarefas internas para os prximos dias com previso de chuva para mitigar perdas.

    Insights (use markdown com asteriscos para bullet points):`;try{return(await PA.models.generateContent({model:e,contents:t})).text.trim()}catch(i){throw console.error("Error generating insights:",i),new Error("Falha ao gerar insights. Tente novamente mais tarde.")}},uL=n=>{const e=[];for(let t=0;t<localStorage.length;t++){const i=localStorage.key(t);if(i&&i.startsWith(`logData-${n}-`)&&i.endsWith("-info")){const o=i.substring(n.length+9,i.length-5),l=`logData-${n}-${o}`;try{const u=JSON.parse(localStorage.getItem(`${l}-info`)||"{}"),d=JSON.parse(localStorage.getItem(`${l}-tasks`)||"[]"),m=JSON.parse(localStorage.getItem(`${l}-impossible`)||"[]"),f=JSON.parse(localStorage.getItem(`${l}-workers`)||"[]");e.push({logData:u,tasks:d,impossibleTasks:m,workers:f,images:[],platformSettings:{name:"",logo:""},constructor:void 0})}catch(u){console.error(`Error parsing log ${l}:`,u)}}}return e.sort((t,i)=>new Date(t.logData.date).getTime()-new Date(i.logData.date).getTime())},cL=n=>{if(n.length<2)return"Dados insuficientes para gerar insights.  necessrio ter pelo menos 2 relatrios.";const e=f=>{const T=new Date(f.getTime());T.setHours(0,0,0,0),T.setDate(T.getDate()+3-(T.getDay()+6)%7);const x=new Date(T.getFullYear(),0,4);return 1+Math.round(((T.getTime()-x.getTime())/864e5-3+(x.getDay()+6)%7)/7)},t=n.filter(f=>e(new Date(f.logData.date))===e(new Date)),i=n.filter(f=>e(new Date(f.logData.date))===e(new Date(new Date().setDate(new Date().getDate()-7))));let o="N/A";if(t.length>0&&i.length>0){const f=b=>{const w=b.reduce((L,O)=>L+O.tasks.length,0),D=b.reduce((L,O)=>L+O.workers.reduce((z,G)=>z+G.count,0),0);return D>0?w/D:0},T=f(t),x=f(i);if(x>0){const b=(T-x)/x*100;o=`${b>0?"+":""}${b.toFixed(0)}% (tarefas por colaborador-dia)`}}const d=`${n.slice(-5).filter(f=>f.logData.weather==="Chuvoso").length} de 5 dias`;let m="N/A";if(n.length>1){const f=n[n.length-1],T=n[n.length-2],x=f.impossibleTasks.filter(b=>T.impossibleTasks.some(w=>w.text===b.text));x.length>0&&(m=`'${x[0].text}' (bloqueada por 2+ dias)`)}return`- Mudana de produtividade (semanal): ${o}
- Dias com chuva (ltimos 5 relatrios): ${d}
- Tarefas repetidamente bloqueadas: ${m}`},dL=({projects:n,onClose:e,currentUser:t})=>{const[i,o]=te.useState(""),l=te.useMemo(()=>n.find(P=>P.id===i),[n,i]),[u,d]=te.useState(""),[m,f]=te.useState(!1),[T,x]=te.useState(""),[b,w]=te.useState(!1),[D,L]=te.useState([]),[O,z]=te.useState(null),[G,j]=te.useState(""),ee=i?`insights-${i}`:"";te.useEffect(()=>{if(d(""),x(""),w(!1),!i){L([]);return}try{const P=localStorage.getItem(ee);L(P?JSON.parse(P):[])}catch(P){console.error("Error loading insights from storage:",P),L([])}},[i,ee]);const le=()=>{if(!u)return;const P={id:`insight-${Date.now()}`,date:new Date().toISOString().split("T")[0],content:u,authorType:"ia",authorName:"IA"},V=[...D,P];localStorage.setItem(ee,JSON.stringify(V)),L(V),alert("Insight salvo com sucesso!"),w(!0)},ie=P=>{z(P.id),j(P.content)},N=()=>{z(null),j("")},R=()=>{O&&(L(P=>{const V=P.map(U=>U.id===O?{...U,content:G,authorType:"user",authorName:t.name}:U);return ee&&localStorage.setItem(ee,JSON.stringify(V)),V}),z(null),j(""))},k=async()=>{if(l){f(!0),x(""),d("");try{const P=uL(l.id),V=cL(P);if(V.startsWith("Dados insuficientes")){d(V);return}const U=await lL(V);d(U)}catch(P){x(P instanceof Error?P.message:"Ocorreu um erro desconhecido.")}finally{f(!1)}}};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:g.jsx("div",{className:"bg-light-card dark:bg-dark-card rounded-xl shadow-xl w-full max-w-2xl transform transition-all",children:g.jsxs("div",{className:"p-6",children:[g.jsxs("div",{className:"flex justify-between items-start mb-4",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-2xl font-bold text-light-text-primary dark:text-dark-text-primary flex items-center gap-2",children:[g.jsx(ga,{className:"h-6 w-6 text-brand-indigo"}),"Anlise de IA por Obra"]}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-dark-text-secondary",children:b?`Histrico de: ${(l==null?void 0:l.name)||"N/A"}`:"Gere insights detalhados para uma obra especfica"})]}),g.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-3xl leading-none",children:""})]}),g.jsxs("select",{value:i,onChange:P=>o(P.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo transition bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600",children:[g.jsx("option",{value:"",children:"-- Selecione uma Obra --"}),n.map(P=>g.jsx("option",{value:P.id,children:P.name},P.id))]}),g.jsx("div",{className:"min-h-[250px] bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg my-4 flex flex-col justify-center items-center",children:i?m?g.jsx(op,{className:"h-10 w-10 text-brand-indigo"}):T?g.jsx("p",{className:"text-red-500 text-center",children:T}):b?g.jsx("div",{className:"w-full h-[300px] overflow-y-auto space-y-4",children:D.length>0?D.slice().reverse().map(P=>g.jsx("div",{className:"bg-light-card dark:bg-dark-card p-3 rounded-lg shadow-sm group",children:O===P.id?g.jsxs(g.Fragment,{children:[g.jsx("textarea",{value:G,onChange:V=>j(V.target.value),rows:5,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo transition bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary"}),g.jsxs("div",{className:"flex justify-end items-center gap-2 mt-2",children:[g.jsx("button",{onClick:N,className:"bg-gray-200 dark:bg-dark-border text-xs font-bold py-1 px-3 rounded-md",children:"Cancelar"}),g.jsx("button",{onClick:R,className:"bg-brand-indigo text-white text-xs font-bold py-1 px-3 rounded-md",children:"Salvar Alteraes"})]})]}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-semibold text-sm text-gray-600 dark:text-dark-text-secondary",children:new Date(P.date+"T00:00:00").toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"})}),g.jsx("div",{className:"flex items-center gap-1.5 text-xs text-gray-500 mt-1",children:P.authorType==="ia"?g.jsxs(g.Fragment,{children:[g.jsx(ga,{className:"h-4 w-4 text-purple-500"}),g.jsx("span",{children:"Gerado por IA"})]}):g.jsxs(g.Fragment,{children:[g.jsx(hu,{className:"h-4 w-4 text-blue-500"}),g.jsxs("span",{children:["Editado por ",P.authorName]})]})})]}),g.jsx("button",{onClick:()=>ie(P),className:"opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx(hu,{className:"h-4 w-4 text-blue-500 hover:text-blue-700"})})]}),g.jsx("div",{className:"mt-2 whitespace-pre-wrap text-light-text-primary dark:text-dark-text-primary prose prose-sm dark:prose-invert",children:g.jsx("ul",{className:"space-y-1",children:P.content.split("*").filter(V=>V.trim()).map((V,U)=>g.jsx("li",{children:V.trim()},U))})})]})},P.id)):g.jsx("p",{className:"text-center text-gray-500 dark:text-dark-text-secondary py-10",children:"Nenhum insight foi salvo ainda para esta obra."})}):u?g.jsx("div",{className:"whitespace-pre-wrap text-light-text-primary dark:text-dark-text-primary w-full prose prose-sm dark:prose-invert",children:g.jsx("ul",{className:"space-y-2",children:u.split("*").filter(P=>P.trim()).map((P,V)=>g.jsx("li",{children:P.trim()},V))})}):g.jsx("p",{className:"text-gray-500 dark:text-dark-text-secondary text-center",children:'Clique em "Gerar Insights" para analisar o histrico de relatrios desta obra.'}):g.jsx("p",{className:"text-gray-500 dark:text-dark-text-secondary",children:"Selecione uma obra para comear."})}),g.jsxs("div",{className:"flex justify-between items-center gap-4 mt-6 pt-4 border-t dark:border-dark-border",children:[g.jsx("div",{children:g.jsx("button",{onClick:()=>w(!b),disabled:!i,className:"flex items-center gap-2 text-sm font-semibold text-brand-indigo hover:underline disabled:text-gray-400 disabled:no-underline disabled:cursor-not-allowed",children:b?g.jsxs(g.Fragment,{children:[g.jsx(ga,{className:"h-5 w-5"})," Gerar Novo Insight"]}):g.jsxs(g.Fragment,{children:[g.jsx(UC,{className:"h-5 w-5"})," Ver Histrico"]})})}),g.jsxs("div",{className:"flex gap-2",children:[u&&!b&&g.jsx("button",{onClick:le,disabled:m,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-xl transition disabled:opacity-50",children:"Salvar"}),!b&&g.jsx("button",{onClick:k,disabled:m||!i,className:"flex items-center justify-center gap-2 bg-brand-indigo hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed w-44",children:m?g.jsxs(g.Fragment,{children:[g.jsx(op,{className:"h-5 w-5"}),g.jsx("span",{children:"Analisando..."})]}):"Gerar Insights"}),g.jsx("button",{onClick:e,className:"bg-gray-200 dark:bg-dark-border hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-dark-text-primary font-bold py-2 px-4 rounded-xl",children:"Fechar"})]})]})]})})})},Aa=({title:n,data:e,barColorClass:t})=>{const i=jp.useMemo(()=>{if(e.length===0)return 1;const o=Math.max(...e.map(l=>l.value));return o>0?Math.ceil(o*1.1):1},[e]);return e.length===0?g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary print:text-black mb-2",children:n}),g.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg text-center text-gray-500 dark:text-dark-text-secondary",children:"Nenhum dado disponvel para este perodo."})]}):g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary print:text-black mb-2",children:n}),g.jsx("div",{className:"space-y-3 p-2",children:e.map(o=>g.jsxs("div",{className:"grid grid-cols-4 items-center gap-2 text-sm",children:[g.jsx("div",{className:"col-span-1 text-right font-medium text-gray-600 dark:text-dark-text-secondary print:text-black pr-2 truncate",children:o.label}),g.jsx("div",{className:"col-span-3 bg-gray-200 dark:bg-gray-700 rounded-full h-6",children:g.jsx("div",{className:`${t} h-6 rounded-full flex items-center justify-start px-3 transition-all duration-500 ease-out print:color-adjust-exact`,style:{width:`${o.value/i*100}%`},children:g.jsx("span",{className:"font-bold text-white print:text-black text-shadow-sm",children:o.value})})})]},o.label))})]})},VA=({series:n,data:e})=>{const t=jp.useMemo(()=>{if(e.length===0)return 10;const o=Math.max(...e.map(l=>Object.values(l.values).reduce((u,d)=>u+Number(d),0)));return o>0?Math.ceil(o/5)*5+5:10},[e]);if(e.length===0||n.length===0)return g.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg text-center text-gray-500 dark:text-dark-text-secondary h-80 flex items-center justify-center",children:"Nenhum dado de colaborador disponvel para este perodo."});const i=Array.from({length:6},(o,l)=>Math.round(t*(l/5)));return g.jsxs("div",{children:[g.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-1 mb-4 text-xs print:hidden",children:n.map(o=>g.jsxs("div",{className:"flex items-center gap-1.5",children:[g.jsx("div",{className:`w-3 h-3 rounded-sm ${o.colorClass}`}),g.jsx("span",{className:"text-gray-600 dark:text-dark-text-secondary",children:o.name})]},o.name))}),g.jsxs("div",{className:"flex gap-4",children:[g.jsx("div",{className:"flex flex-col justify-between h-80 text-right text-xs text-gray-500 dark:text-dark-text-secondary print:text-black py-3",children:i.slice().reverse().map(o=>g.jsx("div",{children:o},o))}),g.jsx("div",{className:"flex-grow grid grid-cols-1",children:g.jsxs("div",{className:"relative h-80",children:[i.map((o,l)=>g.jsx("div",{className:"absolute w-full border-t border-gray-200 dark:border-gray-700/50 print:border-gray-300",style:{bottom:`${l/(i.length-1)*100}%`}},o)),g.jsx("div",{className:"absolute inset-0 flex justify-around items-end gap-2 sm:gap-4 px-2",children:e.map(o=>{const l=Object.values(o.values).reduce((u,d)=>u+Number(d),0);return g.jsxs("div",{className:"flex-1 flex flex-col items-center group relative h-full",children:[g.jsxs("div",{className:"absolute bottom-full mb-2 w-max max-w-xs p-2 text-xs text-white bg-gray-900 rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10 print:hidden",children:[g.jsx("div",{className:"font-bold mb-1 border-b border-gray-700 pb-1",children:o.label}),g.jsx("ul",{className:"mt-1",children:n.map(u=>{const d=Number(o.values[u.name]||0);return d>0?g.jsxs("li",{className:"flex justify-between gap-2",children:[g.jsxs("span",{children:[u.name,":"]})," ",g.jsx("span",{className:"font-bold",children:d})]},u.name):null})}),l>0&&g.jsxs("div",{className:"font-bold mt-1 border-t border-gray-700 pt-1",children:["Total: ",l]})]}),g.jsx("div",{className:"w-4 sm:w-6 md:w-8 flex flex-col-reverse rounded-t-md overflow-hidden bg-gray-200 dark:bg-gray-700/50 transition-all duration-300 mt-auto",style:{height:l>0?`${l/t*100}%`:"0%"},children:n.map(u=>{const d=Number(o.values[u.name]||0);if(d===0)return null;const m=l>0?d/l*100:0,f=l/t*320,T=m/100*f;return g.jsx("div",{className:`${u.colorClass} transition-all duration-200 flex items-center justify-center overflow-hidden print:color-adjust-exact`,style:{height:`${m}%`},children:T>14&&g.jsx("span",{className:"text-white print:text-black text-[10px] font-bold",style:{textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:d})},u.name)})}),g.jsx("div",{className:"text-xs text-center text-gray-500 dark:text-dark-text-secondary print:text-black mt-2 h-8 transform -rotate-45 sm:rotate-0 origin-center",children:o.label})]},o.label)})})]})})]})]})},fL=(n,e)=>{const t={},i=[];for(let l=0;l<localStorage.length;l++){const u=localStorage.key(l);if(u&&u.startsWith(`logData-${n}-`)&&u.endsWith("-info"))try{const d=u.substring(n.length+9,u.length-5),m=JSON.parse(localStorage.getItem(u)||"{}"),f=JSON.parse(localStorage.getItem(`logData-${n}-${d}-tasks`)||"[]"),T=JSON.parse(localStorage.getItem(`logData-${n}-${d}-impossible`)||"[]"),x=JSON.parse(localStorage.getItem(`logData-${n}-${d}-workers`)||"[]");i.push({dateStr:d,logData:m,tasks:f,impossible:T,workers:x})}catch(d){console.error(`Error processing log key ${u}:`,d)}}return i.sort((l,u)=>l.dateStr.localeCompare(u.dateStr)),(e==="day"?i.slice(-30):i).forEach(({dateStr:l,logData:u,tasks:d,impossible:m,workers:f})=>{const T=new Date(l+"T00:00:00");let x;e==="month"?x=`${T.getFullYear()}-${String(T.getMonth()+1).padStart(2,"0")}`:x=l,t[x]||(t[x]={tasks:0,blocked:0,rainyDays:0,workers:{}}),t[x].tasks+=d.length,t[x].blocked+=m.length,u.weather==="Chuvoso"&&(t[x].rainyDays+=1),f.forEach(b=>{const w=b.role.trim();w&&(t[x].workers[w]=(t[x].workers[w]||0)+Number(b.count))})}),t},hL=({project:n,onClose:e,onPrint:t,constructors:i,platformSettings:o})=>{const[l,u]=te.useState(!0),[d,m]=te.useState({}),[f,T]=te.useState("month");te.useEffect(()=>{u(!0);const b=setTimeout(()=>{const w=fL(n.id,f);m(w),u(!1)},500);return()=>clearTimeout(b)},[n.id,f]);const x=te.useMemo(()=>{const b=Object.keys(d).sort((G,j)=>G.localeCompare(j)),w=G=>{if(f==="month"){const[ee,le]=G.split("-");return new Date(Number(ee),Number(le)-1).toLocaleString("pt-BR",{month:"short",year:"2-digit"}).replace(".","")}return new Date(G+"T00:00:00").toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})},D=new Set;b.forEach(G=>{Object.keys(d[G].workers).forEach(j=>D.add(j))});const L=["bg-sky-500","bg-teal-500","bg-emerald-500","bg-lime-500","bg-amber-500","bg-orange-500","bg-rose-500","bg-fuchsia-500","bg-violet-500","bg-indigo-500"],O=Array.from(D).sort().map((G,j)=>({name:G,colorClass:L[j%L.length]})),z=b.map(G=>({label:w(G),values:d[G].workers}));return{tasks:b.map(G=>({label:w(G),value:d[G].tasks})),blocked:b.map(G=>({label:w(G),value:d[G].blocked})),rainyDays:b.map(G=>({label:w(G),value:d[G].rainyDays})),workerData:z,workerSeries:O}},[d,f]);return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:g.jsxs("div",{className:"bg-light-card dark:bg-dark-card rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col transform transition-all",children:[g.jsx("div",{className:"p-6 border-b dark:border-dark-border",children:g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-2xl font-bold text-light-text-primary dark:text-dark-text-primary flex items-center gap-2",children:[g.jsx(RE,{className:"h-6 w-6 text-brand-indigo"}),"Anlise Grfica da Obra"]}),g.jsxs("p",{className:"text-sm text-gray-500 dark:text-dark-text-secondary",children:["Projeto: ",n.name]})]}),g.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-3xl leading-none",children:""})]})}),g.jsx("div",{className:"flex-grow p-6 overflow-y-auto",children:l?g.jsx("div",{className:"flex justify-center items-center h-64",children:g.jsx(Gi,{className:"h-12 w-12 text-brand-indigo animate-spin"})}):g.jsxs("div",{className:"space-y-10",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4",children:[g.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary mb-2 sm:mb-0",children:"Histograma de Colaboradores (Homem x Dia)"}),g.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-dark-border p-1 rounded-lg",children:[g.jsx("button",{onClick:()=>T("day"),className:`px-3 py-1 text-sm font-semibold rounded-md transition ${f==="day"?"bg-white dark:bg-dark-card shadow":"text-gray-600 dark:text-dark-text-secondary"}`,children:"Dia"}),g.jsx("button",{onClick:()=>T("month"),className:`px-3 py-1 text-sm font-semibold rounded-md transition ${f==="month"?"bg-white dark:bg-dark-card shadow":"text-gray-600 dark:text-dark-text-secondary"}`,children:"Ms"})]})]}),g.jsx(VA,{series:x.workerSeries,data:x.workerData})]}),g.jsx(Aa,{title:"Atividades Realizadas por Ms",data:x.tasks,barColorClass:"bg-green-500"}),g.jsx(Aa,{title:"Atividades Impossibilitadas por Ms",data:x.blocked,barColorClass:"bg-red-500"}),g.jsx(Aa,{title:"Dias de Chuva por Ms",data:x.rainyDays,barColorClass:"bg-blue-500"})]})}),g.jsxs("div",{className:"p-4 bg-light-card dark:bg-dark-card rounded-b-xl flex justify-end gap-4 border-t dark:border-dark-border",children:[g.jsxs("button",{onClick:()=>t(x),className:"flex items-center gap-2 bg-brand-indigo hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-xl transition",children:[g.jsx(Pa,{className:"h-5 w-5"}),"Imprimir Grficos"]}),g.jsx("button",{onClick:e,className:"bg-gray-200 dark:bg-dark-border hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-dark-text-primary font-bold py-2 px-4 rounded-xl",children:"Fechar"})]})]})})};var mL=SE();const pL=Gp(mL),TE=({project:n,constructors:e,platformSettings:t,formattedChartData:i})=>{const o=e.find(l=>l.id===n.constructorId);return g.jsxs("div",{className:"bg-white text-gray-800 p-8 font-sans text-sm",children:[g.jsxs("header",{className:"flex justify-between items-start pb-4 mb-6 border-b-2 border-gray-300",children:[g.jsxs("div",{className:"text-left",children:[(t==null?void 0:t.logo)&&g.jsx(sf,{logoSrc:t.logo,className:"h-10 w-auto mb-2"}),g.jsx("h1",{className:"text-xl font-bold text-gray-800",children:t==null?void 0:t.name})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("h2",{className:"text-lg font-bold",children:n.name}),g.jsx("p",{className:"text-sm text-gray-600",children:(o==null?void 0:o.name)||"Construtora no especificada"}),g.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Relatrio Grfico Gerado em: ",new Date().toLocaleDateString("pt-BR")]})]})]}),g.jsxs("div",{className:"space-y-10",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary print:text-black mb-4",children:"Histograma de Colaboradores (Homem x Dia)"}),g.jsx(VA,{series:i.workerSeries,data:i.workerData})]}),g.jsx("div",{className:"print-page-break",children:g.jsx(Aa,{title:"Atividades Realizadas",data:i.tasks,barColorClass:"bg-green-500"})}),g.jsx("div",{className:"mt-10",children:g.jsx(Aa,{title:"Atividades Impossibilitadas",data:i.blocked,barColorClass:"bg-red-500"})}),g.jsx("div",{className:"mt-10",children:g.jsx(Aa,{title:"Dias de Chuva",data:i.rainyDays,barColorClass:"bg-blue-500"})})]})]})},gL=n=>{const{onClose:e}=n,t=()=>{document.body.classList.add("print-active");const o=()=>{document.body.classList.remove("print-active"),window.removeEventListener("afterprint",o)};window.addEventListener("afterprint",o),setTimeout(()=>{window.print()},100)},i=()=>pL.createPortal(g.jsx("div",{className:"printable-portal",children:g.jsx(TE,{...n})}),document.body);return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex justify-center items-center p-4 print:hidden",children:g.jsxs("div",{className:"bg-gray-200 dark:bg-dark-border rounded-xl shadow-xl w-full max-w-4xl h-[95vh] flex flex-col",children:[g.jsxs("div",{className:"p-4 bg-light-card dark:bg-dark-card rounded-t-xl flex justify-between items-center border-b dark:border-dark-border",children:[g.jsx("h2",{className:"text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Pr-visualizao de Impresso"}),g.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-3xl leading-none",children:""})]}),g.jsx("div",{className:"flex-grow overflow-auto p-8 bg-gray-500 dark:bg-dark-bg",children:g.jsx("div",{className:"w-[210mm] min-h-[297mm] mx-auto bg-white shadow-2xl origin-top",children:g.jsx(TE,{...n})})}),g.jsxs("div",{className:"p-4 bg-light-card dark:bg-dark-card rounded-b-xl flex justify-end gap-4 border-t dark:border-dark-border",children:[g.jsx("button",{onClick:e,className:"bg-gray-200 dark:bg-dark-border hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-dark-text-primary font-bold py-2 px-4 rounded-xl",children:"Fechar"}),g.jsxs("button",{onClick:t,className:"flex items-center gap-2 bg-brand-indigo hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-xl transition",children:[g.jsx(Pa,{className:"h-5 w-5"}),"Imprimir"]})]})]})}),g.jsx(i,{})]})},yL=({project:n,onSelect:e})=>{const t={active:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300","on-hold":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",completed:"bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-300"};return g.jsxs("div",{onClick:e,className:"bg-light-card dark:bg-dark-card rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 cursor-pointer flex flex-col overflow-hidden",children:[g.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:n.logo?g.jsx("img",{src:n.logo,alt:n.name,className:"h-full w-full object-cover"}):g.jsx(ao,{className:"h-16 w-16 text-gray-400"})}),g.jsxs("div",{className:"p-4 flex-grow flex flex-col",children:[g.jsx("h3",{className:"text-lg font-bold text-light-text-primary dark:text-dark-text-primary",children:n.name}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-dark-text-secondary flex-grow truncate",children:n.address}),g.jsx("div",{className:"mt-3",children:g.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t[n.status]}`,children:n.status==="active"?"Ativa":n.status==="on-hold"?"Em espera":"Concluda"})})]})]})},vL=({projects:n,onSelectProject:e,currentUser:t,constructors:i,platformSettings:o})=>{const[l,u]=te.useState(!1),[d,m]=te.useState(!1),[f,T]=te.useState(!1),[x,b]=te.useState(null),[w,D]=te.useState(null),L=(j,ee)=>{j.stopPropagation(),b(ee),m(!0)},O=()=>{m(!1),b(null)},z=j=>{D(j),m(!1),T(!0)},G=()=>{T(!1),b(null),D(null)};return g.jsxs(g.Fragment,{children:[(t.role==="admin"||t.role==="gestor")&&g.jsx("div",{className:"flex justify-end mb-4",children:g.jsxs("button",{onClick:()=>u(!0),className:"flex items-center justify-center gap-2 bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white font-bold py-2 px-4 rounded-xl transition duration-300 shadow-lg",children:[g.jsx(ga,{className:"h-5 w-5"}),"Anlise IA (Geral)"]})}),n.length>0?g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map(j=>g.jsxs("div",{className:"relative group",children:[g.jsx(yL,{project:j,onSelect:()=>e(j)}),g.jsx("button",{onClick:ee=>L(ee,j),className:"absolute top-2 right-2 p-2 bg-black/40 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/60",title:"Ver Grficos",children:g.jsx(RE,{className:"h-5 w-5"})})]},j.id))}):g.jsxs("div",{className:"text-center py-16 bg-gray-50 dark:bg-dark-card rounded-xl",children:[g.jsx(ao,{className:"mx-auto h-12 w-12 text-gray-400"}),g.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-dark-text-primary",children:"Nenhuma obra encontrada"}),g.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-dark-text-secondary",children:t.role==="campo"?"Voc ainda no foi atribudo a nenhuma obra.":'Comece adicionando uma nova obra na aba "Gerenciar".'})]}),l&&g.jsx(dL,{projects:n,onClose:()=>u(!1),constructors:i,platformSettings:o,currentUser:t}),d&&x&&g.jsx(hL,{project:x,onClose:O,onPrint:z,constructors:i,platformSettings:o}),f&&x&&w&&g.jsx(gL,{onClose:G,project:x,constructors:i,platformSettings:o,formattedChartData:w})]})},_L=({isOpen:n,onClose:e,onSave:t,onDelete:i,projectToEdit:o,constructors:l,currentUser:u})=>{const[d,m]=te.useState({name:"",status:"active",address:"",size:0,logo:"",startDate:new Date().toISOString().split("T")[0],constructorId:"",artNumber:"",creaNumber:"",technicalManager:"",endDate:""}),[f,T]=te.useState(!1),[x,b]=te.useState(""),w=te.useRef(null);if(te.useEffect(()=>{m(o?{name:o.name,status:o.status,address:o.address||"",size:o.size||0,logo:o.logo||"",startDate:o.startDate||new Date().toISOString().split("T")[0],constructorId:o.constructorId||"",artNumber:o.artNumber||"",creaNumber:o.creaNumber||"",technicalManager:o.technicalManager||"",endDate:o.endDate||""}:{name:"",status:"active",address:"",size:0,logo:"",startDate:new Date().toISOString().split("T")[0],constructorId:"",artNumber:"",creaNumber:"",technicalManager:"",endDate:""}),b("")},[o,n]),!n)return null;const D=G=>{const{name:j,value:ee}=G.target;m(le=>({...le,[j]:j==="size"?Number(ee):ee}))},L=G=>{var ee;const j=(ee=G.target.files)==null?void 0:ee[0];if(j){const le=new FileReader;le.onloadend=()=>{m(ie=>({...ie,logo:le.result}))},le.readAsDataURL(j)}},O=async()=>{if(!(x.length<8)){T(!0);try{const G=await fetch(`https://viacep.com.br/ws/${x.replace(/\D/g,"")}/json/`);if(!G.ok)throw new Error("CEP no encontrado");const j=await G.json();if(j.erro)throw new Error("CEP invlido");const ee=`${j.logradouro}, ${j.bairro}, ${j.localidade} - ${j.uf}`;m(le=>({...le,address:ee}))}catch(G){alert(G instanceof Error?G.message:"Erro ao buscar CEP.")}finally{T(!1)}}},z=G=>{G.preventDefault(),t(d)};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:g.jsx("div",{className:"bg-light-card dark:bg-dark-card rounded-xl shadow-xl w-full max-w-2xl max-h-full overflow-y-auto",children:g.jsxs("form",{onSubmit:z,className:"p-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h2",{className:"text-2xl font-bold text-light-text-primary dark:text-dark-text-primary",children:o?"Editar Obra":"Adicionar Nova Obra"}),g.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-3xl leading-none",children:""})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsx(ns,{label:"Nome da Obra",name:"name",value:d.name,onChange:D,required:!0}),g.jsxs("div",{className:"mb-2",children:[g.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:"Status da Obra"}),g.jsxs("select",{id:"status",name:"status",value:d.status,onChange:D,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600",children:[g.jsx("option",{value:"active",children:"Ativa"}),g.jsx("option",{value:"on-hold",children:"Em Espera"}),g.jsx("option",{value:"completed",children:"Concluda"})]})]}),g.jsxs("div",{className:"md:col-span-2 mb-2",children:[g.jsx("label",{htmlFor:"constructorId",className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:"Construtora Responsvel"}),g.jsxs("select",{id:"constructorId",name:"constructorId",value:d.constructorId,onChange:D,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600",children:[g.jsx("option",{value:"",children:"Selecione..."}),l.map(G=>g.jsx("option",{value:G.id,children:G.name},G.id))]})]}),g.jsx(ns,{label:"Responsvel Tcnico",name:"technicalManager",value:d.technicalManager||"",onChange:D}),g.jsx(ns,{label:"N CREA",name:"creaNumber",value:d.creaNumber||"",onChange:D}),g.jsx(ns,{label:"N ART de Execuo",name:"artNumber",value:d.artNumber||"",onChange:D}),g.jsx(ns,{label:"rea (m)",name:"size",value:String(d.size),onChange:D,type:"number"}),g.jsx(ns,{label:"Data de Incio",name:"startDate",value:d.startDate||"",onChange:D,type:"date",className:"date-input-icon"}),g.jsx(ns,{label:"Data Prevista de Trmino",name:"endDate",value:d.endDate||"",onChange:D,type:"date",className:"date-input-icon"}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{htmlFor:"cep",className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:"CEP (para busca de endereo)"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",id:"cep",value:x,onChange:G=>b(G.target.value),placeholder:"00000-000",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600"}),g.jsx("button",{type:"button",onClick:O,disabled:f,className:"bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 px-4 rounded-xl transition disabled:bg-gray-400 flex items-center justify-center w-28",children:f?g.jsx(Gi,{className:"h-5 w-5 animate-spin"}):"Buscar"})]})]}),g.jsx("div",{className:"md:col-span-2",children:g.jsx(ns,{label:"Endereo Completo",name:"address",value:d.address||"",onChange:D})}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:"Logo da Obra (Opcional)"}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"h-16 w-16 rounded-md bg-gray-100 dark:bg-gray-700 flex items-center justify-center overflow-hidden",children:d.logo?g.jsx("img",{src:d.logo,alt:"logo preview",className:"h-full w-full object-contain"}):g.jsx("span",{className:"text-xs text-gray-500",children:"Preview"})}),g.jsx("input",{type:"file",accept:"image/*",ref:w,onChange:L,className:"hidden"}),g.jsxs("div",{children:[g.jsxs("button",{type:"button",onClick:()=>{var G;return(G=w.current)==null?void 0:G.click()},className:"flex items-center gap-2 bg-gray-200 dark:bg-dark-border hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-dark-text-secondary font-semibold py-2 px-4 rounded-xl transition",children:[g.jsx(of,{className:"h-5 w-5"}),"Carregar"]}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Sugesto: Proporo 16:9 (ex: 800 x 450 px)"})]})]})]})]}),g.jsxs("div",{className:"flex justify-end items-center gap-4 mt-6 pt-4 border-t dark:border-dark-border",children:[o&&g.jsxs("button",{type:"button",onClick:()=>i(o.id),className:"text-red-600 hover:text-red-800 font-semibold flex items-center gap-1 mr-auto",children:[g.jsx(ui,{className:"h-4 w-4"}),"Excluir Obra"]}),g.jsx("button",{type:"button",onClick:e,className:"bg-gray-200 dark:bg-dark-border hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-dark-text-primary font-bold py-2 px-4 rounded-xl",children:"Cancelar"}),g.jsx("button",{type:"submit",className:"bg-brand-indigo hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-xl",children:"Salvar"})]})]})})})},ns=({label:n,name:e,value:t,onChange:i,type:o="text",required:l=!1,className:u=""})=>g.jsxs("div",{className:"mb-2",children:[g.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:n}),g.jsx("input",{type:o,id:e,name:e,value:t,onChange:i,required:l,className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600 ${u}`})]}),TL=({isOpen:n,onClose:e,onSave:t,constructorToEdit:i})=>{const[o,l]=te.useState({name:"",logo:"",cnpj:""}),u=te.useRef(null);if(te.useEffect(()=>{l(i?{name:i.name,logo:i.logo||"",cnpj:i.cnpj||""}:{name:"",logo:"",cnpj:""})},[i,n]),!n)return null;const d=T=>{l(x=>({...x,[T.target.name]:T.target.value}))},m=T=>{var b;const x=(b=T.target.files)==null?void 0:b[0];if(x){const w=new FileReader;w.onloadend=()=>{l(D=>({...D,logo:w.result}))},w.readAsDataURL(x)}},f=T=>{T.preventDefault(),t(o)};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:g.jsx("div",{className:"bg-light-card dark:bg-dark-card rounded-xl shadow-xl w-full max-w-md",children:g.jsxs("div",{className:"p-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h2",{className:"text-2xl font-bold text-light-text-primary dark:text-dark-text-primary",children:i?"Editar Construtora":"Adicionar Construtora"}),g.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-3xl leading-none",children:""})]}),g.jsxs("form",{onSubmit:f,children:[g.jsx(xE,{label:"Nome da Construtora",name:"name",value:o.name,onChange:d,required:!0}),g.jsx(xE,{label:"CNPJ",name:"cnpj",value:o.cnpj||"",onChange:d}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:"Logo (Opcional)"}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"h-16 w-16 rounded-md bg-gray-100 dark:bg-gray-700 flex items-center justify-center overflow-hidden",children:o.logo?g.jsx("img",{src:o.logo,alt:"logo preview",className:"h-full w-full object-contain"}):g.jsx("span",{className:"text-xs text-gray-500",children:"Preview"})}),g.jsx("input",{type:"file",accept:"image/*",ref:u,onChange:m,className:"hidden"}),g.jsxs("div",{children:[g.jsxs("button",{type:"button",onClick:()=>{var T;return(T=u.current)==null?void 0:T.click()},className:"flex items-center gap-2 bg-gray-200 hover:bg-gray-300 dark:bg-dark-border dark:hover:bg-gray-600 text-gray-700 dark:text-dark-text-secondary font-semibold py-2 px-4 rounded-xl transition",children:[g.jsx(of,{className:"h-5 w-5"}),"Carregar Logo"]}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Sugesto: 200 x 200 px"})]})]})]}),g.jsxs("div",{className:"flex justify-end gap-4 mt-6 pt-4 border-t dark:border-dark-border",children:[g.jsx("button",{type:"button",onClick:e,className:"bg-gray-200 dark:bg-dark-border hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-dark-text-primary font-bold py-2 px-4 rounded-xl",children:"Cancelar"}),g.jsx("button",{type:"submit",className:"bg-brand-indigo hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-xl",children:"Salvar"})]})]})]})})})},xE=({label:n,name:e,value:t,onChange:i,required:o=!1})=>g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:n}),g.jsx("input",{type:"text",id:e,name:e,value:t,onChange:i,required:o,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600"})]}),xL=({isOpen:n,onClose:e,onSave:t,userToEdit:i,currentUser:o,projects:l})=>{const[u,d]=te.useState({}),[m,f]=te.useState(""),[T,x]=te.useState(new Set);if(te.useEffect(()=>{if(n&&(i==null?void 0:i.role)==="admin"&&o.role!=="admin"){e();return}if(i)d({name:i.name,email:i.email,whatsapp:i.whatsapp||"",role:i.role,createdBy:i.createdBy,accessLevel:i.accessLevel,trialEndsAt:i.trialEndsAt,assignedProjectIds:i.assignedProjectIds||[]}),x(new Set(i.assignedProjectIds||[])),f("");else{const L=o.role==="admin"?"gestor":"campo";d({name:"",email:"",whatsapp:"",role:L,accessLevel:"trial",trialEndsAt:Date.now()+10080*60*1e3,createdBy:o.role==="gestor"?o.id:void 0,assignedProjectIds:[]}),x(new Set),f("")}},[i,n,o,e]),!n)return null;const b=L=>{const{name:O,value:z}=L.target;d(G=>({...G,[O]:z}))},w=L=>{x(O=>{const z=new Set(O);return z.has(L)?z.delete(L):z.add(L),z})},D=L=>{L.preventDefault();const O={...u};m&&(O.password=m),O.role==="campo"?O.assignedProjectIds=Array.from(T):delete O.assignedProjectIds,!i&&o.role==="gestor"&&(O.role="campo",O.createdBy=o.id),t(O)};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:g.jsx("div",{className:"bg-light-card dark:bg-dark-card rounded-xl shadow-xl w-full max-w-md",children:g.jsxs("form",{onSubmit:D,className:"p-6 max-h-[90vh] overflow-y-auto",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h2",{className:"text-2xl font-bold text-light-text-primary dark:text-dark-text-primary",children:i?"Editar Usurio":"Adicionar Usurio"}),g.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-3xl leading-none",children:""})]}),g.jsx(_d,{label:"Nome",name:"name",value:u.name||"",onChange:b,required:!0}),g.jsx(_d,{label:"Email",name:"email",type:"email",value:u.email||"",onChange:b,required:!0}),g.jsx(_d,{label:"WhatsApp",name:"whatsapp",value:u.whatsapp||"",onChange:b}),g.jsx(_d,{label:"Senha",name:"password",type:"password",value:m,onChange:L=>f(L.target.value),required:!i,placeholder:i?"Deixe em branco para no alterar":""}),o.role==="admin"&&g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:"Perfil"}),g.jsxs("select",{id:"role",name:"role",value:u.role,onChange:b,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary",children:[g.jsx("option",{value:"gestor",children:"Gestor"}),g.jsx("option",{value:"campo",children:"Campo"})]})]}),u.role==="campo"&&g.jsxs("div",{className:"mt-6 pt-4 border-t dark:border-dark-border",children:[g.jsxs("label",{className:"block text-lg font-semibold text-gray-800 dark:text-dark-text-primary mb-2 flex items-center gap-2",children:[g.jsx(ao,{className:"h-6 w-6"}),"Atribuir Obras"]}),g.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-md",children:l.filter(L=>L.status==="active").length>0?l.filter(L=>L.status==="active").map(L=>g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:`project-${L.id}`,checked:T.has(L.id),onChange:()=>w(L.id),className:"h-4 w-4 rounded border-gray-300 text-brand-indigo focus:ring-brand-indigo"}),g.jsx("label",{htmlFor:`project-${L.id}`,className:"ml-3 block text-sm font-medium text-gray-700 dark:text-dark-text-secondary",children:L.name})]},L.id)):g.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-dark-text-secondary",children:"Nenhuma obra ativa para atribuir."})})]}),g.jsxs("div",{className:"flex justify-end gap-4 mt-6 pt-4 border-t dark:border-dark-border",children:[g.jsx("button",{type:"button",onClick:e,className:"bg-gray-200 hover:bg-gray-300 dark:bg-dark-border dark:hover:bg-gray-600 text-gray-800 dark:text-dark-text-primary font-bold py-2 px-4 rounded-xl",children:"Cancelar"}),g.jsx("button",{type:"submit",className:"bg-brand-indigo hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-xl",children:"Salvar"})]})]})})})},_d=({label:n,...e})=>g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:n}),g.jsx("input",{...e,id:e.name,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600"})]}),EL=({constructors:n,onOpenModal:e,onDelete:t})=>g.jsxs("div",{className:"bg-light-card dark:bg-dark-card p-6 rounded-xl shadow-lg mb-8",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(ao,{className:"h-6 w-6 text-brand-indigo"}),g.jsx("h2",{className:"text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Construtoras"})]}),g.jsx("div",{className:"border-b-2 border-light-bg dark:border-dark-border my-3"}),g.jsxs("div",{className:"space-y-3 mb-4",children:[n.length===0&&g.jsx("p",{className:"text-gray-500 dark:text-dark-text-secondary text-center py-2",children:"Nenhuma construtora cadastrada."}),n.map(i=>g.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 p-3 rounded-xl group",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[i.logo?g.jsx("img",{src:i.logo,alt:i.name,className:"h-14 w-14 object-contain rounded-md bg-white dark:bg-gray-700 p-1 shadow-sm"}):g.jsx("div",{className:"h-14 w-14 bg-gray-200 dark:bg-gray-700 rounded-md flex items-center justify-center flex-shrink-0",children:g.jsx(ao,{className:"h-8 w-8 text-gray-400"})}),g.jsx("span",{className:"text-gray-800 dark:text-dark-text-primary font-bold text-lg",children:i.name})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("button",{onClick:()=>e(i),className:"text-gray-400 hover:text-blue-500 dark:hover:text-blue-400 p-2 opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx(hu,{className:"h-5 w-5"})}),g.jsx("button",{onClick:()=>t(i.id),className:"text-gray-400 hover:text-red-500 p-2 opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx(ui,{className:"h-5 w-5"})})]})]},i.id))]}),g.jsx("div",{className:"pt-4 border-t border-light-bg dark:border-dark-border flex justify-center",children:g.jsxs("button",{onClick:()=>e(null),className:"flex items-center justify-center gap-2 bg-blue-100 hover:bg-blue-200 dark:bg-blue-900/50 dark:hover:bg-blue-900 text-blue-800 dark:text-blue-300 font-bold py-2 px-4 rounded-xl transition",children:[g.jsx(Da,{className:"h-5 w-5"}),"Adicionar Construtora"]})})]}),bL=({users:n,onOpenModal:e,onDelete:t,currentUser:i})=>{const o=n.filter(l=>i.role==="admin"?!0:i.role==="gestor"?l.id===i.id||l.createdBy===i.id:!1).filter(l=>l.role!=="admin"||i.role==="admin");return g.jsxs("div",{className:"bg-light-card dark:bg-dark-card p-6 rounded-xl shadow-lg mb-8",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(Pd,{className:"h-6 w-6 text-brand-indigo"}),g.jsx("h2",{className:"text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Usurios"})]}),g.jsx("div",{className:"border-b-2 border-light-bg dark:border-dark-border my-3"}),g.jsxs("div",{className:"space-y-3 mb-4",children:[o.length===0&&g.jsx("p",{className:"text-gray-500 dark:text-dark-text-secondary text-center py-2",children:"Nenhum usurio para exibir."}),o.map(l=>g.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 p-3 rounded-xl group",children:[g.jsxs("div",{children:[g.jsxs("p",{className:"font-bold text-gray-800 dark:text-dark-text-primary",children:[l.name," ",l.id===i.id&&"(Voc)"]}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-dark-text-secondary",children:l.email})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("button",{onClick:()=>e(l),className:"text-gray-400 hover:text-blue-500 p-2 opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx(hu,{className:"h-5 w-5"})}),g.jsx("button",{onClick:()=>t(l.id),className:"text-gray-400 hover:text-red-500 p-2 opacity-0 group-hover:opacity-100 transition-opacity",disabled:l.role==="admin",children:g.jsx(ui,{className:`h-5 w-5 ${l.role==="admin"?"text-gray-300":""}`})})]})]},l.id))]}),g.jsx("div",{className:"pt-4 border-t border-light-bg dark:border-dark-border flex justify-center",children:g.jsxs("button",{onClick:()=>e(null),className:"flex items-center justify-center gap-2 bg-blue-100 hover:bg-blue-200 dark:bg-blue-900/50 dark:hover:bg-blue-900 text-blue-800 dark:text-blue-300 font-bold py-2 px-4 rounded-xl transition",children:[g.jsx(Da,{className:"h-5 w-5"}),i.role==="gestor"?"Adicionar Usurio de Campo":"Adicionar Usurio"]})})]})},SL=({projects:n,onOpenModal:e})=>g.jsxs("div",{className:"bg-light-card dark:bg-dark-card p-6 rounded-xl shadow-lg mb-8",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(OC,{className:"h-6 w-6 text-brand-indigo"}),g.jsx("h2",{className:"text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Obras"})]}),g.jsx("div",{className:"border-b-2 border-light-bg dark:border-dark-border my-3"}),g.jsxs("div",{className:"space-y-3 mb-4",children:[n.length===0&&g.jsx("p",{className:"text-gray-500 dark:text-dark-text-secondary text-center py-2",children:"Nenhuma obra cadastrada."}),n.map(t=>g.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 p-3 rounded-xl group",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[t.logo?g.jsx("img",{src:t.logo,alt:t.name,className:"h-14 w-14 object-cover rounded-md bg-white p-1 shadow-sm"}):g.jsx("div",{className:"h-14 w-14 bg-gray-200 dark:bg-gray-700 rounded-md flex items-center justify-center flex-shrink-0",children:g.jsx(ao,{className:"h-8 w-8 text-gray-400"})}),g.jsxs("div",{children:[g.jsx("p",{className:"font-bold text-gray-800 dark:text-dark-text-primary",children:t.name}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-dark-text-secondary",children:t.address})]})]}),g.jsx("button",{onClick:()=>e(t),className:"text-gray-400 hover:text-blue-500 p-2 opacity-50 group-hover:opacity-100 transition-opacity",children:g.jsx(Jp,{className:"h-5 w-5"})})]},t.id))]}),g.jsx("div",{className:"pt-4 border-t border-light-bg dark:border-dark-border flex justify-center",children:g.jsxs("button",{onClick:()=>e(null),className:"flex items-center justify-center gap-2 bg-blue-100 hover:bg-blue-200 dark:bg-blue-900/50 dark:hover:bg-blue-900 text-blue-800 dark:text-blue-300 font-bold py-2 px-4 rounded-xl transition",children:[g.jsx(Da,{className:"h-5 w-5"}),"Adicionar Nova Obra"]})})]}),AL=({projects:n,saveProjects:e,constructors:t,saveConstructors:i,allUsers:o,saveUsers:l,currentUser:u})=>{const[d,m]=te.useState(!1),[f,T]=te.useState(null),[x,b]=te.useState(!1),[w,D]=te.useState(null),[L,O]=te.useState(!1),[z,G]=te.useState(null),j=U=>{T(U),m(!0)},ee=async U=>{let M;if(f)M=n.map(ce=>ce.id===f.id?{...f,...U}:ce);else{const ce={...U,id:`project-${Date.now()}`};M=[...n,ce]}await e(M),m(!1)},le=async U=>{if(window.confirm("Tem certeza que deseja excluir esta obra e todos os seus relatrios? Esta ao  irreversvel.")){const M=n.filter(ce=>ce.id!==U);await e(M),Object.keys(localStorage).forEach(ce=>{ce.startsWith(`logData-${U}-`)&&localStorage.removeItem(ce)}),m(!1)}},ie=U=>{D(U),b(!0)},N=async U=>{let M;if(w)M=t.map(ce=>ce.id===w.id?{...ce,...U}:ce);else{const ce={...U,id:`constructor-${Date.now()}`};M=[...t,ce]}await i(M),b(!1)},R=async U=>{window.confirm("Tem certeza que deseja excluir esta construtora?")&&await i(t.filter(M=>M.id!==U))},k=U=>{G(U),O(!0)},P=async U=>{let M;if(z)M=o.map(ce=>ce.id===z.id?{...z,...U}:ce);else{const ce={...U,id:`user-${Date.now()}`};M=[...o,ce]}await l(M),O(!1)},V=async U=>{const M=o.find(ce=>ce.id===U);if((M==null?void 0:M.role)==="admin"){alert("No  possvel excluir o usurio administrador.");return}window.confirm("Tem certeza que deseja excluir este usurio?")&&await l(o.filter(ce=>ce.id!==U))};return g.jsxs("div",{children:[g.jsx(EL,{constructors:t,onOpenModal:ie,onDelete:R}),g.jsx(SL,{projects:n,onOpenModal:j}),g.jsx(bL,{users:o,onOpenModal:k,onDelete:V,currentUser:u}),g.jsx(_L,{isOpen:d,onClose:()=>m(!1),onSave:ee,onDelete:le,projectToEdit:f,constructors:t,currentUser:u}),g.jsx(TL,{isOpen:x,onClose:()=>b(!1),onSave:N,constructorToEdit:w}),g.jsx(xL,{isOpen:L,onClose:()=>O(!1),onSave:P,userToEdit:z,currentUser:u,projects:n})]})},wL=n=>{const{currentUser:e,setView:t,projects:i,platformSettings:o,constructors:l}=n,[u,d]=te.useState("dashboard"),m=te.useMemo(()=>e.role==="admin"||e.role==="gestor"?i:e.role==="campo"?i.filter(T=>{var x;return(x=e.assignedProjectIds)==null?void 0:x.includes(T.id)}):[],[i,e]),f=()=>u==="dashboard"?g.jsx(vL,{projects:m,onSelectProject:n.onSelectProject,currentUser:n.currentUser,constructors:l,platformSettings:o}):u==="management"?g.jsx(AL,{projects:n.projects,saveProjects:n.saveProjects,constructors:n.constructors,saveConstructors:n.saveConstructors,allUsers:n.allUsers,saveUsers:n.saveUsers,currentUser:n.currentUser}):null;return g.jsxs("div",{children:[g.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-center gap-4",children:[g.jsx("h1",{className:"text-3xl font-bold text-light-text-primary dark:text-dark-text-primary",children:u==="dashboard"?"Painel de Obras":"Gerenciamento"}),g.jsxs("div",{className:"flex items-center gap-2 bg-gray-200 dark:bg-dark-border p-1 rounded-xl",children:[g.jsx("button",{onClick:()=>d("dashboard"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition ${u==="dashboard"?"bg-white dark:bg-dark-card shadow":"text-gray-600 dark:text-dark-text-secondary"}`,children:"Painel"}),(e.role==="admin"||e.role==="gestor")&&g.jsx("button",{onClick:()=>d("management"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition ${u==="management"?"bg-white dark:bg-dark-card shadow":"text-gray-600 dark:text-dark-text-secondary"}`,children:"Gerenciar"}),e.role==="admin"&&g.jsxs("button",{onClick:()=>t("adminDashboard"),title:"Painel do Administrador",className:"px-3 py-2 text-sm font-semibold text-gray-600 dark:text-dark-text-secondary rounded-lg transition hover:bg-white/50 dark:hover:bg-dark-card/50 flex items-center gap-2",children:[g.jsx(PC,{className:"h-5 w-5"}),g.jsx("span",{className:"hidden md:inline",children:"Admin"})]})]})]}),f()]})},rp=[{label:"Ensolarado",icon:g.jsx(AE,{className:"h-6 w-6 text-yellow-500"})},{label:"Nublado",icon:g.jsx(wC,{className:"h-6 w-6 text-gray-500"})},{label:"Chuvoso",icon:g.jsx(CC,{className:"h-6 w-6 text-blue-500"})},{label:"Parcialmente Nublado",icon:g.jsx(IC,{className:"h-6 w-6 text-sky-500"})},{label:"Tempestade",icon:g.jsx(NC,{className:"h-6 w-6 text-purple-500"})},{label:"Vento Forte",icon:g.jsx(RC,{className:"h-6 w-6 text-gray-600"})}],CL=({title:n,children:e,icon:t})=>g.jsxs("div",{className:"bg-light-card dark:bg-dark-card p-6 rounded-xl shadow-lg",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[t,g.jsx("h2",{className:"text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:n})]}),g.jsx("div",{className:"border-b-2 border-light-bg dark:border-dark-border my-3"}),e]}),Td=({label:n,name:e,value:t,onChange:i,type:o="text",disabled:l=!1})=>g.jsxs("div",{children:[g.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:n}),g.jsx("input",{type:o,id:e,name:e,value:t,onChange:i,disabled:l,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo transition duration-150 ease-in-out bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed"})]}),IL=({logData:n,onChange:e,constructor:t,elapsedDays:i,project:o})=>{const l=rp.find(d=>d.label===n.weather)||rp[0],u=()=>{if(o.endDate){const d=new Date(o.endDate+"T00:00:00"),m=new Date(n.date+"T00:00:00");if(d>=m){const f=d.getTime()-m.getTime(),T=Math.ceil(f/(1e3*60*60*24));return g.jsxs("span",{className:"text-sm text-gray-500 dark:text-dark-text-secondary",children:[" (Faltam ",T," dias)"]})}else{const f=m.getTime()-d.getTime(),T=Math.ceil(f/(1e3*60*60*24));return g.jsxs("span",{className:"text-sm text-red-500 font-bold",children:[" (",T," dia",T>1?"s":""," atrasado)"]})}}return null};return g.jsx(CL,{title:"Informaes Gerais do Dirio",icon:g.jsx(wE,{className:"h-6 w-6 text-brand-indigo"}),children:g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"lg:col-span-1 flex flex-col sm:flex-row md:flex-col items-center text-center sm:text-left md:text-center gap-4 bg-gray-50 dark:bg-gray-800 p-4 rounded-xl",children:[t!=null&&t.logo?g.jsx("img",{src:t.logo,alt:t.name,className:"h-28 w-auto max-w-[200px] object-contain rounded-md"}):g.jsx("div",{className:"h-28 w-28 bg-gray-200 dark:bg-gray-700 rounded-md flex items-center justify-center flex-shrink-0",children:g.jsx(ao,{className:"h-14 w-14 text-gray-400"})}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-dark-text-secondary",children:"Construtora"}),g.jsx("p",{className:"font-bold text-gray-800 dark:text-dark-text-primary",children:(t==null?void 0:t.name)||"No informada"})]})]}),g.jsxs("div",{className:"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsx(Td,{label:"Nome da Obra",name:"projectName",value:n.projectName,onChange:e,disabled:!0}),g.jsx(Td,{label:"Engenheiro(a) Responsvel",name:"engineer",value:n.engineer,onChange:e}),g.jsx(Td,{label:"Responsvel pelo Preenchimento",name:"responsible",value:n.responsible,onChange:e,disabled:!0}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:"Data"}),g.jsx("input",{type:"date",id:"date",name:"date",value:n.date,onChange:e,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo transition duration-150 ease-in-out bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed",disabled:!0})]}),g.jsx(Td,{label:"Horrio de Trabalho",name:"workHours",value:n.workHours||"",onChange:e}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:"Dias Corridos"}),g.jsxs("div",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-dark-text-secondary",children:[i!==null&&i>0?`${i} dia`:"N/A",u()]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"tempMin",className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:"Temperatura Mnima"}),g.jsxs("div",{className:"relative",children:[g.jsxs("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 gap-1",children:[g.jsx(A_,{className:"h-5 w-5 text-gray-400"}),g.jsx(kC,{className:"h-4 w-4 text-blue-500"})]}),g.jsx("input",{type:"text",id:"tempMin",name:"tempMin",value:n.tempMin||"",onChange:e,className:"w-full pl-14 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo transition duration-150 ease-in-out bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600"})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"tempMax",className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:"Temperatura Mxima"}),g.jsxs("div",{className:"relative",children:[g.jsxs("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 gap-1",children:[g.jsx(A_,{className:"h-5 w-5 text-gray-400"}),g.jsx(MC,{className:"h-4 w-4 text-red-500"})]}),g.jsx("input",{type:"text",id:"tempMax",name:"tempMax",value:n.tempMax||"",onChange:e,className:"w-full pl-14 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo transition duration-150 ease-in-out bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600"})]})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{htmlFor:"weather",className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:"Condies do Tempo"}),g.jsxs("div",{className:"flex items-center gap-2",children:[l.icon,g.jsx("select",{id:"weather",name:"weather",value:n.weather,onChange:e,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600 transition duration-150 ease-in-out",children:rp.map(d=>g.jsx("option",{value:d.label,children:d.label},d.label))})]})]})]})]})})},NL=({result:n,onAccept:e,onUpdate:t,onDiscard:i})=>g.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/50 border border-blue-200 dark:border-blue-800 rounded-xl p-3 flex flex-col sm:flex-row items-center gap-4",children:[g.jsx("img",{src:n.imagePreview,alt:"suggestion preview",className:"w-20 h-20 object-cover rounded-md shadow-sm flex-shrink-0"}),g.jsx("input",{type:"text",value:n.suggestion,onChange:o=>t(o.target.value),className:"flex-grow w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo transition duration-150 bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600"}),g.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[g.jsx("button",{onClick:e,className:"p-2 bg-green-500 hover:bg-green-600 text-white rounded-full transition","aria-label":"Aceitar Sugesto",children:g.jsx(Yp,{className:"h-5 w-5"})}),g.jsx("button",{onClick:i,className:"p-2 bg-red-500 hover:red-600 text-white rounded-full transition","aria-label":"Descartar Sugesto",children:g.jsx(ui,{className:"h-5 w-5"})})]})]}),RL=({images:n,setImages:e,isLoading:t,analysisResults:i,hiddenResultsCount:o,onShowResults:l,onAcceptSuggestion:u,onUpdateSuggestion:d,onDiscardSuggestion:m,onAnalyzeImages:f})=>{const T=te.useRef(null),x=te.useRef(null),[b,w]=te.useState("Analisando Imagens com IA...");te.useEffect(()=>{if(t){const z=["Analisando imagens com IA...","Processando elementos das imagens...","Executando anlise inteligente...","Muitos elementos precisam de mais tempo. Acelerando...","Analisando com calma para garantir preciso..."];let G=0;w(z[0]);const j=setInterval(()=>{G=(G+1)%z.length,w(z[G])},2500);return()=>{clearInterval(j)}}},[t]);const D=z=>{if(!z)return;const G=ee=>new Promise((le,ie)=>{const N=new FileReader;N.onload=R=>{var P;if(!((P=R.target)!=null&&P.result))return ie(new Error("Could not read file."));const k=new Image;k.onload=()=>{const V=document.createElement("canvas"),U=1024;let{width:M,height:ce}=k;M>ce?M>U&&(ce=Math.round(ce*(U/M)),M=U):ce>U&&(M=Math.round(M*(U/ce)),ce=U),V.width=M,V.height=ce;const Ve=V.getContext("2d");if(!Ve)return ie(new Error("Could not get canvas context."));Ve.drawImage(k,0,0,M,ce);const Q=V.toDataURL("image/jpeg",.9);le({id:`${ee.name}-${Date.now()}`,dataUrl:Q})},k.onerror=()=>{ie(new Error(`O navegador no conseguiu ler o arquivo de imagem: ${ee.name}. O formato pode no ser suportado. Tente converter para JPG ou PNG.`))},k.src=R.target.result},N.onerror=()=>{ie(new Error(`Erro ao ler o arquivo: ${ee.name}.`))},N.readAsDataURL(ee)}),j=Array.from(z).map(ee=>G(ee).catch(le=>(console.error(le),alert(le.message),null)));Promise.all(j).then(ee=>{const le=ee.filter(ie=>ie!==null);le.length>0&&e(ie=>[...ie,...le])})},L=z=>{e(G=>G.filter(j=>j.id!==z))},O=()=>t?g.jsxs("button",{disabled:!0,className:"w-full flex items-center justify-center gap-2 bg-brand-indigo-light text-white font-bold py-3 px-4 rounded-xl transition duration-300 opacity-75",children:[g.jsx(op,{className:"h-6 w-6"}),b]}):o>0&&i.length===0?g.jsxs("button",{onClick:l,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 text-white font-bold py-3 px-4 rounded-xl transition duration-300 shadow-lg animate-gradient-x",children:[g.jsx(ga,{className:"h-5 w-5"}),"Ver Sugestes da IA (",o,")"]}):i.length>0?null:g.jsxs("button",{onClick:f,disabled:n.length===0,className:"w-full flex items-center justify-center gap-2 bg-brand-indigo hover:bg-brand-indigo-light text-white font-bold py-3 px-4 rounded-xl transition duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed",children:[g.jsx(ga,{className:"h-5 w-5"}),"Analisar Imagens com IA"]});return g.jsxs("div",{className:"bg-light-card dark:bg-dark-card p-6 rounded-xl shadow-lg",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(sp,{className:"h-6 w-6 text-brand-indigo"}),g.jsx("h2",{className:"text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Fotos do Dia"})]}),g.jsx("div",{className:"border-b-2 border-light-bg dark:border-dark-border my-3"}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[g.jsx("input",{type:"file",ref:x,accept:"image/*",capture:"environment",onChange:z=>D(z.target.files),className:"hidden"}),g.jsxs("button",{onClick:()=>{var z;return(z=x.current)==null?void 0:z.click()},className:"flex-1 flex items-center justify-center gap-2 bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-xl transition duration-300",children:[g.jsx(sp,{className:"h-5 w-5"}),"Tirar Foto"]}),g.jsx("input",{type:"file",ref:T,accept:"image/*",multiple:!0,onChange:z=>D(z.target.files),className:"hidden"}),g.jsxs("button",{onClick:()=>{var z;return(z=T.current)==null?void 0:z.click()},className:"flex-1 flex items-center justify-center gap-2 bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-xl transition duration-300",children:[g.jsx(of,{className:"h-5 w-5"}),"Carregar Fotos"]})]}),n.length>0&&g.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-6",children:n.map(z=>g.jsxs("div",{className:"relative group aspect-square",children:[g.jsx("img",{src:z.dataUrl,alt:"preview",className:"w-full h-full object-cover rounded-xl shadow-md"}),g.jsx("button",{onClick:()=>L(z.id),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx(ui,{className:"h-4 w-4"})})]},z.id))}),g.jsx("div",{className:"my-4",children:O()}),i.length>0&&g.jsxs("div",{className:"mt-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary mb-3",children:"Sugestes da IA"}),g.jsx("div",{className:"space-y-3",children:i.map(z=>g.jsx(NL,{result:z,onAccept:()=>u(z),onUpdate:G=>d(z.id,G),onDiscard:()=>m(z.id)},z.id))})]})]})},kL=({tasks:n,setTasks:e,taskHistory:t,onAddTask:i})=>{const[o,l]=te.useState(""),[u,d]=te.useState(""),m=te.useRef(null),f=()=>{var w,D;if(o.trim()===""){(w=m.current)==null||w.focus();return}i(o,u),l(""),d(""),(D=m.current)==null||D.focus()},T=w=>{var D,L;w.key==="Enter"&&(w.preventDefault(),w.currentTarget.name==="newTaskText"&&o.trim()!==""?(L=(D=document.getElementsByName("newLocation"))==null?void 0:D[0])==null||L.focus():f())},x=(w,D,L)=>{e(O=>O.map(z=>z.id===w?{...z,[D]:L}:z))},b=w=>{e(D=>D.filter(L=>L.id!==w))};return g.jsxs("div",{className:"bg-light-card dark:bg-dark-card p-6 rounded-xl shadow-lg",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(af,{className:"h-6 w-6 text-green-600"}),g.jsx("h2",{className:"text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Atividades Realizadas"})]}),n.length>0&&g.jsxs("button",{onClick:()=>e([]),className:"flex items-center gap-1 text-sm text-red-500 hover:text-red-700 font-semibold transition",children:[g.jsx(ui,{className:"h-4 w-4"}),"Excluir Todas"]})]}),g.jsx("div",{className:"border-b-2 border-light-bg dark:border-dark-border my-3"}),g.jsxs("div",{className:"space-y-3 mb-4",children:[n.length===0&&g.jsx("p",{className:"text-gray-500 dark:text-dark-text-secondary text-center py-4",children:"Nenhuma tarefa adicionada. Use a IA ou adicione manualmente."}),n.map(w=>g.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center group",children:[g.jsx("input",{type:"text",placeholder:"Atividade realizada",value:w.text,onChange:D=>x(w.id,"text",D.target.value),className:"col-span-12 sm:col-span-7 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo transition duration-150 bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600",list:"task-history"}),g.jsx("datalist",{id:"task-history",children:t.map((D,L)=>g.jsx("option",{value:D.text},L))}),g.jsx("input",{type:"text",placeholder:"Local (Ex: Trreo)",value:w.location||"",onChange:D=>x(w.id,"location",D.target.value),className:"col-span-12 sm:col-span-4 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo transition duration-150 bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600"}),g.jsx("div",{className:"col-span-12 sm:col-span-1 flex justify-end",children:g.jsx("button",{onClick:()=>b(w.id),className:"text-gray-400 hover:text-red-500 p-2 opacity-50 group-hover:opacity-100 transition-opacity",children:g.jsx(ui,{className:"h-5 w-5"})})})]},w.id))]}),g.jsxs("div",{className:"grid grid-cols-12 gap-2 pt-4 border-t border-light-bg dark:border-dark-border items-start",children:[g.jsxs("div",{className:"col-span-12 sm:col-span-7",children:[g.jsx("input",{ref:m,type:"text",name:"newTaskText",value:o,onChange:w=>l(w.target.value),onKeyDown:T,placeholder:"Adicionar nova atividade realizada",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo transition bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600",list:"task-history"}),g.jsx("datalist",{id:"task-history",children:t.map((w,D)=>g.jsx("option",{value:w.text},D))})]}),g.jsx("div",{className:"col-span-12 sm:col-span-4",children:g.jsx("input",{type:"text",name:"newLocation",value:u,onChange:w=>d(w.target.value),onKeyDown:T,placeholder:"Local",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo transition bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600"})}),g.jsx("div",{className:"col-span-12 sm:col-span-1 flex justify-end",children:g.jsx("button",{onClick:f,className:"bg-brand-indigo-light hover:bg-indigo-600 text-white font-bold p-2 rounded-xl transition w-full sm:w-auto",children:g.jsx(Da,{className:"h-5 w-5"})})})]})]})},ML=({tasks:n,setTasks:e,taskHistory:t,onAddTask:i})=>{const[o,l]=te.useState(""),u=te.useRef(null),d=()=>{var x,b;if(o.trim()===""){(x=u.current)==null||x.focus();return}i(o),l(""),(b=u.current)==null||b.focus()},m=x=>{x.key==="Enter"&&(x.preventDefault(),d())},f=(x,b,w)=>{e(D=>D.map(L=>L.id===x?{...L,[b]:w}:L))},T=x=>{e(b=>b.filter(w=>w.id!==x))};return g.jsxs("div",{className:"bg-light-card dark:bg-dark-card p-6 rounded-xl shadow-lg",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{className:"flex-col",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(NE,{className:"h-6 w-6 text-red-600"}),g.jsx("h2",{className:"text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Atividades Impossibilitadas"})]}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-dark-text-secondary ml-9",children:"Descreva as tarefas que no puderam ser executadas e o motivo."})]}),n.length>0&&g.jsxs("button",{onClick:()=>e([]),className:"flex-shrink-0 flex items-center gap-1 text-sm text-red-500 hover:text-red-700 font-semibold transition",children:[g.jsx(ui,{className:"h-4 w-4"}),"Excluir Todas"]})]}),g.jsx("div",{className:"border-b-2 border-light-bg dark:border-dark-border my-3"}),g.jsxs("div",{className:"space-y-3 mb-4",children:[n.length===0&&g.jsx("p",{className:"text-gray-500 dark:text-dark-text-secondary text-center py-4",children:"Nenhuma atividade impossibilitada adicionada."}),n.map(x=>g.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center group",children:[g.jsx("input",{type:"text",placeholder:"Atividade impossibilitada",value:x.text,onChange:b=>f(x.id,"text",b.target.value),className:"col-span-12 sm:col-span-6 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo transition duration-150 bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600",list:"impossible-task-history"}),g.jsx("datalist",{id:"impossible-task-history",children:t.map((b,w)=>g.jsx("option",{value:b},w))}),g.jsx("input",{type:"text",placeholder:"Motivo",value:x.reason||"",onChange:b=>f(x.id,"reason",b.target.value),className:"col-span-12 sm:col-span-5 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo transition duration-150 bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600"}),g.jsx("div",{className:"col-span-12 sm:col-span-1 flex justify-end",children:g.jsx("button",{onClick:()=>T(x.id),className:"text-gray-400 hover:text-red-500 p-2 opacity-50 group-hover:opacity-100 transition-opacity",children:g.jsx(ui,{className:"h-5 w-5"})})})]},x.id))]}),g.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-light-bg dark:border-dark-border",children:[g.jsx("input",{ref:u,type:"text",value:o,onChange:x=>l(x.target.value),onKeyDown:m,placeholder:"Adicionar atividade impossibilitada",className:"flex-grow px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo transition bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600",list:"impossible-task-history"}),g.jsx("datalist",{id:"impossible-task-history",children:t.map((x,b)=>g.jsx("option",{value:x},b))}),g.jsx("button",{onClick:d,className:"bg-brand-indigo-light hover:bg-indigo-600 text-white font-bold p-2 rounded-xl transition",children:g.jsx(Da,{className:"h-5 w-5"})})]})]})},DL=({workers:n,setWorkers:e})=>{const[t,i]=te.useState(""),[o,l]=te.useState(1),u=te.useRef(null),d=te.useRef(null),m=()=>{var D,L;if(t.trim()===""||Number(o)<=0){(D=u.current)==null||D.focus();return}const w={id:`worker-${Date.now()}`,role:t.trim(),count:Number(o)};e(O=>[...O,w]),i(""),l(1),(L=u.current)==null||L.focus()},f=w=>{var D;w.key==="Enter"&&(w.preventDefault(),w.currentTarget.name==="newRole"&&t.trim()!==""?(D=d.current)==null||D.focus():m())},T=(w,D,L)=>{e(O=>O.map(z=>z.id===w?{...z,[D]:L}:z))},x=w=>{e(D=>D.filter(L=>L.id!==w))},b=n.reduce((w,D)=>w+Number(D.count),0);return g.jsxs("div",{className:"bg-light-card dark:bg-dark-card p-6 rounded-xl shadow-lg",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(Pd,{className:"h-6 w-6 text-brand-indigo"}),g.jsx("h2",{className:"text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Colaboradores"})]}),g.jsxs("div",{className:"flex items-center gap-4",children:[n.length>0&&g.jsxs("button",{onClick:()=>e([]),className:"flex items-center gap-1 text-sm text-red-500 hover:text-red-700 font-semibold transition",children:[g.jsx(ui,{className:"h-4 w-4"}),"Excluir Todos"]}),g.jsxs("div",{className:"flex items-center gap-2 text-light-text-primary dark:text-dark-text-primary font-semibold bg-blue-100 dark:bg-blue-900/50 rounded-full px-3 py-1 text-sm",children:[g.jsx(Pd,{className:"h-5 w-5"}),g.jsxs("span",{children:["Total: ",b]})]})]})]}),g.jsx("div",{className:"border-b-2 border-light-bg dark:border-dark-border my-3"}),g.jsxs("div",{className:"space-y-3 mb-4",children:[n.length===0&&g.jsx("p",{className:"text-gray-500 dark:text-dark-text-secondary text-center py-4",children:"Nenhum colaborador adicionado."}),n.map(w=>g.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center group",children:[g.jsx("input",{type:"text",placeholder:"Funo",value:w.role,onChange:D=>T(w.id,"role",D.target.value),className:"col-span-7 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo transition bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600"}),g.jsx("input",{type:"number",min:"0",value:w.count,onChange:D=>T(w.id,"count",Number(D.target.value)),className:"col-span-3 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo transition bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600"}),g.jsx("div",{className:"col-span-2 flex justify-end",children:g.jsx("button",{onClick:()=>x(w.id),className:"text-gray-400 hover:text-red-500 p-2 opacity-50 group-hover:opacity-100 transition-opacity",children:g.jsx(ui,{className:"h-5 w-5"})})})]},w.id))]}),g.jsxs("div",{className:"grid grid-cols-12 gap-2 pt-4 border-t border-light-bg dark:border-dark-border items-center",children:[g.jsx("input",{ref:u,type:"text",name:"newRole",placeholder:"Nova Funo",value:t,onChange:w=>i(w.target.value),onKeyDown:f,className:"col-span-7 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo transition bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600"}),g.jsx("input",{ref:d,type:"number",name:"newCount",min:"1",value:o,onChange:w=>l(w.target.value),onKeyDown:f,className:"col-span-3 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo transition bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600"}),g.jsx("div",{className:"col-span-2 flex justify-end",children:g.jsx("button",{onClick:m,className:"bg-brand-indigo-light hover:bg-indigo-600 text-white font-bold p-2 rounded-xl transition",children:g.jsx(Da,{className:"h-5 w-5"})})})]})]})},PL=({observations:n,onChange:e})=>g.jsxs("div",{className:"bg-light-card dark:bg-dark-card p-6 rounded-xl shadow-lg",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(Jp,{className:"h-6 w-6 text-brand-indigo"}),g.jsx("h2",{className:"text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Observaes"})]}),g.jsx("div",{className:"border-b-2 border-light-bg dark:border-dark-border my-3"}),g.jsx("textarea",{name:"observations",value:n||"",onChange:e,placeholder:"Adicione notas, observaes ou ocorrncias relevantes do dia...",rows:5,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo transition bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600"})]}),ua=({title:n,icon:e,children:t,className:i=""})=>g.jsxs("div",{className:`mt-6 ${i}`,children:[g.jsxs("div",{className:"flex items-center gap-3 border-b-2 border-gray-200 pb-2 mb-3",children:[e,g.jsx("h3",{className:"text-base font-bold text-brand-blue uppercase tracking-wider",children:n})]}),t]}),cr=({label:n,value:e})=>g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-gray-500 font-semibold",children:n}),g.jsx("p",{className:"text-sm text-gray-800",children:e})]}),zp=({project:n,logData:e,tasks:t,impossibleTasks:i,workers:o,images:l,constructor:u,elapsedDays:d,platformSettings:m})=>{const f=o.reduce((x,b)=>x+Number(b.count),0),T=()=>{if(n!=null&&n.endDate){const x=new Date(n.endDate+"T00:00:00"),b=new Date(e.date+"T00:00:00");if(x>=b){const w=x.getTime()-b.getTime();return`(Faltam ${Math.ceil(w/(1e3*60*60*24))} dias)`}else{const w=b.getTime()-x.getTime(),D=Math.ceil(w/(1e3*60*60*24));return g.jsxs("span",{className:"text-red-600 font-bold",children:["(",D," dia",D>1?"s":""," atrasado)"]})}}return""};return g.jsxs("div",{className:"bg-white text-gray-800 p-8 font-sans text-sm",children:[g.jsxs("header",{className:"flex justify-between items-start pb-4 mb-4 border-b-2 border-gray-300",children:[g.jsxs("div",{className:"text-left",children:[(m==null?void 0:m.logo)&&g.jsx(sf,{logoSrc:m.logo,className:"h-10 w-auto mb-2"}),g.jsx("h1",{className:"text-xl font-bold text-gray-800",children:(m==null?void 0:m.name)||"Dirio de Obra"}),g.jsx("p",{className:"text-gray-500",children:"Relatrio Dirio de Obra"})]}),g.jsxs("div",{className:"flex items-start gap-4",children:[(u==null?void 0:u.logo)&&g.jsx("img",{src:u.logo,alt:"Logo da Construtora",className:"h-16 max-w-[150px] object-contain"}),(n==null?void 0:n.logo)&&g.jsx("img",{src:n.logo,alt:"Logo da Obra",className:"h-16 max-w-[150px] object-contain"})]})]}),g.jsx(ua,{title:"Informaes Gerais",icon:g.jsx(wE,{className:"h-5 w-5 text-brand-blue"}),children:g.jsxs("div",{className:"grid grid-cols-3 gap-x-6 gap-y-4",children:[g.jsx(cr,{label:"Obra",value:e.projectName}),g.jsx(cr,{label:"Construtora",value:(u==null?void 0:u.name)||"N/A"}),g.jsx(cr,{label:"Data",value:new Date(e.date+"T00:00:00").toLocaleDateString("pt-BR")}),g.jsx(cr,{label:"Eng. Responsvel",value:e.engineer}),g.jsx(cr,{label:"Resp. Preenchimento",value:e.responsible}),g.jsx(cr,{label:"Dias Corridos",value:g.jsxs(g.Fragment,{children:[d?`${d} dia`:"N/A"," ",g.jsx("span",{className:"text-xs",children:T()})]})}),g.jsx(cr,{label:"Horrio de Trabalho",value:e.workHours||"N/A"}),g.jsx(cr,{label:"Condies do Tempo",value:e.weather}),g.jsx(cr,{label:"Temperatura",value:`Mn: ${e.tempMin||"N/A"} / Mx: ${e.tempMax||"N/A"}`})]})}),g.jsx(ua,{title:`Colaboradores (Total: ${f})`,icon:g.jsx(Pd,{className:"h-5 w-5 text-brand-blue"}),children:o.length>0?g.jsx("ul",{className:"list-disc list-inside space-y-1 columns-2",children:o.map(x=>g.jsxs("li",{children:[x.count,"x ",x.role]},x.id))}):g.jsx("p",{className:"text-gray-500 italic",children:"Nenhum colaborador registrado."})}),g.jsx(ua,{title:"Atividades Realizadas",icon:g.jsx(af,{className:"h-5 w-5 text-brand-blue"}),children:t.length>0?g.jsxs("table",{className:"w-full text-left",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"border-b border-gray-200",children:[g.jsx("th",{className:"pb-1 font-semibold text-black",children:"Descrio"}),g.jsx("th",{className:"pb-1 font-semibold w-1/4 text-black",children:"Local"})]})}),g.jsx("tbody",{children:t.map(x=>g.jsxs("tr",{className:"border-b border-gray-100",children:[g.jsx("td",{className:"py-1 text-black",children:x.text}),g.jsx("td",{className:"py-1 text-black",children:x.location||""})]},x.id))})]}):g.jsx("p",{className:"text-gray-500 italic",children:"Nenhuma atividade realizada registrada."})}),i.length>0&&g.jsx(ua,{title:"Atividades Impossibilitadas",icon:g.jsx(NE,{className:"h-5 w-5 text-brand-blue"}),children:g.jsxs("table",{className:"w-full text-left",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"border-b border-gray-200",children:[g.jsx("th",{className:"pb-1 font-semibold text-black",children:"Descrio"}),g.jsx("th",{className:"pb-1 font-semibold w-1/4 text-black",children:"Motivo"})]})}),g.jsx("tbody",{children:i.map(x=>g.jsxs("tr",{className:"border-b border-gray-100",children:[g.jsx("td",{className:"py-1 text-black",children:x.text}),g.jsx("td",{className:"py-1 text-black",children:x.reason||""})]},x.id))})]})}),e.observations&&g.jsx(ua,{title:"Observaes",icon:g.jsx(Jp,{className:"h-5 w-5 text-brand-blue"}),children:g.jsx("p",{className:"whitespace-pre-wrap bg-gray-50 p-3 rounded-md",children:e.observations})}),l.length>0&&g.jsx(ua,{title:"Relatrio Fotogrfico",icon:g.jsx(sp,{className:"h-5 w-5 text-brand-blue"}),className:"print-page-break",children:g.jsx("div",{className:"grid grid-cols-2 gap-4",children:l.map(x=>g.jsx("div",{className:"border border-gray-200 p-1 rounded-md",children:g.jsx("img",{src:x.dataUrl,alt:"Foto da obra",className:"w-full h-auto"})},x.id))})})]})},VL=({isOpen:n,onClose:e,...t})=>{if(!n)return null;const i=()=>{window.print()};return g.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex justify-center items-center p-4 print:hidden",children:[g.jsxs("div",{className:"bg-gray-200 dark:bg-dark-border rounded-xl shadow-xl w-full max-w-4xl h-[95vh] flex flex-col",children:[g.jsxs("div",{className:"p-4 bg-light-card dark:bg-dark-card rounded-t-xl flex justify-between items-center border-b dark:border-dark-border",children:[g.jsx("h2",{className:"text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Pr-visualizao de Impresso"}),g.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-3xl leading-none",children:""})]}),g.jsx("div",{className:"flex-grow overflow-auto p-8 bg-gray-500 dark:bg-dark-bg",children:g.jsx("div",{id:"printable-area",className:"w-[210mm] min-h-[297mm] mx-auto bg-white shadow-2xl origin-top",children:g.jsx(zp,{...t})})}),g.jsxs("div",{className:"p-4 bg-light-card dark:bg-dark-card rounded-b-xl flex justify-end gap-4 border-t dark:border-dark-border",children:[g.jsx("button",{onClick:e,className:"bg-gray-200 dark:bg-dark-border hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-dark-text-primary font-bold py-2 px-4 rounded-xl",children:"Fechar"}),g.jsxs("button",{onClick:i,className:"flex items-center gap-2 bg-brand-indigo hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-xl transition",children:[g.jsx(Pa,{className:"h-5 w-5"}),"Imprimir"]})]})]}),g.jsx("div",{className:"hidden print:block",children:g.jsx(zp,{...t})})]})},LL=({status:n})=>{switch(n){case"editing":return g.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-dark-text-secondary",children:[g.jsx(hu,{className:"h-4 w-4"}),g.jsx("span",{children:"Editando..."})]});case"saving":return g.jsxs("div",{className:"flex items-center gap-2 text-sm text-brand-indigo font-semibold",children:[g.jsx(Gi,{className:"h-4 w-4 animate-spin"}),g.jsx("span",{children:"Salvando..."})]});case"saved":return g.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400 font-semibold",children:[g.jsx(Yp,{className:"h-4 w-4"}),g.jsx("span",{children:"Salvo"})]});default:return g.jsx("div",{className:"h-5"})}},UL=({project:n,date:e,currentUser:t,constructors:i,platformSettings:o,onBackToCalendar:l,onNextDay:u,onPrevDay:d})=>{const[m,f]=te.useState(null),[T,x]=te.useState([]),[b,w]=te.useState([]),[D,L]=te.useState([]),[O,z]=te.useState([]),[G,j]=te.useState([]),[ee,le]=te.useState(!0),[ie,N]=te.useState([]),[R,k]=te.useState([]),[P,V]=te.useState(!1),[U,M]=te.useState(!1),[ce,Ve]=te.useState(!1),[Q,ue]=te.useState("idle"),de=te.useRef(!0);te.useEffect(()=>{(async()=>{le(!0);let Ze=!1;const ct=await cD(n.id,e);if(ct)f(ct.logData),x(ct.tasks||[]),w(ct.impossibleTasks||[]),L(ct.workers||[]),z(ct.images||[]);else{const Dn=await fD(n.id,e);Dn?(f({...Dn.logData,date:e,projectName:n.name,responsible:t.name}),x(Dn.tasks||[]),w(Dn.impossibleTasks||[]),L(Dn.workers||[]),z([]),Ze=!0):(f({projectName:n.name,engineer:n.technicalManager||"",responsible:t.name,date:e,weather:"Ensolarado",workHours:"7:00h as 12:00h e 13:00h as 17:00h",tempMin:"18",tempMax:"27"}),x([]),w([]),L([]),z([]))}const Mn=await hD(n.id);j(Mn),Ve(Ze),le(!1),de.current=!0})()},[n.id,e,n.name,n.technicalManager,t.name]);const Se=te.useMemo(()=>i.find(Ee=>Ee.id===n.constructorId),[i,n.constructorId]),Le=te.useMemo(()=>{if(!n.startDate)return null;const Ee=new Date(n.startDate+"T00:00:00"),Ze=new Date(e+"T00:00:00");if(Ze<Ee)return 0;const ct=Math.abs(Ze.getTime()-Ee.getTime());return Math.ceil(ct/(1e3*60*60*24))+1},[n.startDate,e]);te.useEffect(()=>{if(de.current||ee||!m){ee||(de.current=!1);return}ue("editing");const Ee=setTimeout(()=>{ue("saving");const Ze={logData:m,tasks:T,impossibleTasks:b,workers:D,images:O,constructor:Se,elapsedDays:Le,platformSettings:o};dD(n.id,e,Ze).then(()=>{setTimeout(()=>{ue("saved")},500)}),ce&&Ve(!1)},1500);return()=>{clearTimeout(Ee)}},[m,T,b,D,O,n.id,e,o,ee,ce,Se,Le]);const B=Ee=>{m&&f(Ze=>({...Ze,[Ee.target.name]:Ee.target.value}))},se=te.useCallback(async()=>{if(O.length!==0){V(!0),N([]),k([]);try{const Ee=G.map(ct=>ct.text),Ze=await aL(O,Ee);k(Ze)}catch(Ee){console.error("Error generating tasks:",Ee),alert(`Ocorreu um erro ao analisar as imagens. Verifique o console para mais detalhes. Error: ${Ee instanceof Error?Ee.message:"Unknown error"}`)}finally{V(!1)}}},[O,G]),he=()=>{N(R)},pe=Ee=>{Ue(Ee.suggestion,""),N(Ze=>Ze.filter(ct=>ct.id!==Ee.id))},Ce=(Ee,Ze)=>{N(ct=>ct.map(Mn=>Mn.id===Ee?{...Mn,suggestion:Ze}:Mn))},ke=Ee=>{N(Ze=>Ze.filter(ct=>ct.id!==Ee))},Ue=(Ee,Ze)=>{x(ct=>[...ct,{id:`task-${Date.now()}`,text:Ee,location:Ze}])},Tt=Ee=>{w(Ze=>[...Ze,{id:`imp-task-${Date.now()}`,text:Ee}])};return ee||!m?g.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:g.jsx(Gi,{className:"h-12 w-12 text-brand-indigo"})}):g.jsxs("div",{className:"relative",children:[ce&&g.jsxs("div",{className:"bg-blue-100 dark:bg-blue-900/50 border-l-4 border-blue-500 text-blue-700 dark:text-blue-300 p-4 rounded-md mb-6 flex justify-between items-center transition-all duration-300",children:[g.jsxs("p",{children:[g.jsx("span",{className:"font-bold",children:"Informao:"})," Os dados foram preenchidos com base no ltimo relatrio. Verifique e ajuste as informaes para o dia de hoje."]}),g.jsx("button",{onClick:()=>Ve(!1),className:"text-blue-700 dark:text-blue-300 font-bold text-2xl leading-none px-2 -mr-2",children:""})]}),g.jsxs("div",{className:"space-y-6 pb-24",children:[g.jsx(IL,{logData:m,onChange:B,constructor:Se,elapsedDays:Le,project:n}),g.jsx(RL,{images:O,setImages:z,isLoading:P,analysisResults:ie,hiddenResultsCount:R.length,onShowResults:he,onAcceptSuggestion:pe,onUpdateSuggestion:Ce,onDiscardSuggestion:ke,onAnalyzeImages:se}),g.jsx(kL,{tasks:T,setTasks:x,taskHistory:G,onAddTask:Ue}),g.jsx(ML,{tasks:b,setTasks:w,taskHistory:[],onAddTask:Tt}),g.jsx(DL,{workers:D,setWorkers:L}),g.jsx(PL,{observations:m.observations||"",onChange:B})]}),g.jsx("div",{className:"sticky bottom-0 left-0 right-0 z-30 bg-white/90 dark:bg-dark-card/90 backdrop-blur-sm p-3 border-t border-gray-200 dark:border-dark-border shadow-[0_-4px_10px_-5px_rgba(0,0,0,0.1)] print:hidden",children:g.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[g.jsxs("button",{onClick:l,className:"flex items-center gap-2 bg-gray-200 dark:bg-dark-border hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-dark-text-secondary font-bold py-2 px-4 rounded-xl transition",children:[g.jsx(DC,{className:"h-5 w-5"}),"Calendrio"]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:d,className:"p-2 bg-brand-indigo text-white rounded-full shadow-md hover:bg-indigo-700 transition",children:g.jsx(CE,{className:"h-6 w-6"})}),g.jsx("span",{className:"font-bold text-lg text-light-text-primary dark:text-dark-text-primary text-center w-auto md:w-96 hidden md:block",children:new Date(e+"T00:00:00").toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),g.jsx("span",{className:"font-bold text-lg text-light-text-primary dark:text-dark-text-primary text-center w-auto md:w-96 md:hidden",children:new Date(e+"T00:00:00").toLocaleDateString("pt-BR",{year:"numeric",month:"numeric",day:"numeric"})}),g.jsx("button",{onClick:u,className:"p-2 bg-brand-indigo text-white rounded-full shadow-md hover:bg-indigo-700 transition",children:g.jsx(IE,{className:"h-6 w-6"})})]}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx(LL,{status:Q}),g.jsxs("button",{onClick:()=>M(!0),className:"flex items-center gap-2 bg-brand-indigo hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-xl transition",children:[g.jsx(Pa,{className:"h-5 w-5"}),g.jsx("span",{className:"hidden sm:inline",children:"Imprimir / PDF"})]})]})]})}),g.jsx(VL,{isOpen:U,onClose:()=>M(!1),project:n,logData:m,tasks:T,impossibleTasks:b,workers:D,images:O,constructor:Se,elapsedDays:Le,platformSettings:o})]})},EE=n=>n.toISOString().split("T")[0],OL=({project:n,onSelectDate:e,onPrintSelected:t})=>{const[i,o]=te.useState(new Date),[l,u]=te.useState(new Set),[d,m]=te.useState(!1),[f,T]=te.useState("days"),x=te.useMemo(()=>{const ie=new Set;for(let N=0;N<localStorage.length;N++){const R=localStorage.key(N);if(R&&R.startsWith(`logData-${n.id}-`)&&R.endsWith("-info")){const k=R.substring(n.id.length+9,R.length-5);ie.add(k)}}return ie},[n.id,i]),b=ie=>{const N=EE(ie);d?x.has(N)&&u(R=>{const k=new Set(R);return k.has(N)?k.delete(N):k.add(N),k}):e(N)},w=()=>{m(!d),u(new Set)},D=()=>{if(l.size===0){alert("Por favor, selecione pelo menos um dia para imprimir.");return}t(Array.from(l).sort()),m(!1),u(new Set)},L=ie=>{o(N=>{const R=new Date(N);return f==="days"&&R.setMonth(R.getMonth()+ie),f==="months"&&R.setFullYear(R.getFullYear()+ie),f==="years"&&R.setFullYear(R.getFullYear()+ie*10),R})},O=te.useMemo(()=>Math.floor(i.getFullYear()/10)*10,[i]),z=()=>{let ie;switch(f){case"years":ie=`${O} - ${O+9}`;break;case"months":ie=g.jsx("button",{onClick:()=>T("years"),className:"hover:text-brand-indigo-light transition",children:i.getFullYear()});break;case"days":default:ie=g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:()=>T("months"),className:"hover:text-brand-indigo-light transition capitalize",children:i.toLocaleString("pt-BR",{month:"long"})}),g.jsx("button",{onClick:()=>T("years"),className:"hover:text-brand-indigo-light transition",children:i.getFullYear()})]})}return g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("button",{onClick:()=>L(-1),className:"p-2 bg-brand-indigo text-white rounded-full hover:bg-indigo-700 transition print:hidden",children:g.jsx(CE,{className:"h-6 w-6"})}),g.jsx("div",{className:"text-2xl font-bold text-light-text-primary dark:text-dark-text-primary text-center w-48 flex justify-center gap-2",children:ie}),g.jsx("button",{onClick:()=>L(1),className:"p-2 bg-brand-indigo text-white rounded-full hover:bg-indigo-700 transition print:hidden",children:g.jsx(IE,{className:"h-6 w-6"})})]})},G=()=>{const ie=i.getFullYear(),N=i.getMonth(),R=new Date(ie,N,1).getDay(),k=new Date(ie,N+1,0).getDate(),P=[];for(let M=0;M<R;M++)P.push(g.jsx("div",{className:"border-r border-b border-gray-200 dark:border-dark-border"},`empty-start-${M}`));for(let M=1;M<=k;M++){const ce=new Date(ie,N,M),Ve=EE(ce),Q=x.has(Ve),ue=l.has(Ve);let de=`border-r border-b border-gray-200 dark:border-dark-border p-2 min-h-[120px] transition-colors duration-200 flex flex-col relative ${d&&!Q?"bg-gray-50 dark:bg-gray-800":"cursor-pointer"}`;ue?de+=" !bg-blue-500 ring-2 ring-blue-700 !text-white print:!bg-transparent print:!text-black print:ring-1 print:ring-black":Q?(de+=" bg-green-200 dark:bg-green-800/50 text-light-text-primary dark:text-dark-text-primary print:bg-gray-100",de+=d?" hover:bg-green-300 dark:hover:bg-green-700":" hover:bg-green-100 dark:hover:bg-green-900/50"):de+=" bg-gray-50 dark:bg-dark-card hover:bg-gray-100 dark:hover:bg-gray-700 text-light-text-secondary dark:text-dark-text-secondary",P.push(g.jsxs("div",{className:de,onClick:()=>b(ce),children:[g.jsx("div",{className:"font-bold text-lg",children:M}),g.jsxs("div",{className:"flex-grow mt-2 flex items-end",children:[Q&&!ue&&g.jsx(Yp,{className:"h-5 w-5 text-green-600 dark:text-green-400 absolute bottom-2 right-2"}),ue&&g.jsx("span",{className:"text-xs font-semibold bg-white/30 px-2 py-1 rounded-full mt-1 inline-block print:bg-transparent print:text-black print:border print:border-gray-400",children:"Selecionado"})]})]},M))}const U=(7-P.length%7)%7;for(let M=0;M<U;M++)P.push(g.jsx("div",{className:"border-r border-b border-gray-200 dark:border-dark-border"},`empty-end-${M}`));return P},j=()=>{const ie=Array.from({length:12},(N,R)=>new Date(i.getFullYear(),R).toLocaleString("pt-BR",{month:"short"}));return g.jsx("div",{className:"grid grid-cols-4 gap-2 p-4",children:ie.map((N,R)=>g.jsx("button",{onClick:()=>{o(new Date(i.getFullYear(),R)),T("days")},className:"p-4 rounded-xl text-center font-semibold text-gray-700 dark:text-dark-text-secondary hover:bg-brand-indigo hover:text-white transition",children:N.replace(".","")},N))})},ee=()=>{const ie=Array.from({length:12},(N,R)=>O+R-1);return g.jsx("div",{className:"grid grid-cols-4 gap-2 p-4",children:ie.map(N=>g.jsx("button",{onClick:()=>{o(new Date(N,i.getMonth())),T("months")},className:`p-4 rounded-xl text-center font-semibold text-gray-700 dark:text-dark-text-secondary hover:bg-brand-indigo hover:text-white transition ${N<O||N>O+9?"text-gray-400":""}`,children:N},N))})},le=["Dom","Seg","Ter","Qua","Qui","Sex","Sb"];return g.jsxs("div",{className:"bg-light-card dark:bg-dark-card p-6 rounded-xl shadow-lg",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4",children:[z(),g.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 sm:mt-0",children:[g.jsxs("button",{onClick:w,className:`flex items-center gap-2 font-bold py-2 px-4 rounded-xl transition text-sm print:hidden ${d?"bg-red-500 hover:bg-red-600 text-white":"bg-brand-indigo hover:bg-indigo-700 text-white"}`,children:[g.jsx(Pa,{className:"h-5 w-5"}),d?"Cancelar Seleo":"Imprimir em Massa"]}),d&&g.jsxs("button",{onClick:D,disabled:l.size===0,className:"flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-xl transition text-sm disabled:bg-gray-400 disabled:cursor-not-allowed print:hidden",children:["Imprimir (",l.size,")"]})]})]}),d&&g.jsxs("div",{className:"bg-blue-100 dark:bg-blue-900/50 border-l-4 border-blue-500 text-blue-700 dark:text-blue-300 p-4 rounded-md mb-4 print:hidden",children:[g.jsx("p",{className:"font-bold",children:"Modo de Seleo Ativado"}),g.jsxs("p",{children:['Clique nos dias com relatrios preenchidos (em verde) que deseja imprimir. Quando terminar, clique no boto "Imprimir (',l.size,')".']})]}),f==="days"&&g.jsxs("div",{className:"grid grid-cols-7 border-t border-l border-gray-200 dark:border-dark-border",children:[le.map(ie=>g.jsx("div",{className:"text-center font-semibold p-2 border-r border-b border-gray-200 dark:border-dark-border bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-dark-text-secondary",children:ie},ie)),G()]}),f==="months"&&j(),f==="years"&&ee()]})},qL=({project:n,dates:e,constructors:t,platformSettings:i})=>{const o=te.useMemo(()=>{const u=[];for(const d of e)try{const m=`logData-${n.id}-${d}`,f=localStorage.getItem(`${m}-info`);if(!f)continue;const T=JSON.parse(f),x=JSON.parse(localStorage.getItem(`${m}-tasks`)||"[]"),b=JSON.parse(localStorage.getItem(`${m}-impossible`)||"[]"),w=JSON.parse(localStorage.getItem(`${m}-workers`)||"[]"),D=JSON.parse(localStorage.getItem(`${m}-images`)||"[]"),L=t.find(z=>z.id===n.constructorId),O=n.startDate?(()=>{const z=new Date(n.startDate+"T00:00:00"),G=new Date(d+"T00:00:00");if(G<z)return 0;const j=Math.abs(G.getTime()-z.getTime());return Math.ceil(j/(1e3*60*60*24))+1})():null;u.push({logData:T,tasks:x,impossibleTasks:b,workers:w,constructor:L,elapsedDays:O,images:D,platformSettings:i,project:n})}catch(m){console.error(`Failed to parse log for date ${d}:`,m)}return u.sort((d,m)=>new Date(d.logData.date).getTime()-new Date(m.logData.date).getTime())},[n,e,t,i]),l=()=>{window.print()};return g.jsxs("div",{children:[g.jsxs("div",{className:"bg-light-card dark:bg-dark-card p-6 rounded-xl shadow-lg print:hidden mb-8",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-4",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-2xl font-bold text-light-text-primary dark:text-dark-text-primary",children:["Impresso em Massa - ",n.name]}),g.jsxs("p",{className:"text-lg text-gray-600 dark:text-dark-text-secondary",children:["Imprimindo ",o.length," relatrio(s) selecionado(s)."]})]}),g.jsxs("button",{onClick:l,className:"flex items-center gap-2 bg-brand-indigo hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg transition w-full sm:w-auto",children:[g.jsx(Pa,{className:"h-5 w-5"}),"Imprimir Relatrios"]})]}),o.length>0&&g.jsx("div",{className:"prose dark:prose-invert max-w-none text-gray-700 dark:text-dark-text-secondary",children:g.jsx("p",{children:'Abaixo est a pr-visualizao dos relatrios. Role para baixo para ver todos. Quando estiver pronto, clique em "Imprimir Relatrios".'})})]}),o.length===0?g.jsx("p",{className:"text-center text-gray-500 dark:text-dark-text-secondary py-10 print:hidden",children:"Nenhum relatrio vlido encontrado para as datas selecionadas."}):g.jsx("div",{className:"bg-gray-400 dark:bg-dark-bg p-4 sm:p-8 print:p-0 print:bg-transparent",children:o.map((u,d)=>g.jsx("div",{className:"w-[210mm] min-h-[297mm] mx-auto bg-white shadow-2xl mb-8 print:shadow-none print:mb-0 print-page-break",children:g.jsx(zp,{...u})},d))})]})},BL=({project:n,currentUser:e,constructors:t,platformSettings:i})=>{const[o,l]=te.useState("calendar"),[u,d]=te.useState(null),[m,f]=te.useState([]),T=O=>{d(O),l("log")},x=()=>{if(u){const O=new Date(u+"T00:00:00");O.setDate(O.getDate()+1),d(O.toISOString().split("T")[0])}},b=()=>{if(u){const O=new Date(u+"T00:00:00");O.setDate(O.getDate()-1),d(O.toISOString().split("T")[0])}},w=O=>{f(O),l("bulkPrint")},D=()=>{l("calendar"),d(null),f([])},L=()=>g.jsxs("button",{onClick:D,className:"flex items-center gap-2 mb-4 text-brand-blue font-semibold hover:underline print:hidden",children:[g.jsx(VC,{className:"h-5 w-5"}),"Voltar para o Calendrio"]});return o==="calendar"?g.jsx(OL,{project:n,onSelectDate:T,onPrintSelected:w}):o==="bulkPrint"?g.jsxs("div",{children:[g.jsx(L,{}),g.jsx(qL,{project:n,dates:m,constructors:t,platformSettings:i})]}):o==="log"&&u?g.jsx(UL,{project:n,date:u,currentUser:e,constructors:t,onBackToCalendar:D,onNextDay:x,onPrevDay:b,platformSettings:i},u):null},FL=n=>{switch(n.accessLevel){case"full":return g.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Acesso Completo"});case"trial":const e=n.trialEndsAt?Math.ceil((n.trialEndsAt-Date.now())/(1e3*60*60*24)):0;return e>0?g.jsxs("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:["Teste (",e," dias restantes)"]}):g.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Teste Expirado"});case"none":return g.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:"Acesso Revogado"});default:return null}},zL=({user:n,onClose:e,onSave:t})=>{const[i,o]=te.useState(n.kiwifyPaymentUrl||""),l=()=>{t(n.id,i),e()};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:g.jsx("div",{className:"bg-light-card dark:bg-dark-card rounded-xl shadow-xl w-full max-w-lg",children:g.jsxs("div",{className:"p-6",children:[g.jsx("h3",{className:"text-lg font-bold mb-2",children:"Link de Pagamento Kiwify"}),g.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:["Insira o link de pagamento para o usurio: ",g.jsx("strong",{children:n.name})]}),g.jsx("input",{type:"url",value:i,onChange:u=>o(u.target.value),placeholder:"https://...link_do_produto_kiwify...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo bg-blue-50 dark:bg-gray-700"}),g.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[g.jsx("button",{onClick:e,className:"bg-gray-200 dark:bg-dark-border font-bold py-2 px-4 rounded-xl",children:"Cancelar"}),g.jsx("button",{onClick:l,className:"bg-brand-indigo text-white font-bold py-2 px-4 rounded-xl",children:"Salvar Link"})]})]})})})},GL=({allUsers:n,platformSettings:e,onSavePlatformSettings:t,saveAllUsers:i})=>{const[o,l]=te.useState(e),[u,d]=te.useState(null),m=te.useRef(null),f=D=>{l(L=>({...L,[D.target.name]:D.target.value}))},T=D=>{var O;const L=(O=D.target.files)==null?void 0:O[0];if(L){const z=new FileReader;z.onloadend=()=>{l(G=>({...G,logo:z.result}))},z.readAsDataURL(L)}},x=async()=>{await t(o),alert("Configuraes da plataforma salvas com sucesso!")},b=(D,L)=>{const O=n.map(z=>z.id===D?{...z,kiwifyPaymentUrl:L}:z);i(O)},w=(D,L)=>{const O=n.map(z=>{if(z.id===D){const G={...z,accessLevel:L};return L==="trial"&&(G.trialEndsAt=Date.now()+6048e5),G}return z});i(O)};return g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{className:"bg-light-card dark:bg-dark-card p-6 rounded-xl shadow-lg",children:[g.jsx("h2",{className:"text-2xl font-bold text-light-text-primary dark:text-dark-text-primary mb-4",children:"Gerenciamento de Usurios e Assinaturas"}),g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[g.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:g.jsxs("tr",{children:[g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nome"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"E-mail"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Aes"})]})}),g.jsx("tbody",{className:"bg-light-card dark:bg-dark-card divide-y divide-gray-200 dark:divide-gray-700",children:n.filter(D=>D.role!=="admin").map(D=>g.jsxs("tr",{children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-dark-text-primary",children:D.name}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-dark-text-secondary",children:D.email}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-dark-text-secondary",children:FL(D)}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>d(D),className:"text-blue-600 hover:text-blue-900 dark:hover:text-blue-400",children:"Link de Pagamento"}),g.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"|"}),g.jsx("button",{onClick:()=>w(D.id,"full"),className:"text-green-600 hover:text-green-900 dark:hover:text-green-400",children:"Conceder Acesso"}),g.jsx("button",{onClick:()=>w(D.id,"trial"),className:"text-yellow-600 hover:text-yellow-900 dark:hover:text-yellow-400",children:"Iniciar Teste"}),g.jsx("button",{onClick:()=>w(D.id,"none"),className:"text-red-600 hover:text-red-900 dark:hover:text-red-400",children:"Revogar Acesso"})]})})]},D.id))})]})})]}),g.jsxs("div",{className:"bg-light-card dark:bg-dark-card p-6 rounded-xl shadow-lg",children:[g.jsx("h2",{className:"text-2xl font-bold text-light-text-primary dark:text-dark-text-primary mb-4",children:"Configuraes da Plataforma"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:"Nome da Plataforma"}),g.jsx("input",{type:"text",id:"name",name:"name",value:o.name,onChange:f,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:"Logo da Plataforma"}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"h-16 w-16 rounded-md bg-gray-100 dark:bg-gray-700 flex items-center justify-center overflow-hidden",children:o.logo?g.jsx("img",{src:o.logo,alt:"logo preview",className:"h-full w-full object-contain"}):g.jsx("span",{className:"text-xs text-gray-500",children:"Preview"})}),g.jsx("input",{type:"file",accept:"image/*",ref:m,onChange:T,className:"hidden"}),g.jsxs("div",{children:[g.jsxs("button",{type:"button",onClick:()=>{var D;return(D=m.current)==null?void 0:D.click()},className:"flex items-center gap-2 bg-gray-200 dark:bg-dark-border hover:bg-gray-300 dark:hover:bg-gray-600 text-light-text-secondary dark:text-dark-text-secondary font-semibold py-2 px-4 rounded-xl transition",children:[g.jsx(of,{className:"h-5 w-5"}),"Carregar Logo"]}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Sugesto: 300 x 300 px"})]})]})]})]}),g.jsxs("div",{className:"mt-6 pt-6 border-t dark:border-dark-border",children:[g.jsx("h3",{className:"text-xl font-bold text-light-text-primary dark:text-dark-text-primary mb-4",children:"Textos Legais (LGPD)"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"termsOfService",className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:"Termos de Uso"}),g.jsx("textarea",{id:"termsOfService",name:"termsOfService",value:o.termsOfService||"",onChange:f,rows:8,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"privacyPolicy",className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:"Poltica de Privacidade"}),g.jsx("textarea",{id:"privacyPolicy",name:"privacyPolicy",value:o.privacyPolicy||"",onChange:f,rows:8,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600"})]})]})]}),g.jsx("div",{className:"mt-6 text-right",children:g.jsx("button",{onClick:x,className:"bg-brand-indigo hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-xl",children:"Salvar Configuraes"})})]}),u&&g.jsx(zL,{user:u,onClose:()=>d(null),onSave:b})]})},HL=({isOpen:n,onClose:e,currentUser:t,onSave:i,onDeleteAccount:o})=>{const[l,u]=te.useState({name:t.name,email:t.email,whatsapp:t.whatsapp||""}),[d,m]=te.useState(""),[f,T]=te.useState(""),[x,b]=te.useState(!1);if(te.useEffect(()=>{n&&(u({name:t.name,email:t.email,whatsapp:t.whatsapp||""}),m(""),T(""))},[n,t]),!n)return null;const w=O=>{u(z=>({...z,[O.target.name]:O.target.value}))},D=async O=>{O.preventDefault(),b(!0);try{const G=(await Pf(t)).map(j=>{if(j.id===t.id){const ee={...j,...l};return d&&(ee.password=d),ee}return j});await i(G),alert("Perfil atualizado com sucesso!"),e()}catch{alert("Erro ao salvar o perfil.")}finally{b(!1)}},L=()=>{f.toLowerCase()==="excluir"?window.confirm("Tem certeza? Esta ao  irreversvel e todos os seus dados sero permanentemente apagados.")&&(o(),e()):alert('Por favor, digite "excluir" para confirmar.')};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:g.jsxs("div",{className:"bg-light-card dark:bg-dark-card rounded-xl shadow-xl w-full max-w-lg",children:[g.jsxs("form",{onSubmit:D,className:"p-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h2",{className:"text-2xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Meu Perfil"}),g.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-3xl leading-none",children:""})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx(xd,{label:"Nome Completo",name:"name",value:l.name,onChange:w}),g.jsx(xd,{label:"E-mail",name:"email",value:l.email,onChange:w,disabled:!0}),g.jsx(xd,{label:"WhatsApp",name:"whatsapp",value:l.whatsapp,onChange:w}),g.jsx(xd,{label:"Nova Senha",type:"password",value:d,onChange:O=>m(O.target.value),placeholder:"Deixe em branco para no alterar"})]}),g.jsxs("div",{className:"flex justify-end items-center gap-4 mt-6 pt-4 border-t dark:border-dark-border",children:[g.jsx("button",{type:"button",onClick:e,className:"bg-gray-200 dark:bg-dark-border hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-dark-text-primary font-bold py-2 px-4 rounded-xl",children:"Cancelar"}),g.jsx("button",{type:"submit",disabled:x,className:"bg-brand-indigo hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-xl w-32 flex justify-center items-center",children:x?g.jsx(Gi,{className:"h-5 w-5"}):"Salvar"})]})]}),g.jsxs("div",{className:"p-6 mt-4 border-t border-red-200 dark:border-red-900/50 bg-red-50 dark:bg-red-900/20 rounded-b-xl",children:[g.jsx("h3",{className:"font-bold text-red-700 dark:text-red-300",children:"Zona de Perigo"}),g.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:"A excluso da sua conta  permanente e remover todos os seus dados da plataforma."}),g.jsxs("div",{className:"mt-3 flex gap-2",children:[g.jsx("input",{type:"text",value:f,onChange:O=>T(O.target.value),placeholder:'Digite "excluir" para confirmar',className:"flex-grow px-3 py-2 border border-red-300 dark:border-red-700 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 bg-red-100 dark:bg-red-900/30"}),g.jsx("button",{type:"button",onClick:L,disabled:f.toLowerCase()!=="excluir",className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-xl disabled:bg-red-300 dark:disabled:bg-red-800 disabled:cursor-not-allowed",children:"Excluir Conta"})]})]})]})})},xd=({label:n,...e})=>g.jsxs("div",{children:[g.jsx("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-700 dark:text-dark-text-secondary mb-1",children:n}),g.jsx("input",{...e,id:e.name,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-indigo focus:border-brand-indigo bg-blue-50 dark:bg-gray-700 text-light-text-primary dark:text-dark-text-primary focus:bg-blue-100 dark:focus:bg-gray-600 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed"})]}),bE=({isOpen:n,onClose:e,termsOfService:t,privacyPolicy:i})=>n?g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:g.jsxs("div",{className:"bg-light-card dark:bg-dark-card rounded-xl shadow-xl w-full max-w-3xl max-h-[80vh] flex flex-col",children:[g.jsx("div",{className:"p-6 border-b dark:border-dark-border",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("h2",{className:"text-2xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Termos de Uso e Poltica de Privacidade"}),g.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-3xl leading-none",children:""})]})}),g.jsxs("div",{className:"flex-grow p-6 overflow-y-auto prose dark:prose-invert max-w-none",children:[g.jsx("h3",{children:"Termos de Uso"}),g.jsx("p",{children:t||"Os Termos de Uso ainda no foram definidos pelo administrador."}),g.jsx("h3",{className:"mt-6",children:"Poltica de Privacidade"}),g.jsx("p",{children:i||"A Poltica de Privacidade ainda no foi definida pelo administrador."})]}),g.jsx("div",{className:"p-4 bg-gray-50 dark:bg-dark-border/50 rounded-b-xl flex justify-end",children:g.jsx("button",{onClick:e,className:"bg-brand-indigo hover:bg-indigo-700 text-white font-bold py-2 px-6 rounded-xl",children:"Entendi"})})]})}):null,jL=()=>{const[n,e]=te.useState(null),[t,i]=te.useState([]),[o,l]=te.useState([]),[u,d]=te.useState([]),[m,f]=te.useState({name:"Dirio de Obra Inteligente",logo:"",termsOfService:"",privacyPolicy:""}),[T,x]=te.useState(null),[b,w]=te.useState("projectSelection"),[D,L]=te.useState(()=>localStorage.getItem("theme")||"light"),[O,z]=te.useState(!0),[G,j]=te.useState(!1),[ee,le]=te.useState(!1),[ie,N]=te.useState(!1);te.useEffect(()=>{const de=XM(Se=>{e(Se),z(!1)});return()=>de()},[]),te.useEffect(()=>{(async()=>{if(n){j(!0);try{const[Se,Le,B]=await Promise.all([rD(n),oD(),lD()]);if(i(Se),l(Le),f(B),n.role==="admin"||n.role==="gestor"){const se=await Pf(n);d(se)}else d([])}catch(Se){console.error("Failed to load initial data",Se)}finally{j(!1)}}})()},[n]),te.useEffect(()=>{localStorage.setItem("theme",D),D==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[D]);const R=de=>{e(de)},k=async()=>{await tD()},P=de=>{x(de),w("projectDashboard")},V=()=>{x(null),w("projectSelection")},U=async de=>{await sD(de),i(de)},M=async de=>{await aD(de),l(de)},ce=async de=>{if(await zg(de),d(de),n){const Se=de.find(Le=>Le.id===n.id);Se&&e(Se)}},Ve=async de=>{await uD(de),f(de)},Q=async()=>{n&&(await iD(n.id),k())};if(O)return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-light-bg dark:bg-dark-bg",children:g.jsx(Gi,{className:"h-12 w-12 text-brand-indigo"})});if(!n)return g.jsxs(g.Fragment,{children:[g.jsx(_D,{onLoginSuccess:R,platformSettings:m,onOpenPrivacyPolicy:()=>N(!0)}),g.jsx(bE,{isOpen:ie,onClose:()=>N(!1),termsOfService:m.termsOfService,privacyPolicy:m.privacyPolicy})]});if(G)return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-light-bg dark:bg-dark-bg",children:g.jsx(Gi,{className:"h-12 w-12 text-brand-indigo"})});const ue=()=>{if(T&&b==="projectDashboard")return g.jsx(BL,{project:T,currentUser:n,constructors:o,platformSettings:m});switch(b){case"adminDashboard":return g.jsx(GL,{allUsers:u,platformSettings:m,onSavePlatformSettings:Ve,saveAllUsers:ce});case"projectSelection":default:return g.jsx(wL,{projects:t,onSelectProject:P,currentUser:n,setView:w,saveProjects:U,constructors:o,saveConstructors:M,allUsers:u,saveUsers:ce,platformSettings:m})}};return g.jsxs("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg transition-colors duration-300",children:[g.jsx(TD,{platformSettings:m,projectName:T==null?void 0:T.name,onGoBack:T?V:void 0,userName:n.name,onLogout:k,onOpenProfile:()=>le(!0),theme:D,onToggleTheme:()=>L(de=>de==="light"?"dark":"light")}),g.jsx("main",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:ue()}),g.jsx(HL,{isOpen:ee,onClose:()=>le(!1),currentUser:n,onSave:ce,onDeleteAccount:Q}),g.jsx(bE,{isOpen:ie,onClose:()=>N(!1),termsOfService:m.termsOfService,privacyPolicy:m.privacyPolicy})]})},LA=document.getElementById("root");if(!LA)throw new Error("Could not find root element to mount to");const YL=EC.createRoot(LA);YL.render(g.jsx(jp.StrictMode,{children:g.jsx(jL,{})}));
